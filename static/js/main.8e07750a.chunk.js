(this["webpackJsonpepam-app"]=this["webpackJsonpepam-app"]||[]).push([[0],{303:function(e,t,a){},304:function(e,t,a){},528:function(e,t,a){},533:function(e,t,a){},534:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(0),i=a(16),r=a.n(i),c=(a(303),a(26)),l=(a(304),a(37)),o=a(21),u=a(22),d=a(28),m=a(544),b=function(e){var t;return e||(t="Required!"),t},j=function(e){var t;return e?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||(t="Invalid email address!"):t="Required!",t},p=a(297),h=a(56),f=a(542),O=a(152),v=a(545),k=a(227),x=a(537),g=a(548),S=a(145),T=a.n(S),I=f.a.Item,D=O.a.Option,L=u.d.CheckboxItem,y=v.a.TextArea,w=function(e){return function(t){var a=t.field,s=t.form,i=t.hasFeedback,r=t.label,c=t.selectOptions,l=t.submitCount,u=t.type,d=Object(p.a)(t,["field","form","hasFeedback","label","selectOptions","submitCount","type"]),m=s.touched[a.name],b=l>0,j=s.errors[a.name],f=j&&b,O=j&&m,v=function(e){void 0===e?"select"!==u&&"time"!==u||s.setFieldValue(a.name,null):null===e?s.setFieldValue(a.name,null):e.target?s.setFieldValue(a.name,e.target.value):"time"===u?s.setFieldValue(a.name,e):Array.isArray(e)?s.setFieldValue(a.name,e[0]):s.setFieldValue(a.name,e)},k=function(e){"string"!==typeof e&&"checkbox"===e.target.type?s.setFieldValue(a.name,e.target.checked):s.setFieldValue(a.name,e)},x=function(){return s.setFieldTouched(a.name,!0)};return Object(n.jsx)(I,{label:h.isMobile?null:r,hasFeedback:!!(i&&b||i&&m),help:!(!f&&!O)&&j,validateStatus:f||O?"error":"success",children:h.isMobile?Object(n.jsx)(F,{AntComponent:e,onBlur:x,type:u,onInputChange:v,onChange:k,label:r,selectOptions:c,value:a.value}):Object(n.jsx)(e,Object(o.a)(Object(o.a)(Object(o.a)({},a),d),{},{allowClear:c?"true":"false",onBlur:x,onChange:u?v:k,children:c&&c.map((function(e){return Object(n.jsx)(D,{title:e.name,value:e.value,children:e.name},e.name)}))}))})}},C=h.isMobile?w(u.l):w(O.a),N=h.isMobile?w(u.e):w(k.a),_=h.isMobile?w(u.h):w(v.a),M=h.isMobile?w(u.h):w(v.a.Password),Y=h.isMobile?w(u.e):w(x.a),A=h.isMobile?w(L):w(g.a),E=h.isMobile?w(u.p):w(y),F=function(e){var t=Object(s.useState)("select"===e.type?[e.value]:e.value),a=Object(c.a)(t,2),i=a[0],r=a[1];Object(s.useEffect)((function(){"select"===e.type&&e.label,r(e.value)}),[e.value]);var l;l=null!==e.selectOptions&&void 0!==e.selectOptions?e.selectOptions.map((function(e){return{label:e.name,value:e.value,key:e.name}})):[];var o=e.type;return Object(n.jsx)(u.i,{children:Object(n.jsx)(e.AntComponent,{onBlur:e.onBlur,type:e.type,onChange:e.type?function(t){r(t),e.onInputChange(t)}:e.onChange,mode:o,defaultValue:i,defaultChecked:i,value:i,title:e.label,locale:T.a,autoHeight:!0,className:"text"===e.type?"pl-0":null,data:l,cols:1,onOk:function(e){return r(e)},onPickerChange:function(e){r(e)},children:Object(n.jsx)(u.i.Item,{className:"pl-0",children:e.label})},e.label)})},z=new Date;z.setHours(0),z.setMinutes(0),z.setSeconds(0),z.setMilliseconds(0);var V=new Date;V.setHours(23),V.setMinutes(59),V.setSeconds(0),V.setMilliseconds(0);var H,K={timeScaleInrerval:!1,completeInrerval:!0,timeScaleSingle:!0,completeSingle:!0,timeStart:z,timeEnd:V},P=function(e){var t=Object(s.useState)(null!==e.viewSettings?e.viewSettings:K),a=Object(c.a)(t,2),i=a[0];a[1];for(var r in i.ToDo)if(Object.prototype.hasOwnProperty.call(i.ToDo,r))i.ToDo[r];return Object(n.jsx)(m.a,{title:"Task display settings",visible:e.isModalVisible,onOk:e.handleOk,onCancel:e.handleCancel,children:Object(n.jsx)(d.c,{initialValues:K,onSubmit:function(t){e.changeSettings("ToDo",t),e.handleOk()},render:R})})},R=function(e){return Object(n.jsxs)(d.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(n.jsxs)(u.i,{renderHeader:function(){return"Single date settings"},children:[Object(n.jsx)(d.a,{component:A,name:"timeScaleSingle",label:"is time scale visible",submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:A,name:"completeSingle",label:"is complete visible",submitCount:e.submitCount})]}),Object(n.jsxs)(u.i,{renderHeader:function(){return"Inrerval date settings"},children:[Object(n.jsx)(d.a,{component:A,name:"timeScaleInrerval",label:"is time scale visible",submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:A,name:"completeInrerval",label:"is complete visible",submitCount:e.submitCount})]}),Object(n.jsxs)(u.i,{renderHeader:function(){return"Work day info"},children:[Object(n.jsx)(d.a,{component:N,name:"timeStart",type:"time",label:"Start time",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:N,name:"timeEnd",type:"time",label:"End time",validate:b,submitCount:e.submitCount,hasFeedback:!0})]}),Object(n.jsx)("div",{className:"submit-container",children:Object(n.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})},U=a(48),q=a.n(U),B=a(64),G=a(282),J=a.n(G).a.create({withCredentials:!0,baseURL:"https://crmapiserver.h1n.ru/api/"});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(H||(H={}));var X=function(){return J.get("authMe/"+localStorage.getItem("remember_token")).then((function(e){return e}))},W=function(e){return J.post("login",e).then((function(e){return null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.remember_token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Z=function(e){return J.post("register",e).then((function(e){return null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Q={user:null,remember_token:null,isAuth:!1,viewSettings:{ToDo:{}}},$={setAuthUserData:function(e,t){return{type:"SN/AUTH/SET_USER_DATA",user:e,remember_token:t}},logout:function(){return{type:"SN/AUTH/LOGOUT"}},changeSettings:function(e,t){return{type:"SN/AUTH/SET_SETTINGS_DATA",settingType:e,settings:t}}},ee=function(e){return function(){var t=Object(B.a)(q.a.mark((function t(a,n){var s;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:(s=t.sent)&&200===s.status&&a($.setAuthUserData(s.data.user,s.data.remember_token));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET_SETTINGS_DATA":var a=Object(o.a)({},e.viewSettings);return a[t.settingType]=t.settings,Object(o.a)(Object(o.a)({},e),{},{viewSettings:a});case"SN/AUTH/SET_USER_DATA":return null!==t.user?Object(o.a)(Object(o.a)({},e),{},{user:t.user,remember_token:t.remember_token,isAuth:!0,viewSettings:JSON.parse(t.user.view_settings)}):Q;case"SN/AUTH/LOGOUT":return localStorage.removeItem("remember_token"),Q;default:return e}},ae=Object(l.b)((function(e){return{viewSettings:e.auth.viewSettings}}),{changeSettings:$.changeSettings})(P),ne=a(90),se=a(550),ie=a(551),re=a(31),ce=a.n(re),le=k.a.RangePicker,oe=function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(s.useState)({startDate:ce()(),endDate:ce()()}),o=Object(c.a)(l,2),u=o[0],d=o[1];Object(s.useEffect)((function(){e.dateInterval.startDate.isSame(u.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(u.endDate.format("YYYY-MM-DD"),"day")||e.setIsInterval(i,u)}),[i,u,e]);return Object(n.jsxs)("div",{className:"row w-100",children:[Object(n.jsxs)("div",{className:"col-12 col-md-9 col-lg-9 col-xl-7 w-100",children:[Object(n.jsx)("div",{className:"d-none d-sm-inline",children:Object(n.jsxs)("label",{children:[i?"Date interval":"Date",":"]})}),Object(n.jsx)("div",{className:"d-none d-inline",children:i?Object(n.jsx)(le,{onChange:function(e,t){null!==e&&null!==e[0]&&null!==e[1]&&d({startDate:e[0],endDate:e[1]})},defaultValue:[e.dateInterval.startDate,e.dateInterval.endDate],value:[e.dateInterval.startDate,e.dateInterval.endDate],format:"DD-MM-YYYY",style:{marginLeft:10}}):Object(n.jsx)(k.a,{onChange:function(e,t){null!==e&&d({startDate:e,endDate:e})},defaultValue:e.dateInterval.startDate,format:"DD-MM-YYYY",style:{marginLeft:10}})})]}),Object(n.jsx)("div",{className:"col-12 col-md-3 col-lg-3 col-xl-2 m-2 m-md-0",children:Object(n.jsx)(g.a,{className:"ml-3",onChange:function(e){e.target.checked||d({startDate:u.startDate,endDate:u.startDate}),r(e.target.checked)},children:"Date interval"})}),Object(n.jsxs)("div",{className:"col-12 col-md-12 col-lg-4 col-xl-3 mt-lg-2",children:[Object(n.jsx)(ne.a,{type:"primary",shape:"round",icon:Object(n.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(n.jsx)(se.a,{style:{fontSize:"18px"}}),Object(n.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:e.showDrawer}),Object(n.jsx)(ne.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},onClick:e.showModal,icon:Object(n.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(n.jsx)(ie.a,{style:{fontSize:"18px"}}),Object(n.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]})]})},ue=function(e){return J.post("tasks",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},de=function(e){return J.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token"),J.post("tasks/part",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},me=function(e){return J.delete("tasks/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},be=function(e,t){return J.put("tasks/".concat(t),e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},je={taskList:null,taskListIsFetching:!1,taskSaveStatus:"no",errorMessage:null,isInterval:!1,dateInterval:{startDate:ce()(),endDate:ce()()}},pe={setTaskList:function(e){return{type:"SN/TASK/SET_TASK_LIST",taskList:e}},setTaskSaveStatus:function(e){return{type:"SN/TASK/SET_TASK_SAVE_STATUS",taskSaveStatus:e}},setErrorMessage:function(e){return{type:"SN/TASK/SET_ERROR_MESSAGE",message:e}},setTaskListIsFetching:function(e){return{type:"SN/TASK/SET_TASK_LIST_IS_FETCHING",isFetchingValue:e}},setIsInterval:function(e,t){return{type:"SN/TASK/SET_IS_INTERVAL",isInterval:e,date:t}},editTaskList:function(e){return{type:"SN/TASK/EDIT_TASK_LIST",task:e}}},he=function(e,t){return function(){var a=Object(B.a)(q.a.mark((function a(n,s){var i,r;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(pe.setTaskListIsFetching(!0)),i={start_date:e,end_date:t},a.next=4,de(i);case 4:void 0!==(r=a.sent)&&null!==r&&n(pe.setTaskList(r.data)),n(pe.setTaskListIsFetching(!1));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},fe=function(e,t,a){return function(){var n=Object(B.a)(q.a.mark((function n(s,i){return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me(e);case 2:null!==n.sent&&(s(pe.setErrorMessage("Task deletion was successful")),s(he(t,a)),s(pe.setErrorMessage(null)));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Oe=function(e,t){return function(){var a=Object(B.a)(q.a.mark((function a(n,s){var i;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,be(e,t);case 2:i=a.sent,n(pe.editTaskList(i.data[0]));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK/EDIT_TASK_LIST":if(null!==e.taskList){var a=e.taskList.map((function(e){return t.task.id===e.id?t.task:e}));return Object(o.a)(Object(o.a)({},e),{},{taskList:a})}return e;case"SN/TASK/SET_TASK_LIST":return Object(o.a)(Object(o.a)({},e),{},{taskList:t.taskList.Tasks});case"SN/TASK/SET_TASK_SAVE_STATUS":return Object(o.a)(Object(o.a)({},e),{},{taskSaveStatus:t.taskSaveStatus});case"SN/TASK/SET_ERROR_MESSAGE":return Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.message});case"SN/TASK/SET_TASK_LIST_IS_FETCHING":return Object(o.a)(Object(o.a)({},e),{},{taskListIsFetching:t.isFetchingValue});case"SN/TASK/SET_IS_INTERVAL":var n={startDate:t.date.startDate,endDate:t.date.endDate};return Object(o.a)(Object(o.a)({},e),{},{isInterval:t.isInterval,dateInterval:n});default:return e}},ke=function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(s.useState)(!0),o=Object(c.a)(l,2);o[0],o[1];return Object(n.jsxs)("div",{className:"w-100",children:[Object(n.jsx)(u.e,{locale:T.a,mode:"date",value:e.dateInterval.startDate.toDate(),onChange:function(t){i?e.setIsInterval(i,{startDate:ce()(t),endDate:e.dateInterval.endDate}):e.setIsInterval(i,{startDate:ce()(t),endDate:ce()(t)})},children:Object(n.jsx)(u.i.Item,{className:"w-100",children:i?"Start:":"Date:"})}),i?Object(n.jsx)(u.e,{locale:T.a,mode:"date",value:e.dateInterval.endDate.toDate(),onChange:function(t){e.setIsInterval(i,{startDate:e.dateInterval.startDate,endDate:ce()(t)})},children:Object(n.jsx)(u.i.Item,{children:"End:"})}):null,Object(n.jsx)(u.i.Item,{extra:Object(n.jsx)(u.o,{checked:i,onChange:function(t){t?e.setIsInterval(!i,{startDate:e.dateInterval.startDate,endDate:e.dateInterval.endDate}):e.setIsInterval(!i,{startDate:e.dateInterval.startDate,endDate:e.dateInterval.startDate}),r(!i)}}),children:"Date interval"}),Object(n.jsx)(u.b,{inline:!0,size:"small",className:"ml-3",onClick:function(){e.showDrawer()},type:"primary",children:e.isOpen?"Close":"Add"}),Object(n.jsx)(u.b,{inline:!0,size:"small",className:"ml-3",onClick:function(){e.showModal()},type:"primary",children:"Settings"})]})},xe=Object(l.b)((function(e){return{dateInterval:e.task.dateInterval}}),{setIsInterval:pe.setIsInterval})(h.isMobile?ke:oe),ge=function(e){return Object(n.jsxs)(d.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(n.jsx)(d.a,{component:_,name:"name",type:"text",label:"Name",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:N,name:"date",type:"date",label:"Task date",validate:b,submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:Y,name:"time",type:"time",label:"Task time",validate:b,submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:E,name:"descriptions",type:"text",label:"Descriptions",submitCount:e.submitCount}),Object(n.jsx)("div",{className:"submit-container",children:Object(n.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})},Se=a(538),Te={header:"Create New Task",taskId:!1},Ie=new Date;Ie.setHours(0),Ie.setMinutes(0),Ie.setSeconds(0),Ie.setMilliseconds(0);var De={name:"",time:Ie,date:new Date,descriptions:""},Le=function(e){Object(s.useEffect)((function(){null===e.taskList&&e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))}),[e.taskList]),Object(s.useEffect)((function(){e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))}),[e.dateInterval]),Object(s.useEffect)((function(){e.isInterval?g(e.viewSettings.ToDo.timeScaleInrerval):g(e.viewSettings.ToDo.timeScaleSingle)}),[e.isInterval,e.viewSettings]);var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(s.useState)(!1),m=Object(c.a)(l,2),b=m[0],j=m[1],p=Object(s.useState)(Te),h=Object(c.a)(p,2),f=h[0],O=h[1],v=Object(s.useState)(e.viewSettings.ToDo.timeScaleSingle),k=Object(c.a)(v,2),x=k[0],g=k[1],S=Object(s.useState)(De),T=Object(c.a)(S,2),I=T[0],D=T[1],L=function(){i&&D(De),r(!i)},y=function(t){t.isCompleted=!t.isCompleted,e.updateTask(t,t.id)};return null!==e.taskList?Object(n.jsxs)(u.r,{size:"lg",children:[Object(n.jsx)(u.q,{size:"lg"}),Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.c.Header,{title:Object(n.jsx)(xe,{showDrawer:L,showModal:function(){j(!0)},isOpen:i})}),Object(n.jsx)(ae,{isModalVisible:b,handleOk:function(){j(!1)},handleCancel:function(){j(!1)}}),Object(n.jsx)(u.f,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(d.c,{initialValues:I,onSubmit:function(t){var a=Object(o.a)({},t);void 0!==a.time&&(a.time=ce()(a.time).format("HH:mm:ss")),void 0!==a.date&&(a.date=ce()(a.date).format("YYYY-MM-DD")),a.user_id=e.userId,f.taskId?e.updateTask(a,f.taskId):e.createNewTask(a,!0),L()},render:ge,enableReinitialize:!0})}),open:i,onOpenChange:function(e){r(!i)},children:Object(n.jsx)(u.i,{children:x?Object(n.jsx)(we,{taskList:e.taskList,dateInterval:e.dateInterval,deleteTask:e.deleteTask,setDrawerData:O,setInitialFormValues:D,showDrawer:L,onComplete:y}):Object(n.jsx)(Ce,{taskList:e.taskList,dateInterval:e.dateInterval,deleteTask:e.deleteTask,setDrawerData:O,setInitialFormValues:D,showDrawer:L,onComplete:y})})})]})]}):Object(n.jsx)("div",{children:"null"})},ye=function(e){Object(l.c)();return Object(n.jsx)(u.n,{style:{backgroundColor:"gray"},autoClose:!0,right:[{text:"Delete",onPress:function(){return e.deleteTask(e.element.id,e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))},style:{backgroundColor:"#F4333C",color:"white"}}],left:[{text:"Edit",onPress:function(){!function(t){e.setDrawerData({header:'Edite "'+t.name+'"',taskId:t.id});var a=t.time.split(/:/),n=new Date;n.setHours(parseInt(a[0])),n.setMinutes(parseInt(a[1])),n.setSeconds(parseInt(a[2])),n.setMilliseconds(0);var s=t.date.split(/-/),i=new Date;i.setFullYear(parseInt(s[0])),i.setMinutes(parseInt(s[1])),i.setDate(parseInt(s[2])),e.setInitialFormValues({name:t.name,time:n,date:i,descriptions:t.descriptions?t.descriptions:null}),e.showDrawer()}(e.element)},style:{backgroundColor:"#108ee9",color:"white"}},{text:e.element.isCompleted?"Not Done":"Done",onPress:function(){e.onComplete(e.element)},style:{backgroundColor:"green",color:"white"}}],children:Object(n.jsx)(u.i.Item,{onClick:function(){},wrap:!0,children:Object(n.jsxs)("div",{className:"w-100 row ",children:[Object(n.jsx)("div",{className:"col-2 ",children:Object(n.jsx)("span",{className:"ml-3",children:e.element.time.split(/:/)[0]+":"+e.element.time.split(/:/)[1]})}),Object(n.jsx)("div",{className:"col-10",children:e.element.isCompleted?Object(n.jsx)("span",{className:"text-black-50 text-break ml-3",children:e.element.name}):Object(n.jsx)("span",{className:"text-break ml-3",children:e.element.name})})]},e.element.id)},e.element.id)})},we=function(e){for(var t=Object(s.useState)(0),a=Object(c.a)(t,2),i=(a[0],a[1],ce()(e.dateInterval.startDate)),r=[];ce()(i.format("YYYY-MM-DD")).isSameOrBefore(ce()(e.dateInterval.endDate.format("YYYY-MM-DD")));)r.push(ce()(i)),i.add(1,"days");var l=function(t,a){var s=[];return null!==e.taskList&&(s=e.taskList.map((function(s){if(s.date===t){var i=s.time.split(":")[0];if(ce()().hours(a).format("HH")===i)return Object(n.jsx)(ye,{element:s,dateInterval:e.dateInterval,deleteTask:e.deleteTask,setDrawerData:e.setDrawerData,setInitialFormValues:e.setInitialFormValues,showDrawer:e.showDrawer,onComplete:e.onComplete})}}))),s},o=function(e){for(var t=[],a=0;a<24;a++)t.push(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Se.a,{orientation:"left",children:[a<=9?"0":null,a,":00"]},a+"to"+e),l(e,a)]}));return t};return Object(n.jsx)(n.Fragment,{children:r.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:e.format("DD MMMM")}),o(e.format("YYYY-MM-DD"))]})}))})},Ce=function(e){for(var t=ce()(e.dateInterval.startDate),a=[];ce()(t.format("YYYY-MM-DD")).isSameOrBefore(ce()(e.dateInterval.endDate.format("YYYY-MM-DD")));)a.push(ce()(t)),t.add(1,"days");return Object(n.jsx)(n.Fragment,{children:a.map((function(t){var a;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:t.format("DD MMMM")}),null===(a=e.taskList)||void 0===a?void 0:a.map((function(a){if(a.date===t.format("YYYY-MM-DD"))return Object(n.jsx)(ye,{element:a,dateInterval:e.dateInterval,deleteTask:e.deleteTask,setDrawerData:e.setDrawerData,showDrawer:e.showDrawer,setInitialFormValues:e.setInitialFormValues,onComplete:e.onComplete})}))]})}))})},Ne=a(540),_e=a(547),Me=a(296),Ye=a(283),Ae=a(192),Ee=a(133),Fe=a(82),ze=a(541),Ve=a(552),He=a(553),Ke=function(e){var t=Object(s.useState)(1===e.element.isCompleted),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(s.useState)(!1),o=Object(c.a)(l,2),u=o[0],d=o[1];return Object(n.jsx)(ze.a.Item,{action:!0,className:"",children:Object(n.jsxs)(Ee.a,{className:"px-0 ml-0 ml-sm-5",children:[Object(n.jsx)(Fe.a,{className:"mx-2",children:Object(n.jsx)(g.a,{onChange:function(t){r(!i);var a={isCompleted:t.target.checked};e.updateTask(a,e.element.id)},checked:i})}),Object(n.jsx)(Fe.a,{className:"mx-2",children:e.element.time.split(":",2).join(":")}),Object(n.jsx)(Fe.a,{className:"mx-2",children:Object(n.jsx)(Ae.a,{placement:"topLeft",title:e.element.descriptions,children:Object(n.jsx)("span",{style:{textDecoration:i?"line-through":""},children:e.element.name})},e.element.id)}),Object(n.jsxs)(Fe.a,{className:"mr-auto ml-0 mr-sm-2 ml-sm-auto",children:[Object(n.jsx)(ne.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){var t;t=e.element,e.onEdit(t)},icon:Object(n.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(n.jsx)(Ve.a,{className:"ml-1",style:{fontSize:"14px"}})})}),u?Object(n.jsx)(Ye.a,{size:"small"},"spin"):Object(n.jsx)(ne.a,{danger:!0,type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){var t;t=e.element.id,d(!0),e.deleteTask(t,e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))},icon:Object(n.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(n.jsx)(He.a,{className:"ml-1",style:{fontSize:"14px"}})})})]})]})})},Pe=Object(l.b)((function(e){return{dateInterval:e.task.dateInterval}}),{deleteTask:fe,getTaskList:he,updateTask:Oe})(Ke),Re=function(e){return"date"===e?function(e,t){return e.date>t.date?1:-1}:function(e,t){return e.time>t.time?-1:1}},Ue=function(e){var t=Object(s.useState)({startDate:ce()(null),endDate:ce()()}),a=Object(c.a)(t,2),i=a[0],r=a[1];return Object(s.useEffect)((function(){e.dateInterval.startDate.isSame(i.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(i.endDate.format("YYYY-MM-DD"),"day")||null!==e.dateInterval.startDate&&(e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD")),r(e.dateInterval))}),[e.dateInterval]),Object(s.useEffect)((function(){null!==e.errorMessage&&Me.b.success(e.errorMessage)}),[e.errorMessage]),void 0!==e.taskList?null!==e.taskList?Object(n.jsx)(n.Fragment,{children:qe(e.taskList,e.isInterval,e.onEdit)}):Object(n.jsx)(Ye.a,{size:"large"},"spin"):Object(n.jsx)("div",{children:"Authorization required to get a list of tasks"})},qe=function e(t,a,s){var i=[],r=[];t.sort(Re("time")).sort(Re("date"));var c=function(e){return ce()(e.date).format("D MMMM")},l=null;null!==t&&t.length>0&&(l=c(t[0]),i.push(Object(n.jsxs)("h5",{className:a?"text-left":"",children:[l,":"]},l+"title")));for(var o=0;o<24;o++){if(!(t.length>0)){i.push(Object(n.jsx)("h3",{children:"no tasks"},"noTasks"));break}if(!a&&o>7&&i.push(Object(n.jsxs)(Se.a,{orientation:"left",children:[o<=9?"0":null,o,":00"]},o+"to"+l)),null!==t)for(var u=0;u<t.length;u++){var d=t[u],m=Number(d.time.split(":",1));m>=o&&m<o+1&&(c(d)===l?i.push(Object(n.jsx)(Ae.a,{placement:"topLeft",title:d.descriptions,children:Object(n.jsx)(Pe,{element:d,onEdit:s})},o+"-"+d.id)):r.push(d))}}return r.length>0&&(i=i.concat(e(r,a,s))),i},Be=Object(l.b)((function(e){return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,taskListIsFetching:e.task.taskListIsFetching,dateInterval:e.task.dateInterval,errorMessage:e.task.errorMessage,isInterval:e.task.isInterval}}),{getTaskList:he})(Ue),Ge={header:"Create New Task",taskId:!1},Je=ce()();Je.hours(0),Je.minutes(0),Je.seconds(0),Je.milliseconds(0);var Xe={name:"",time:Je,date:ce()(),descriptions:""},We=function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(s.useState)(!1),u=Object(c.a)(l,2),m=(u[0],u[1]),b=Object(s.useState)(Ge),j=Object(c.a)(b,2),p=j[0],h=j[1],f=Object(s.useState)(Xe),O=Object(c.a)(f,2),v=O[0],k=O[1];Object(s.useEffect)((function(){null===e.taskList&&e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))}),[e.getTaskList]),Object(s.useEffect)((function(){}),[v]);var x=function(){p.taskId,r(!0)},g=function(){k(null),k(Object(o.a)({},Xe)),h(Object(o.a)({},Ge)),r(!1)};return Object(n.jsxs)(Ne.a,{title:Object(n.jsx)(xe,{showDrawer:x,showModal:function(){m(!0)}}),bordered:!1,children:[Object(n.jsx)(Be,{onEdit:function(e){h({header:'Edite "'+e.name+'"',taskId:e.id});var t=e.time.split(/:/);k({name:e.name,time:ce()().hours(t[0]).minutes(t[1]).seconds(0),date:ce()(e.date),descriptions:e.descriptions?e.descriptions:null}),x()}}),Object(n.jsx)(_e.a,{title:p.header,placement:"right",closable:!0,onClose:g,visible:i,width:"90%",children:Object(n.jsx)(d.c,{initialValues:v,onSubmit:function(t){var a=Object(o.a)({},t);void 0!==a.time&&(a.time=a.time.format("HH:mm:ss")),void 0!==a.date&&(a.date=a.date.format("YYYY-MM-DD")),a.user_id=e.userId,p.taskId?e.updateTask(a,p.taskId):e.createNewTask(a,!0),g()},render:ge,enableReinitialize:!0})})]})},Ze=h.isMobile?Le:We,Qe=Object(l.b)((function(e){var t;return{taskList:e.task.taskList,viewSettings:e.auth.viewSettings,isInterval:e.task.isInterval,dateInterval:e.task.dateInterval,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id}}),{getTaskList:he,createNewTask:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(B.a)(q.a.mark((function a(n,s){var i,r,c,l;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(pe.setTaskSaveStatus("inProgress")),a.next=3,ue(e);case 3:(i=a.sent)&&i.status&&200===i.status?(t&&(r=s(),c=r.task.dateInterval.startDate.format("YYYY-MM-DD"),l=r.task.dateInterval.endDate.format("YYYY-MM-DD"),n(he(c,l))),n(pe.setTaskSaveStatus("success")),n(pe.setTaskSaveStatus("no"))):i&&i.data&&(n(pe.setErrorMessage(i.data.message)),n(pe.setTaskSaveStatus("error")),n(pe.setTaskSaveStatus("no")),n(pe.setErrorMessage(null)));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateTask:Oe,deleteTask:fe})(Ze),$e=a(50),et=a(77),tt=(a(518),a(519),a(520),a(106)),at=a(287),nt={initialized:!1,location:"/"},st=function(){return{type:"SN/APP/INITIALIZED_SUCCESS"}},it=function(e){return{type:"SN/APP/SET_LOCATION",location:e}},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/INITIALIZED_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{initialized:!0});case"SN/APP/SET_LOCATION":return Object(o.a)(Object(o.a)({},e),{},{location:t.location});default:return e}},ct=a(153);J.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token");var lt=function(){return J.get("taskList").then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},ot=function(e){return J.post("taskList",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},ut=function(e){return J.delete("taskList/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},dt=function(e,t){return J.put("taskList/".concat(t),e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},mt={taskList:[],taskListIsFetching:!1,isTaskListLoaded:!1,selectedTasks:[]},bt={setTaskList:function(e){return{type:"SN/TASK_LIST/SET_TASK_LIST",taskList:e}},setSelectedTasks:function(e){return{type:"SN/TASK_LIST/SET_SELECTED_TASK",taskId:e}},backSelectedTasks:function(){return{type:"SN/TASK_LIST/BACK_SELECTED_TASK"}}},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK_LIST/BACK_SELECTED_TASK":var a=Object(ct.a)(e.selectedTasks);return a.length>0&&a.pop(),Object(o.a)(Object(o.a)({},e),{},{selectedTasks:a});case"SN/TASK_LIST/SET_SELECTED_TASK":return Object(o.a)(Object(o.a)({},e),{},{selectedTasks:[].concat(Object(ct.a)(e.selectedTasks),[t.taskId])});case"SN/TASK_LIST/SET_TASK_LIST":return Object(o.a)(Object(o.a)({},e),{},{taskList:t.taskList,isTaskListLoaded:!0});default:return e}},pt=Object(tt.c)({task:ve,app:rt,auth:te,taskList:jt}),ht=Object(tt.e)(pt,Object(tt.a)(at.a)),ft=a(539),Ot=a(549),vt=Ot.a.SubMenu,kt=function(e){var t,a,i=Object($e.g)(),r=Object(s.useState)([]),l=Object(c.a)(r,2);l[0],l[1];return Object(n.jsxs)(Ot.a,{onClick:function(e){},mode:"horizontal",theme:"dark",children:[e.menuData.map((function(e){return Object(n.jsx)(vt,{title:e.label,children:(t=e.children,t.map((function(e){return Object(n.jsx)(Ot.a.Item,{children:Object(n.jsx)(et.b,{to:e.value,children:e.label})},e.value)})))},e.value);var t})),e.isAuth?Object(n.jsx)(vt,{title:null===(a=e.user)||void 0===a?void 0:a.name,children:Object(n.jsx)(Ot.a.Item,{onClick:function(){i.replace(e.appLocation+"login"),e.logout()},children:"Logout"},"login")},null===(t=e.user)||void 0===t?void 0:t.name):Object(n.jsx)(Ot.a.Item,{children:Object(n.jsx)(et.b,{to:e.appLocation+"login",children:"Login"})},"login")]})},xt=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,user:e.auth.user,appLocation:e.app.location}}),{logout:$.logout})(kt),gt=(a(528),u.m.Item),St=function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1];return Object(n.jsx)("div",{className:"mr-3",children:Object(n.jsx)(u.m,{mask:!0,visible:i,overlay:[Object(n.jsx)(gt,{children:"Logout"},"1"),Object(n.jsx)(gt,{children:"Info"},"2"),Object(n.jsx)(gt,{children:"Help"},"3")],onVisibleChange:function(e){r(e)},onSelect:function(t,a){r(!1),"Logout"===t.props.children&&e.onLogout()},children:Object(n.jsx)("div",{style:{height:"100%",padding:"0 15px",marginRight:"-20px",display:"flex",alignItems:"center"},children:Object(n.jsx)(u.g,{type:"ellipsis"})})})})},Tt=function(e){var t,a=Object($e.g)(),i=Object($e.h)(),r=Object(s.useState)(!1),l=Object(c.a)(r,2),o=l[0],d=l[1],m=Object(ct.a)(e.menuData),b=Object(s.useState)(m),j=Object(c.a)(b,2),p=j[0],h=(j[1],Object(s.useState)(function(){var e=[m[0].value,""];return m.forEach((function(t){t.children&&t.children.forEach((function(a){a.value===i.pathname&&(e=[t.value,a.value])}))})),e}())),f=Object(c.a)(h,2),O=f[0],v=f[1],k=function(e){if(e){var t=e[0];m.forEach((function(n){n.value===e[0]&&(t=e[0],n.children&&e[1]&&n.children.forEach((function(t){t.value===e[1]&&(a.replace("".concat(t.value)),d(!1))})))})),""===t&&(t=m[0].value),v([t,e[1]])}},x=Object(n.jsx)(u.j,{className:"foo-menu",data:p,value:O,onChange:k,height:.6*document.documentElement.clientHeight}),g=Object(n.jsx)("div",{style:{width:"100%",height:.6*document.documentElement.clientHeight,display:"flex",justifyContent:"center"},children:Object(n.jsx)(u.a,{size:"large"})});return Object(n.jsxs)("div",{className:o?"menu-active":"",children:[Object(n.jsx)("div",{children:Object(n.jsx)(u.k,{leftContent:"",mode:"light",icon:Object(n.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/iXVHARNNlmdCGnwWxQPH.svg",className:"am-icon am-icon-md",alt:""}),onLeftClick:function(e){e.preventDefault(),d(!o)},className:"top-nav-bar",rightContent:e.isAuth?Object(n.jsx)(St,{onLogout:function(){k(["",""]),a.replace(e.appLocation+"login"),e.logout()}}):null,children:e.isAuth?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{children:null===(t=e.user)||void 0===t?void 0:t.name})}):Object(n.jsx)(et.b,{to:e.appLocation+"login",onClick:function(){k(["",""])},children:Object(n.jsx)("span",{className:"text-white",children:"Login"})})})}),o?p?x:g:null,o?Object(n.jsx)("div",{className:"menu-mask",onClick:function(){d(!1)}}):null]})},It=Object(l.b)((function(e){return{appLocation:e.app.location,isAuth:e.auth.isAuth,user:e.auth.user}}),{})(Tt),Dt=function(e){return h.isMobile?Object(n.jsx)(It,{menuData:Lt(e.appLocation),logout:e.logout}):Object(n.jsx)(xt,{menuData:Lt(e.appLocation)})},Lt=function(e){return[{value:"planning",label:"Planning",children:[{label:"ToDo list",value:e+"toDoList",disabled:!1},{label:"Tasks tree",value:e+"tasksTree"},{label:"Analysis",value:e+"analysis",disabled:!0}]},{value:"catalog",label:"Catalog",children:[{label:"Products",value:e+"products"},{label:"Providers",value:e+"providers"}]},{value:"orders",label:"Orders",children:[{label:"Orders",value:e+"orders"},{label:"Leads",value:e+"leads"}]}]},yt=Object(l.b)((function(e){return{appLocation:e.app.location,user:e.auth.user}}),{logout:$.logout})(Dt),wt=function(e){return Object(n.jsxs)(d.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(n.jsx)(d.a,{component:_,name:"email",type:"email",label:"Email",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:M,name:"password",type:"password",label:"Password",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:A,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(n.jsx)("div",{className:"submit-container",children:Object(n.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Login"})})]})},Ct=(u.d.CheckboxItem,{}),Nt=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{className:"mb-5 mx-auto",children:"Login Form"}),Object(n.jsx)(d.c,{initialValues:Ct,onSubmit:function(t){t.remember||(t.remember=!1),e.login(t)},render:wt}),Object(n.jsx)("div",{className:"mt-3",children:Object(n.jsx)(et.b,{to:e.location+"register",children:Object(n.jsx)(ne.a,{type:"link",block:!0,children:"Register"})})})]})},_t=Object(l.b)((function(e){return{auth:e.auth,location:e.app.location}}),{login:ee})(Nt),Mt=function(e){return Object(n.jsx)("div",{children:"Orders"})},Yt=Object(l.b)((function(e){return{appLocation:e.app.location}}),{})(Mt),At=a(546),Et=a(543),Ft=(O.a.Option,function(e){var t=e.values,a=t.selectOptions,i=t.taskTypes,r=Object(s.useState)(t.taskType),l=Object(c.a)(r,2),o=l[0],u=l[1];return Object(s.useEffect)((function(){var t=e.values.task_type;u(t)}),[e.values]),Object(n.jsxs)(d.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(n.jsx)(d.a,{component:_,name:"name",type:"text",label:"Name",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:C,selectOptions:a,name:"parent_id",type:"select",label:"Parent",submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:E,name:"descriptions",type:"text",label:"Descriptions",submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:Y,name:"time_to_complete",type:"time",label:"Time to complete",submitCount:e.submitCount}),Object(n.jsx)(d.a,{component:C,selectOptions:i,name:"task_type",type:"select",label:"task Types",submitCount:e.submitCount}),2===o?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{component:_,name:"context1",type:"text",label:"context1",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:_,name:"context2",type:"text",label:"context2",validate:b,submitCount:e.submitCount,hasFeedback:!0})]}):null,Object(n.jsx)("div",{className:"submit-container",children:Object(n.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})}),zt=(At.a.Panel,{header:"Create New Task",taskId:!1}),Vt=function(e){Object(s.useEffect)((function(){void 0===e.taskList||0!==e.taskList.length||e.isTaskListLoaded?void 0===e.taskList&&e.getTaskList():e.getTaskList(),r(!1),O(j)}),[e.taskList]);var t=Object(s.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(s.useState)(zt),u=Object(c.a)(l,2),m=u[0],b=u[1],j={selectOptions:void 0!==e.taskList&&e.taskList.length>0?e.taskList.map((function(e){return{name:e.name,value:e.id}})):null,taskTypes:[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:1},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0442\u043e\u043c",value:2}],task_type:1,name:""},p=Object(s.useState)(j),h=Object(c.a)(p,2),f=h[0],O=h[1],v=function(){r(!0)};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"site-card-border-less-wrapper",children:Object(n.jsxs)(Ne.a,{title:Object(n.jsx)("div",{className:"inline",children:Object(n.jsx)("div",{children:Object(n.jsx)("h2",{children:"Tasks Tree"})})}),extra:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ne.a,{type:"primary",shape:"round",icon:Object(n.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(n.jsx)(se.a,{style:{fontSize:"18px"}}),Object(n.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:function(){b(zt),O(j),v()}}),Object(n.jsx)(ne.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},icon:Object(n.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(n.jsx)(ie.a,{style:{fontSize:"18px"}}),Object(n.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]}),bordered:!1,children:[Object(n.jsx)(Et.b,{size:"small",bordered:!0,dataSource:Ht(e.taskList,e.deleteTaskList,e.updateTaskList,v,b,f,O),renderItem:function(e){return Object(n.jsx)(Et.b.Item,{draggable:!0,children:e})}}),Object(n.jsx)(_e.a,{title:m.header,placement:"right",closable:!0,onClose:function(){r(!1)},visible:i,width:"90%",children:Object(n.jsx)(d.c,{initialValues:f,onSubmit:function(t){var a=Object(o.a)({},t);delete a.selectOptions,delete a.taskTypes,void 0!==a.time_to_complete&&(a.time_to_complete=a.time_to_complete.format("HH:mm:ss")),a.user_id=e.userId,m.taskId?e.updateTaskList(a,m.taskId):e.createNewTaskList(a)},render:Ft,enableReinitialize:!0})})]})})})},Ht=function(e,t,a,s,i,r,c){var l=function(e){var t={isCompleted:e.target.checked};a(t,e.target.id)};return void 0!==e&&e.length>0?e.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:Object(n.jsx)(g.a,{checked:e.isCompleted,id:e.id,onClick:l})}),Object(n.jsxs)("div",{className:"w-100 float-left",children:[Object(n.jsx)("div",{className:"ml-3 float-left",children:e.isCompleted?Object(n.jsx)("span",{className:"text-black-50",children:e.name}):Object(n.jsx)("span",{children:e.name})}),Object(n.jsx)("div",{className:"ml-3 float-right",children:e.time_to_complete})]},e.id),Object(n.jsxs)("div",{className:"d-flex flex-row",children:[Object(n.jsx)(ne.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){!function(e){i({header:'Edit: "'+e.name+'"',taskId:e.id});var t=ce()().zone("GMT");if(null!==e.time_to_complete){var a=e.time_to_complete.split(/:/);t.hours(parseInt(a[0])).minutes(parseInt(a[1])).seconds(0).milliseconds(0)}else t.hours(0).minutes(0).seconds(0).milliseconds(0);c(Object(o.a)(Object(o.a)({},r),{},{name:e.name,time_to_complete:t,descriptions:e.descriptions,parent_id:e.parent_id,task_type:Number(e.task_type)})),s()}(e)},icon:Object(n.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(n.jsx)(Ve.a,{className:"ml-1",style:{fontSize:"14px"}})})}),Object(n.jsx)(ne.a,{className:"",type:"primary",danger:!0,shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){t(e.id)},icon:Object(n.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(n.jsx)(He.a,{className:"ml-1",style:{fontSize:"14px"}})})})]})]})})):[]},Kt=(a(533),u.i.Item),Pt=new Date;Pt.setHours(0),Pt.setMinutes(0),Pt.setSeconds(0),Pt.setMilliseconds(0);var Rt=function(e){var t=Object(l.c)();return Object(n.jsx)(u.n,{style:{backgroundColor:"gray"},autoClose:!0,right:[{text:"SubTask",onPress:function(){e.setDrawerData({header:'SubTask for: "'+e.taskItem.name+'"',taskId:!1}),e.setInitialFormValues(Object(o.a)(Object(o.a)({},e.initialFormValues),{},{name:"",time_to_complete:Pt,descriptions:"",parent_id:[Number(e.taskItem.id)],task_type:[0]})),e.showDrawer()},style:{backgroundColor:"green",color:"white"}},{text:"Delete",onPress:function(){return e.deleteTaskList(e.taskItem.id)},style:{backgroundColor:"#F4333C",color:"white"}}],left:[{text:"Edit",onPress:function(){!function(t){e.setDrawerData({header:'Edit: "'+t.name+'"',taskId:t.id});var a=new Date(Pt.getTime());if(null!==t.time_to_complete){var n=t.time_to_complete.split(/:/);a.setHours(parseInt(n[0])),a.setMinutes(parseInt(n[1])),a.setSeconds(0),a.setMilliseconds(0)}e.setInitialFormValues(Object(o.a)(Object(o.a)({},e.initialFormValues),{},{name:t.name,time_to_complete:a,descriptions:t.descriptions,parent_id:[t.parent_id],task_type:[Number(t.task_type)]})),e.showDrawer()}(e.taskItem)},style:{backgroundColor:"#108ee9",color:"white"}},{text:e.taskItem.isCompleted?"Not Done":"Done",onPress:function(){return function(){var t={isCompleted:!e.taskItem.isCompleted};e.updateTaskList(t,e.taskItem.id)}()},style:{backgroundColor:"green",color:"white"}}],children:Object(n.jsx)(Kt,{onClick:function(){t(bt.setSelectedTasks(e.taskItem.id))},wrap:!0,children:Object(n.jsxs)("div",{className:"w-100 row ",children:[Object(n.jsx)("div",{className:"col-10",children:e.taskItem.isCompleted?Object(n.jsx)("span",{className:"text-black-50 text-break",children:e.taskItem.name}):Object(n.jsx)("span",{className:"text-break",children:e.taskItem.name})}),Object(n.jsx)("div",{className:"col-2",children:e.taskItem.time_to_complete.split(/:/)[0]+":"+e.taskItem.time_to_complete.split(/:/)[1]})]},e.taskItem.id)},e.taskItem.id)})},Ut=(u.i.Item,{header:"Create New Task",taskId:!1}),qt=function(e){Object(s.useEffect)((function(){(e.taskList&&0===e.taskList.length&&!e.isTaskListLoaded||void 0===e.taskList)&&e.getTaskList(),m(!1),h(a)}),[e.taskList]);var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var a={selectOptions:void 0!==e.taskList&&e.taskList.length>0?e.taskList.map((function(e){return{name:e.name,value:e.id}})):null,taskTypes:[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:1},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0442\u043e\u043c",value:2}],task_type:1,time_to_complete:t},i=Object(s.useState)(!1),r=Object(c.a)(i,2),l=r[0],m=r[1],b=Object(s.useState)(a),j=Object(c.a)(b,2),p=j[0],h=j[1],f=Object(s.useState)(Ut),O=Object(c.a)(f,2),v=O[0],k=O[1],x=function(t){0!==e.selectedTasks.length?(k(Object(o.a)(Object(o.a)({},v),{},{taskId:!1})),h(Object(o.a)(Object(o.a)({},a),{},{parent_id:[Number(e.selectedTasks[e.selectedTasks.length-1])]}))):h(a),m(!l)},g=function(){m(!0)};return Object(n.jsxs)(u.r,{size:"lg",children:[Object(n.jsx)(u.q,{size:"lg"}),Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.c.Header,{title:Object(n.jsx)("h4",{className:"w-100 text-center",children:"Tasks Tree"}),extra:Object(n.jsxs)("div",{className:"d-flex flex-row",children:[e.selectedTasks.length>0&&!l?Object(n.jsx)(u.b,{inline:!0,size:"small",className:"mx-3 my-2",onClick:function(){e.backSelectedTasks()},type:"primary",children:"Back"}):null,Object(n.jsx)(u.b,{inline:!0,size:"small",className:"mx-3 my-2",onClick:x,type:"primary",children:l?"Close":"Add"})]})}),Object(n.jsx)(u.f,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(d.c,{initialValues:p,onSubmit:function(t){var a=Object(o.a)({},t);if(delete a.selectOptions,delete a.taskTypes,void 0!==a.time_to_complete){var n=ce()(a.time_to_complete);a.time_to_complete=n.format("HH:mm:ss")}Array.isArray(a.parent_id)&&(a.parent_id=a.parent_id[0]),a.user_id=e.userId,v.taskId?e.updateTaskList(a,v.taskId):e.createNewTaskList(a)},render:Ft,enableReinitialize:!0})}),open:l,onOpenChange:x,children:Object(n.jsx)(u.i,{children:void 0!==e.taskList?e.taskList.map((function(t){var a;if(0!==e.selectedTasks.length){if(a=e.selectedTasks[e.selectedTasks.length-1],t.parent_id===a)return Object(n.jsx)(Rt,{taskItem:t,deleteTaskList:e.deleteTaskList,showDrawer:g,setDrawerData:k,initialFormValues:p,setInitialFormValues:h,updateTaskList:e.updateTaskList})}else if(null===t.parent_id)return Object(n.jsx)(Rt,{taskItem:t,deleteTaskList:e.deleteTaskList,showDrawer:g,setDrawerData:k,initialFormValues:p,setInitialFormValues:h,updateTaskList:e.updateTaskList})})):null})})]})]})},Bt=Object(l.b)((function(e){var t;return{taskList:e.taskList.taskList,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id,isTaskListLoaded:e.taskList.isTaskListLoaded,selectedTasks:e.taskList.selectedTasks}}),{getTaskList:function(){return function(){var e=Object(B.a)(q.a.mark((function e(t,a){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt();case 2:void 0!==(n=e.sent)&&null!==n&&t(bt.setTaskList(n.data.Tasks));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},createNewTaskList:function(e){return function(){var t=Object(B.a)(q.a.mark((function t(a,n){var s;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(e);case 2:s=t.sent,a(bt.setTaskList(s.data.Tasks));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteTaskList:function(e){return function(){var t=Object(B.a)(q.a.mark((function t(a,n){var s;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut(e);case 2:s=t.sent,a(bt.setTaskList(s.data.Tasks));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updateTaskList:function(e,t){return function(){var a=Object(B.a)(q.a.mark((function a(n,s){var i;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,dt(e,t);case 2:i=a.sent,n(bt.setTaskList(i.data.Tasks));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},backSelectedTasks:bt.backSelectedTasks})(h.isMobile?qt:Vt),Gt=function(e){return Object(n.jsxs)(d.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(n.jsx)(d.a,{component:_,name:"name",type:"text",label:"Name",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:_,name:"email",type:"email",label:"Email",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:M,name:"password",type:"password",label:"Password",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:M,name:"c_password",type:"password",label:"Confirm",validate:b,submitCount:e.submitCount,hasFeedback:!0}),Object(n.jsx)(d.a,{component:A,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(n.jsx)("div",{className:"submit-container",children:Object(n.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Register"})})]})},Jt={},Xt=function(e){var t=Object($e.g)();Object(s.useEffect)((function(){e.isAuth&&t.replace(e.appLocation+"toDoList")}),[e.isAuth]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{className:"mb-5 mx-auto",children:"Register Form"}),Object(n.jsx)(d.c,{initialValues:Jt,onSubmit:function(t){t.status="guest",e.register(t)},render:Gt})]})},Wt=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,appLocation:e.app.location}}),{register:function(e){return function(){var t=Object(B.a)(q.a.mark((function t(a,n){var s;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e);case 2:s={email:e.email,password:e.password,remember:e.remember},a(ee(s));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(Xt),Zt=Object(tt.d)($e.i,Object(l.b)((function(e){return{initialized:e.app.initialized,appLocation:e.app.location,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(B.a)(q.a.mark((function e(t,a){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:null!==(n=e.sent)&&0===n.data.resultCode&&t($.setAuthUserData(n.data.user,n.data.remember_token));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){e(st())}))}},addLocation:function(e){return function(t){t(it(e))}},login:ee}))((function(e){var t=Object(s.useState)(Object($e.h)().pathname),a=Object(c.a)(t,2),i=a[0];a[1];return Object(s.useEffect)((function(){if(!e.initialized){var t=$t();t.email&&t.password&&(t.remember=!0,e.login(t)),"/front1/"===i&&e.addLocation(i),e.initializeApp()}}),[e.initialized]),e.initialized?Object(n.jsxs)(ft.a,{children:[Object(n.jsx)(yt,{}),Object(n.jsxs)($e.d,{children:[e.isAuth?Object(n.jsx)($e.b,{exact:!0,path:e.appLocation,render:function(){return Object(n.jsx)($e.a,{to:e.appLocation+"toDoList"})}}):Object(n.jsx)($e.b,{exact:!0,path:e.appLocation,render:function(){return Object(n.jsx)($e.a,{to:e.appLocation+"login"})}}),e.isAuth?Object(n.jsx)($e.b,{exact:!0,path:e.appLocation+"login",render:function(){return Object(n.jsx)($e.a,{to:e.appLocation+"toDoList"})}}):null,Object(n.jsx)($e.b,{path:e.appLocation+"login",render:function(){return Object(n.jsx)(_t,{})}}),Object(n.jsx)($e.b,{path:e.appLocation+"toDoList",render:function(){return Object(n.jsx)(Qe,{})}}),Object(n.jsx)($e.b,{path:e.appLocation+"tasksTree",render:function(){return Object(n.jsx)(Bt,{})}}),Object(n.jsx)($e.b,{path:e.appLocation+"orders",render:function(){return Object(n.jsx)(Yt,{})}}),Object(n.jsx)($e.b,{path:e.appLocation+"register",render:function(){return Object(n.jsx)(Wt,{})}}),Object(n.jsx)($e.b,{path:e.appLocation+"*",render:function(){return Object(n.jsx)("div",{children:"404 NOT FOUND"})}})]})]}):Object(n.jsx)(Ye.a,{size:"large"},"spin")})),Qt=function(){return Object(n.jsx)(et.a,{children:Object(n.jsx)(l.a,{store:ht,children:Object(n.jsx)("div",{className:h.isMobile?"":"container",children:Object(n.jsx)(Zt,{})})})})},$t=function(){var e={};return document.location.search.substr(1).split("&").forEach((function(t){var a=t.split("="),n=Object(c.a)(a,2),s=n[0],i=n[1];e[s]=i})),e},ea=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,554)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};r.a.render(Object(n.jsx)(Qt,{}),document.getElementById("root")),ea()}},[[534,1,2]]]);
//# sourceMappingURL=main.8e07750a.chunk.js.map