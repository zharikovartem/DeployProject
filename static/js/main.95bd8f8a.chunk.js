(this["webpackJsonpepam-app"]=this["webpackJsonpepam-app"]||[]).push([[0],{184:function(e,t,a){},185:function(e,t,a){},331:function(e,t,a){"use strict";a.r(t);var s=a(8),n=a(0),c=a(24),r=a.n(c),l=(a(184),a(185),a(77)),i=a(44),o=a(337),u=a(177),j=a(336),d=a(338),b=a(48),m=a.n(b),f=a(47),h=a(342),O=a(176),p=a(343),g=a(340),S=a(130),x=a(335),k=a(53),v={labelCol:{span:8},wrapperCol:{span:16}},D={wrapperCol:{offset:8,span:16}},Y=h.a.TextArea,T=function(e){var t=Object(n.useState)(e.selectedDate),a=Object(i.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(e.taskSaveStatus),o=Object(i.a)(l,2),u=o[0],d=o[1];Object(n.useEffect)((function(){switch(e.taskSaveStatus){case"inProgress":d(e.taskSaveStatus);break;case"success":O.b.success("The task was successfully created"),e.onClose(),d("");break;case"error":O.b.error("Error: "+e.errorMessage),d(e.taskSaveStatus)}}),[e.taskSaveStatus]);return Object(s.jsx)(p.a,{title:"Create New Task for "+c.format("DD MMM YYYY"),placement:"right",closable:!0,onClose:e.onClose,visible:e.visible,width:"80%",children:Object(s.jsxs)(g.a,Object(f.a)(Object(f.a)({},v),{},{name:"basic",initialValues:{remember:!0},onFinish:function(t){console.log("onFinish, reload: ",c!==e.selectedDate);var a={date:t.date.format("YYYY-MM-DD"),taskTime:t.taskTime.format("HH:mm"),taskName:t.taskName,user_id:1,description:t.description};c.format("YYYY-MM-DD")!==e.selectedDate.format("YYYY-MM-DD")?(console.log("\u041f\u0415\u0420\u0415\u0420\u0418\u0421\u041e\u0412\u041a\u0418 \u041d\u0415\u0422"),e.createNewTask(a,!1)):(e.createNewTask(a,!0),console.log("\u041f\u0415\u0420\u0415\u0420\u0418\u0421\u041e\u0412\u041a\u0410"))},children:[Object(s.jsx)(g.a.Item,{label:"Task name",name:"taskName",rules:[{required:!0,message:"Please input task name!"}],children:Object(s.jsx)(h.a,{})}),Object(s.jsx)(g.a.Item,{label:"Task date",name:"date",initialValue:e.selectedDate,rules:[{required:!0,message:"Please input task date!"}],children:Object(s.jsx)(S.a,{onChange:function(e,t){null!==e&&r(e)},format:"DD-MM-YYYY"})}),Object(s.jsx)(g.a.Item,{label:"Task time",name:"taskTime",rules:[{required:!0,message:"Please input task time!"}],children:Object(s.jsx)(x.a,{onChange:function(e,t){},format:"HH:mm"})}),Object(s.jsx)(g.a.Item,{label:"Description",name:"description",children:Object(s.jsx)(Y,{rows:2})}),Object(s.jsx)(g.a.Item,Object(f.a)(Object(f.a)({},D),{},{children:"inProgress"===u?Object(s.jsx)(j.a,{}):Object(s.jsx)(k.a,{type:"primary",htmlType:"submit",children:"Create"})}))]}))})},M=a(69),N=a.n(M),L=a(118),w=a(169),C=a.n(w).a.create({withCredentials:!0,baseURL:"https://81.90.181.175/api/"}),y=function(e){return C.get("tasks?date=".concat(e)).then((function(e){return e.data}))},A=function(e){return C.post("tasks",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},E=function(e){return C.post("tasks/part",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},_={taskList:null,taskSaveStatus:"no",errorMessage:null},P=function(e){return{type:"SN/TASK/SET_TASK_LIST",taskList:e}},I=function(e){return{type:"SN/TASK/SET_TASK_SAVE_STATUS",taskSaveStatus:e}},K=function(e){return{type:"SN/TASK/SET_ERROR_MESSAGE",message:e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;Object(f.a)({},e);switch(t.type){case"SN/TASK/SET_TASK_LIST":return Object(f.a)(Object(f.a)({},e),{},{taskList:t.taskList.Tasks});case"SN/TASK/SET_TASK_SAVE_STATUS":return Object(f.a)(Object(f.a)({},e),{},{taskSaveStatus:t.taskSaveStatus});case"SN/TASK/SET_ERROR_MESSAGE":return Object(f.a)(Object(f.a)({},e),{},{errorMessage:t.message});default:return e}},F=Object(l.b)((function(e){return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,errorMessage:e.task.errorMessage}}),{createNewTask:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(L.a)(N.a.mark((function a(s,n){var c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s(I("inProgress")),console.log("setTaskSaveStatus inProgress"),a.next=4,A(e);case 4:c=a.sent,console.log("taskList: ",c),200===c.status?(console.log("RESPONSE: ",c),t&&(s(P(c.data)),s(I("success")),s(I("no")))):(s(K(c.data.message)),s(I("error")),s(I("no")),s(K(null)));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})(T),R=a(344),V=a(345),z=a(346),G=S.a.RangePicker,H=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)("date"),o=Object(i.a)(l,2),u=o[0],j=o[1];return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-12 col-md-8 col-lg-6",children:[Object(s.jsx)("div",{className:"d-none d-sm-inline",children:Object(s.jsxs)("label",{children:["Select ",u,":"]})}),Object(s.jsx)("div",{className:"d-inline",children:c?Object(s.jsx)(G,{onChange:e.onGapDateChange,defaultValue:[e.selectedDate,e.selectedDate],format:"DD-MM-YYYY",style:{marginLeft:10}}):Object(s.jsx)(S.a,{onChange:e.onDateChange,defaultValue:e.selectedDate,format:"DD-MM-YYYY",style:{marginLeft:10}})})]}),Object(s.jsx)("div",{className:"col-12 col-md-4 col-lg-2 m-2 m-md-0",children:Object(s.jsx)(R.a,{className:"ml-3",onChange:function(t){r(t.target.checked),t.target.checked?j("interval"):(j("date"),console.log("1 date selected: ",e.selectedDate.format("YYYY-MM-DD")),e.getTaskList(e.selectedDate.format("YYYY-MM-DD")))},children:"Date interval"})}),Object(s.jsxs)("div",{className:"col-12 col-md-12 col-lg-4",children:[Object(s.jsx)(k.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(V.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:e.showDrawer,disabled:e.isAddActive}),Object(s.jsx)(k.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},onClick:e.showModal,icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(z.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]})]})},B=a(341),U=function(e){return console.log("SettingsModal props",e),Object(s.jsxs)(B.a,{title:"Basic Modal",visible:e.isModalVisible,onOk:e.handleOk,onCancel:e.handleCancel,children:[Object(s.jsx)("p",{children:"Some contents..."}),Object(s.jsx)("p",{children:"Some contents..."}),Object(s.jsx)("p",{children:"Some contents..."})]})},J=a(81),Q=a(49),W=a(339),X=function(e){var t=Object(n.useState)(e.element.type),a=Object(i.a)(t,2),c=a[0],r=a[1];return Object(s.jsx)(W.a.Item,{action:!0,className:"py-1",children:Object(s.jsxs)(J.a,{children:[Object(s.jsx)(Q.a,{className:"mx-2",children:Object(s.jsx)(R.a,{onChange:function(e){console.log(e.target.checked),e.target.checked?r("completed"):r("active")}})}),Object(s.jsx)(Q.a,{className:"mx-2",children:e.element.time.split(":",2).join(":")}),Object(s.jsx)(Q.a,{className:"mx-2",children:Object(s.jsx)(u.a,{placement:"topLeft",title:e.element.descriptions,children:Object(s.jsx)("span",{style:{textDecoration:"completed"===c?"line-through":""},children:e.element.name})},e.element.id)})]})})},Z=function e(t){var a=function(e){return"date"===e?function(e,t){return e.date>t.date?1:-1}:function(e,t){return e.time>t.time?-1:1}};t.sort(a("time")).sort(a("date"));var n=[],c=[],r=function(e){return m()(e.date).format("DD MMMM")},l=null;null!==t&&t.length>0&&(l=r(t[0]),n.push(Object(s.jsxs)("h3",{children:[l,":"]},l+"title")));for(var i=0;i<24;i++)if(n.push(Object(s.jsxs)(o.a,{orientation:"left",children:[i<=9?"0":null,i,":00"]},i+"to"+l)),null!==t)for(var j=0;j<t.length;j++){var d=t[j],b=Number(d.time.split(":",1));b>=i&&b<i+1&&(r(d)===l?n.push(Object(s.jsx)(u.a,{placement:"topLeft",title:d.descriptions,children:Object(s.jsx)(X,{element:d})},i+"-"+d.id)):c.push(d))}return c.length>0&&(n=n.concat(e(c))),n},$=function(e){var t=Object(n.useState)(m()()),a=Object(i.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),u=o[0],b=o[1],f=Object(n.useState)(!1),h=Object(i.a)(f,2),O=h[0],p=h[1],g=Object(n.useState)(null),S=Object(i.a)(g,2),x=S[0],k=S[1],v=Object(n.useState)(!1),D=Object(i.a)(v,2),Y=D[0],T=D[1];Object(n.useEffect)((function(){console.log("selectedDate changet to ",c.format("YYYY-MM-DD")),e.getTaskList(c.format("YYYY-MM-DD"))}),[c]),Object(n.useEffect)((function(){null!==e.taskList?(console.log("1) props in useEffect taskList:",e.taskList),k(Z(e.taskList))):k([Object(s.jsx)(j.a,{size:"large"},"spin")])}),[e.taskList]);return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"site-card-border-less-wrapper",children:[Object(s.jsxs)(d.a,{title:Object(s.jsx)(H,{onDateChange:function(e,t){console.log("2) onDateChange value:",e),null!==e?(k([Object(s.jsx)(j.a,{size:"large"},"spin")]),r(e),p(!1)):(r(m()(null)),p(!0))},getTaskList:e.getTaskList,selectedDate:c,setSelectedDate:r,showDrawer:function(){b(!0)},isAddActive:O,onGapDateChange:function(t,a){console.log("3) onGapDateChange value",t),k([Object(s.jsx)(j.a,{size:"large"},"spin")]),null!==t&&null!==t[0]&&null!==t[1]&&e.getTaskListForGap(t[0].format("YYYY-MM-DD"),t[1].format("YYYY-MM-DD"))},showModal:function(){T(!0)}}),bordered:!1,children:[Object(s.jsxs)(U,{isModalVisible:Y,handleOk:function(){T(!1)},handleCancel:function(){T(!1)},children:[Object(s.jsx)("p",{children:"Some contents..."}),Object(s.jsx)("p",{children:"Some contents..."}),Object(s.jsx)("p",{children:"Some contents..."})]}),x]}),Object(s.jsx)(F,{selectedDate:c,onClose:function(){b(!1)},visible:u,setVisible:b})]})})},ee=Object(l.b)((function(e){return{taskList:e.task.taskList}}),{getTaskList:function(e){return function(){var t=Object(L.a)(N.a.mark((function t(a,s){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:n=t.sent,a(P(n));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getTaskListForGap:function(e,t){return function(){var a=Object(L.a)(N.a.mark((function a(s,n){var c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E({start_date:e,end_date:t});case 2:c=a.sent,s(P(c.data));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})($),te=(a(329),a(330),a(80)),ae=a(172),se=Object(te.c)({task:q}),ne=Object(te.d)(se,Object(te.a)(ae.a)),ce=function(){return Object(s.jsx)(l.a,{store:ne,children:Object(s.jsx)("div",{className:"container-fluid",children:Object(s.jsx)(ee,{})})})},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,347)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(s.jsx)(ce,{}),document.getElementById("root")),re()}},[[331,1,2]]]);
//# sourceMappingURL=main.95bd8f8a.chunk.js.map