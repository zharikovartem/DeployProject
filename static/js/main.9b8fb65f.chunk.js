(this["webpackJsonpepam-app"]=this["webpackJsonpepam-app"]||[]).push([[0],{296:function(e,t,n){},297:function(e,t,n){},301:function(e,t,n){},517:function(e,t,n){},523:function(e,t,n){},524:function(e,t,n){"use strict";n.r(t);var a,s=n(8),r=n(0),c=n(16),o=n.n(c),i=(n(296),n(33)),l=(n(297),n(39)),u=n(531),b=n(29),d=n(51),m=n.n(d),j=n(536),p=n(533),h=n(288),f=n(537),O=n(219),g=n(527),v=n(528),x=n(87),k=(n(301),{labelCol:{span:8},wrapperCol:{span:16}}),S={wrapperCol:{offset:8,span:16}},T=j.a.TextArea,L=function(e){var t=p.a.useForm(),n=Object(i.a)(t,1)[0],a=Object(r.useState)(m()()),c=Object(i.a)(a,2),o=c[0],l=c[1],u=Object(r.useState)(e.taskSaveStatus),d=Object(i.a)(u,2),L=d[0],y=d[1];Object(r.useEffect)((function(){switch(e.taskSaveStatus){case"inProgress":y(e.taskSaveStatus);break;case"success":h.b.success("The task was successfully created"),e.onClose(),y(""),D();break;case"error":h.b.error("Error: "+e.errorMessage),y(e.taskSaveStatus)}}),[e.taskSaveStatus]);var D=function(){n.resetFields()};return Object(s.jsx)(f.a,{title:"Create New Task for "+o.format("DD MMM YYYY"),placement:"right",closable:!0,onClose:e.onClose,visible:e.visible,width:"90%",children:Object(s.jsxs)(p.a,Object(b.a)(Object(b.a)({},k),{},{form:n,name:"control-hooks",onFinish:function(t){var n={date:t.date.format("YYYY-MM-DD"),taskTime:t.taskTime.format("HH:mm"),taskName:t.taskName,user_id:e.userId,description:t.description};m()(o.format("YYYY-MM-DD")).isBetween(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"),void 0,"[]")?e.createNewTask(n,!0):e.createNewTask(n,!1)},children:[Object(s.jsx)(p.a.Item,{label:"Task name",name:"taskName",rules:[{required:!0,message:"Please input task name!"}],children:Object(s.jsx)(j.a,{})}),Object(s.jsx)(p.a.Item,{label:"Task date",name:"date",initialValue:o,rules:[{required:!0,message:"Please input task date!"}],children:Object(s.jsx)(O.a,{onChange:function(e,t){null!==e&&l(e)},format:"DD-MM-YYYY",autoComplete:"off"})}),Object(s.jsx)(p.a.Item,{label:"Task time",name:"taskTime",rules:[{required:!0,message:"Please input task time!"}],children:Object(s.jsx)(g.a,{format:"HH:mm"})}),Object(s.jsx)(p.a.Item,{label:"Description",name:"description",children:Object(s.jsx)(T,{rows:2})}),Object(s.jsx)(p.a.Item,Object(b.a)(Object(b.a)({},S),{},{children:"inProgress"===L?Object(s.jsx)(v.a,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(x.a,{type:"primary",htmlType:"submit",children:"Create"}),Object(s.jsx)(x.a,{className:"ml-3",type:"primary",onClick:D,children:"Reset"})]})}))]}))})},y=n(54),D=n.n(y),I=n(78),C=n(267),N=n.n(C).a.create({withCredentials:!0,baseURL:"https://crmapiserver.h1n.ru/api/"});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(a||(a={}));var w=function(e){return N.post("tasks",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},_=function(e){return N.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token"),N.post("tasks/part",e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?(console.log("request",e.request),e.response):(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},A=function(e){return N.delete("tasks/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},M={taskList:null,taskListIsFetching:!1,taskSaveStatus:"no",errorMessage:null,isInterval:!1,dateInterval:{startDate:m()(),endDate:m()()}},Y={setTaskList:function(e){return{type:"SN/TASK/SET_TASK_LIST",taskList:e}},setTaskSaveStatus:function(e){return{type:"SN/TASK/SET_TASK_SAVE_STATUS",taskSaveStatus:e}},setErrorMessage:function(e){return{type:"SN/TASK/SET_ERROR_MESSAGE",message:e}},setTaskListIsFetching:function(e){return{type:"SN/TASK/SET_TASK_LIST_IS_FETCHING",isFetchingValue:e}},setIsInterval:function(e,t){return{type:"SN/TASK/SET_IS_INTERVAL",isInterval:e,date:t}}},E=function(e,t){return function(){var n=Object(I.a)(D.a.mark((function n(a,s){var r,c;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Y.setTaskListIsFetching(!0)),r={start_date:e,end_date:t},n.next=4,_(r);case 4:void 0!==(c=n.sent)&&null!==c&&a(Y.setTaskList(c.data)),a(Y.setTaskListIsFetching(!1));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK/SET_TASK_LIST":return Object(b.a)(Object(b.a)({},e),{},{taskList:t.taskList.Tasks});case"SN/TASK/SET_TASK_SAVE_STATUS":return Object(b.a)(Object(b.a)({},e),{},{taskSaveStatus:t.taskSaveStatus});case"SN/TASK/SET_ERROR_MESSAGE":return Object(b.a)(Object(b.a)({},e),{},{errorMessage:t.message});case"SN/TASK/SET_TASK_LIST_IS_FETCHING":return Object(b.a)(Object(b.a)({},e),{},{taskListIsFetching:t.isFetchingValue});case"SN/TASK/SET_IS_INTERVAL":var n={startDate:t.date.startDate,endDate:t.date.endDate};return Object(b.a)(Object(b.a)({},e),{},{isInterval:t.isInterval,dateInterval:n});default:return e}},P=Object(l.b)((function(e){var t;return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,errorMessage:e.task.errorMessage,dateInterval:e.task.dateInterval,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id}}),{createNewTask:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var n=Object(I.a)(D.a.mark((function n(a,s){var r,c,o,i;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Y.setTaskSaveStatus("inProgress")),n.next=3,w(e);case 3:(r=n.sent)&&r.status&&200===r.status?(t&&(c=s(),o=c.task.dateInterval.startDate.format("YYYY-MM-DD"),i=c.task.dateInterval.endDate.format("YYYY-MM-DD"),a(E(o,i))),a(Y.setTaskSaveStatus("success")),a(Y.setTaskSaveStatus("no"))):r&&r.data&&(a(Y.setErrorMessage(r.data.message)),a(Y.setTaskSaveStatus("error")),a(Y.setTaskSaveStatus("no")),a(Y.setErrorMessage(null)));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})(L),z=n(539),H=n(540),V=n(541),R=O.a.RangePicker,q=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)({startDate:m()(),endDate:m()()}),l=Object(i.a)(o,2),u=l[0],b=l[1];Object(r.useEffect)((function(){e.dateInterval.startDate.isSame(u.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(u.endDate.format("YYYY-MM-DD"),"day")||e.setIsInterval(a,u)}),[a,u,e]);return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-12 col-md-8 col-lg-6",children:[Object(s.jsx)("div",{className:"d-none d-sm-inline",children:Object(s.jsxs)("label",{children:["Select ",a?"date interval":"date",":"]})}),Object(s.jsx)("div",{className:"d-inline",children:a?Object(s.jsx)(R,{onChange:function(e,t){null!==e&&null!==e[0]&&null!==e[1]&&b({startDate:e[0],endDate:e[1]})},defaultValue:[e.dateInterval.startDate,e.dateInterval.endDate],value:[e.dateInterval.startDate,e.dateInterval.endDate],format:"DD-MM-YYYY",style:{marginLeft:10}}):Object(s.jsx)(O.a,{onChange:function(e,t){null!==e&&b({startDate:e,endDate:e})},defaultValue:e.dateInterval.startDate,format:"DD-MM-YYYY",style:{marginLeft:10}})})]}),Object(s.jsx)("div",{className:"col-12 col-md-4 col-lg-2 m-2 m-md-0",children:Object(s.jsx)(z.a,{className:"ml-3",onChange:function(e){e.target.checked||b({startDate:u.startDate,endDate:u.startDate}),c(e.target.checked)},children:"Date interval"})}),Object(s.jsxs)("div",{className:"col-12 col-md-12 col-lg-4",children:[Object(s.jsx)(x.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(H.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:e.showDrawer}),Object(s.jsx)(x.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},onClick:e.showModal,icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(V.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]})]})},K=Object(l.b)((function(e){return{dateInterval:e.task.dateInterval}}),{setIsInterval:Y.setIsInterval})(q),U=n(535),G={ToDo:{singlDateView:{timeScale:!0,isCompletedVisible:!0},intervalDateView:{timeScale:!1,isCompletedVisible:!0}}},B=function(e){return console.log(G),Object(s.jsxs)(U.a,{title:"Task display settings",visible:e.isModalVisible,onOk:e.handleOk,onCancel:e.handleCancel,children:[Object(s.jsx)("p",{children:"Some contents..."}),Object(s.jsx)("p",{children:"Some contents..."}),Object(s.jsx)("p",{children:"Some contents..."})]})},Z=n(529),X=n(184),J=n(131),Q=n(80),W=n(532),$=n(542),ee=function(e){var t=Object(r.useState)(e.element.type),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),l=Object(i.a)(o,2),u=l[0],b=l[1];return Object(s.jsx)(W.a.Item,{action:!0,className:"py-1",children:Object(s.jsxs)(J.a,{className:"px-0 ml-0 ml-sm-5",children:[Object(s.jsx)(Q.a,{className:"mx-2",children:Object(s.jsx)(z.a,{onChange:function(e){e.target.checked?c("completed"):c("active")}})}),Object(s.jsx)(Q.a,{className:"mx-2",children:e.element.time.split(":",2).join(":")}),Object(s.jsx)(Q.a,{className:"mx-2",children:Object(s.jsx)(X.a,{placement:"topLeft",title:e.element.descriptions,children:Object(s.jsx)("span",{style:{textDecoration:"completed"===a?"line-through":""},className:"text-break",children:e.element.name})},e.element.id)}),Object(s.jsx)(Q.a,{className:"mr-auto ml-0 mr-sm-2 ml-sm-auto",children:u?Object(s.jsx)(v.a,{size:"small"},"spin"):Object(s.jsx)(x.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){var t;t=e.element.id,b(!0),e.deleteTask(t,e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)($.a,{className:"ml-1",style:{fontSize:"14px"}})})})})]})})},te=Object(l.b)((function(e){return{dateInterval:e.task.dateInterval}}),{deleteTask:function(e,t,n){return function(){var a=Object(I.a)(D.a.mark((function a(s,r){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(e);case 2:null!==a.sent&&(s(Y.setErrorMessage("Task deletion was successful")),s(E(t,n)),s(Y.setErrorMessage(null)));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getTaskList:E})(ee),ne=function(e){return"date"===e?function(e,t){return e.date>t.date?1:-1}:function(e,t){return e.time>t.time?-1:1}},ae=function(e){var t=Object(r.useState)({startDate:m()(null),endDate:m()()}),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){e.dateInterval.startDate.isSame(a.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(a.endDate.format("YYYY-MM-DD"),"day")||null!==e.dateInterval.startDate&&(e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD")),c(e.dateInterval))}),[e.dateInterval]),Object(r.useEffect)((function(){null!==e.errorMessage&&h.b.success(e.errorMessage)}),[e.errorMessage]),void 0!==e.taskList?null!==e.taskList?Object(s.jsx)(s.Fragment,{children:se(e.taskList)}):Object(s.jsx)(v.a,{size:"large"},"spin"):Object(s.jsx)("div",{children:"Authorization required to get a list of tasks"})},se=function e(t){var n=[],a=[];t.sort(ne("time")).sort(ne("date"));var r=function(e){return m()(e.date).format("DD MMMM")},c=null;null!==t&&t.length>0&&(c=r(t[0]),n.push(Object(s.jsxs)("h3",{children:[c,":"]},c+"title")));for(var o=0;o<24;o++){if(!(t.length>0)){n.push(Object(s.jsx)("h3",{children:"no tasks"},"noTasks"));break}if(n.push(Object(s.jsxs)(Z.a,{orientation:"left",children:[o<=9?"0":null,o,":00"]},o+"to"+c)),null!==t)for(var i=0;i<t.length;i++){var l=t[i],u=Number(l.time.split(":",1));u>=o&&u<o+1&&(r(l)===c?n.push(Object(s.jsx)(X.a,{placement:"topLeft",title:l.descriptions,children:Object(s.jsx)(te,{element:l})},o+"-"+l.id)):a.push(l))}}return a.length>0&&(n=n.concat(e(a))),n},re=Object(l.b)((function(e){return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,taskListIsFetching:e.task.taskListIsFetching,dateInterval:e.task.dateInterval,errorMessage:e.task.errorMessage}}),{getTaskList:E})(ae),ce=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),l=Object(i.a)(o,2),b=l[0],d=l[1];return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"site-card-border-less-wrapper",children:[Object(s.jsxs)(u.a,{title:Object(s.jsx)(K,{showDrawer:function(){c(!0)},showModal:function(){d(!0)}}),bordered:!1,children:[Object(s.jsx)(B,{isModalVisible:b,handleOk:function(){d(!1)},handleCancel:function(){d(!1)}}),Object(s.jsx)(re,{})]}),Object(s.jsx)(P,{onClose:function(){c(!1)},visible:a,setVisible:c})]})})},oe=Object(l.b)((function(e){return{taskList:e.task.taskList}}),{getTaskList:E})(ce),ie=n(47),le=n(74),ue=(n(440),n(441),n(442),n(105)),be=n(270),de=function(){return N.get("authMe/"+localStorage.getItem("remember_token")).then((function(e){return console.log("login: ",e),e}))},me=function(e){return N.post("login",e).then((function(e){return console.log("login: ",e),null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.remember_token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},je=function(e){return N.post("register",e).then((function(e){return console.log("login: ",e),null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},pe={user:null,remember_token:null,isAuth:!1},he={setAuthUserData:function(e,t){return{type:"SN/AUTH/SET_USER_DATA",user:e,remember_token:t}},logout:function(){return{type:"SN/AUTH/LOGOUT"}}},fe=function(e){return function(){var t=Object(I.a)(D.a.mark((function t(n,a){var s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me(e);case 2:(s=t.sent)&&(console.log(s),200===s.status&&n(he.setAuthUserData(s.data.user,s.data.remember_token)));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET_USER_DATA":return null!==t.user?(console.log("1"),Object(b.a)(Object(b.a)({},e),{},{user:t.user,remember_token:t.remember_token,isAuth:!0})):pe;case"SN/AUTH/LOGOUT":return localStorage.removeItem("remember_token"),pe;default:return e}},ge={initialized:!1,location:"/"},ve=function(){return{type:"SN/APP/INITIALIZED_SUCCESS"}},xe=function(e){return{type:"SN/APP/SET_LOCATION",location:e}},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/INITIALIZED_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{initialized:!0});case"SN/APP/SET_LOCATION":return Object(b.a)(Object(b.a)({},e),{},{location:t.location});default:return e}};N.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token");var Se=function(){return N.get("taskList").then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},Te=function(e){return N.post("taskList",e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Le={taskList:[],taskListIsFetching:!1,isTaskListLoaded:!1},ye=function(e){return{type:"SN/TASK_LIST/SET_TASK_LIST",taskList:e}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK_LIST/SET_TASK_LIST":return Object(b.a)(Object(b.a)({},e),{},{taskList:t.taskList,isTaskListLoaded:!0});default:return e}},Ie=Object(ue.c)({task:F,app:ke,auth:Oe,taskList:De}),Ce=Object(ue.e)(Ie,Object(ue.a)(be.a)),Ne=n(530),we=n(60),_e=n(538),Ae=_e.a.SubMenu,Me=function(e){var t,n,a=Object(ie.g)(),c=Object(r.useState)([]),o=Object(i.a)(c,2);o[0],o[1];return console.log(e),Object(s.jsxs)(_e.a,{onClick:function(e){},mode:"horizontal",theme:"dark",children:[e.menuData.map((function(e){return Object(s.jsx)(Ae,{title:e.label,children:(t=e.children,t.map((function(e){return Object(s.jsx)(_e.a.Item,{children:Object(s.jsx)(le.b,{to:e.value,children:e.label})},e.value)})))},e.value);var t})),e.isAuth?Object(s.jsx)(Ae,{title:null===(n=e.user)||void 0===n?void 0:n.name,children:Object(s.jsx)(_e.a.Item,{onClick:function(){a.replace(e.appLocation+"login"),e.logout()},children:"Logout"},"login")},null===(t=e.user)||void 0===t?void 0:t.name):Object(s.jsx)(_e.a.Item,{children:Object(s.jsx)(le.b,{to:e.appLocation+"login",children:"Login"})},"login")]})},Ye=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,user:e.auth.user,appLocation:e.app.location}}),{logout:he.logout})(Me),Ee=n(285),Fe=n(44),Pe=(n(517),n(543)),ze=function(e){var t,n=Object(ie.g)(),a=Object(ie.h)(),c=Object(r.useState)(!1),o=Object(i.a)(c,2),l=o[0],u=o[1],b=Object(Ee.a)(e.menuData),d=Object(r.useState)(b),m=Object(i.a)(d,2),j=m[0],p=(m[1],Object(r.useState)(function(){var e=[b[0].value,""];return b.forEach((function(t){t.children&&t.children.forEach((function(n){n.value===a.pathname&&(e=[t.value,n.value])}))})),e}())),h=Object(i.a)(p,2),f=h[0],O=h[1],g=function(e){if(console.log("input values: ",e),e){var t=e[0];b.forEach((function(a){a.value===e[0]&&(t=e[0],a.children&&e[1]&&a.children.forEach((function(t){t.value===e[1]&&n.replace("".concat(t.value))})))})),""===t&&(t=b[0].value),console.log("set values: ",[t,e[1]]),O([t,e[1]])}},v=Object(s.jsx)(Fe.h,{className:"foo-menu",data:j,value:f,onChange:g,height:.6*document.documentElement.clientHeight}),x=Object(s.jsx)("div",{style:{width:"100%",height:.6*document.documentElement.clientHeight,display:"flex",justifyContent:"center"},children:Object(s.jsx)(Fe.a,{size:"large"})});return Object(s.jsxs)("div",{className:l?"menu-active":"",children:[Object(s.jsx)("div",{children:Object(s.jsx)(Fe.i,{leftContent:"",mode:"light",icon:Object(s.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/iXVHARNNlmdCGnwWxQPH.svg",className:"am-icon am-icon-md",alt:""}),onLeftClick:function(e){e.preventDefault(),u(!l)},className:"top-nav-bar",children:e.isAuth?Object(s.jsxs)("div",{children:[null===(t=e.user)||void 0===t?void 0:t.name,Object(s.jsx)(Fe.b,{className:"ml-5",size:"small",icon:Object(s.jsx)(Pe.a,{}),onClick:function(){g(["",""]),n.replace(e.appLocation+"login"),e.logout()},inline:!0})]}):Object(s.jsx)(le.b,{to:e.appLocation+"login",onClick:function(){g(["",""])},children:Object(s.jsx)("span",{className:"text-white",children:"Login"})})})}),l?j?v:x:null,l?Object(s.jsx)("div",{className:"menu-mask",onClick:function(){u(!1)}}):null]})},He=Object(l.b)((function(e){return{appLocation:e.app.location,isAuth:e.auth.isAuth,user:e.auth.user}}),{})(ze),Ve=function(e){return console.log("Header"),we.isMobile?Object(s.jsx)(He,{menuData:Re(e.appLocation),logout:e.logout}):Object(s.jsx)(Ye,{menuData:Re(e.appLocation)})},Re=function(e){return[{value:"planning",label:"Planning",children:[{label:"ToDo list",value:e+"toDoList",disabled:!1},{label:"Tasks tree",value:e+"tasksTree"},{label:"Analysis",value:e+"analysis",disabled:!0}]},{value:"catalog",label:"Catalog",children:[{label:"Products",value:e+"products"},{label:"Providers",value:e+"providers"}]},{value:"orders",label:"Orders",children:[{label:"Orders",value:e+"orders"},{label:"Leads",value:e+"leads"}]}]},qe=Object(l.b)((function(e){return{appLocation:e.app.location,user:e.auth.user}}),{logout:he.logout})(Ve),Ke=n(35),Ue=n(289),Ge=n(534),Be=n(278),Ze=n.n(Be),Xe=p.a.Item,Je=Ge.a.Option,Qe=Fe.c.CheckboxItem,We=j.a.TextArea,$e=function(e){return function(t){var n=t.field,a=t.form,r=t.hasFeedback,c=t.label,o=t.selectOptions,i=t.submitCount,l=t.type,u=Object(Ue.a)(t,["field","form","hasFeedback","label","selectOptions","submitCount","type"]),d=a.touched[n.name],m=i>0,j=a.errors[n.name],p=j&&m,h=j&&d,f=function(e){e.target?a.setFieldValue(n.name,e.target.value):(console.log(n.name,": ",e),a.setFieldValue(n.name,e))},O=function(e){console.log(e),"checkbox"===e.target.type?a.setFieldValue(n.name,e.target.checked):a.setFieldValue(n.name,e)},g=function(){return a.setFieldTouched(n.name,!0)};return Object(s.jsx)("div",{children:Object(s.jsx)(Xe,{label:we.isMobile?null:c,hasFeedback:!!(r&&m||r&&d),help:!(!p&&!h)&&j,validateStatus:p||h?"error":"success",children:we.isMobile?Object(s.jsx)(Fe.g,{children:Object(s.jsx)(e,{onBlur:g,onChange:l?f:O,mode:"time"===l?"time":null,type:l,title:c,locale:Ze.a,autoHeight:!0,children:Object(s.jsx)(Fe.g.Item,{children:c})},c)}):Object(s.jsx)(e,Object(b.a)(Object(b.a)(Object(b.a)({},n),u),{},{allowClear:o?"true":"false",onBlur:g,onChange:l?f:O,children:o&&o.map((function(e){return Object(s.jsx)(Je,{title:e.name,value:e.value,children:e.name},e.name)}))}))})})}},et=we.isMobile?$e(Fe.j):$e(Ge.a),tt=($e(O.a),we.isMobile?$e(Fe.f):$e(j.a)),nt=we.isMobile?$e(Fe.f):$e(j.a.Password),at=we.isMobile?$e(Fe.d):$e(g.a),st=we.isMobile?$e(Qe):$e(z.a),rt=we.isMobile?$e(Fe.l):$e(We),ct=function(e){var t;return e||(t="Required!"),t},ot=function(e){var t;return e?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||(t="Invalid email address!"):t="Required!",t},it=function(e){return Object(s.jsxs)(Ke.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(Ke.a,{component:tt,name:"email",type:"email",label:"Email",validate:ot,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:nt,name:"password",type:"password",label:"Password",validate:ct,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:st,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Login"})})]})},lt=(Fe.c.CheckboxItem,{}),ut=function(e){return console.log(e),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"mb-5 mx-auto",children:"Login Form"}),Object(s.jsx)(Ke.c,{initialValues:lt,onSubmit:function(t){console.log("formProps: ",t),t.remember||(t.remember=!1),e.login(t)},render:it}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(le.b,{to:e.location+"register",children:Object(s.jsx)(x.a,{type:"link",block:!0,children:"Register"})})})]})},bt=Object(l.b)((function(e){return{auth:e.auth,location:e.app.location}}),{login:fe})(ut),dt=function(e){return Object(s.jsx)("div",{children:"Orders"})},mt=Object(l.b)((function(e){return{appLocation:e.app.location}}),{})(dt),jt=(Ge.a.Option,function(e){var t=e.values,n=t.selectOptions,a=t.taskTypes,c=Object(r.useState)(t.taskType),o=Object(i.a)(c,2),l=o[0],u=o[1];Object(r.useEffect)((function(){var t=e.values.task_type;u(t)}),[e.values]),console.log("NewTaskTreeForm props: ",e);return Object(s.jsxs)(Ke.b,{className:"form-container",onSubmit:function(t){e.handleSubmit(t)},children:[Object(s.jsx)(Ke.a,{component:tt,name:"name",type:"text",label:"Name",validate:ct,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:et,selectOptions:n,name:"parent_id",type:"select",label:"Parent",submitCount:e.submitCount}),Object(s.jsx)(Ke.a,{component:rt,name:"descriptions",type:"text",label:"Descriptions",submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:at,name:"time_to_complete",type:"time",label:"Time to complete",submitCount:e.submitCount}),Object(s.jsx)(Ke.a,{component:et,selectOptions:a,name:"task_type",type:"select",label:"task Types",submitCount:e.submitCount,hasFeedback:!0}),"context"===l?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ke.a,{component:tt,name:"context1",type:"text",label:"context1",validate:ct,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:tt,name:"context2",type:"text",label:"context2",validate:ct,submitCount:e.submitCount,hasFeedback:!0})]}):null,Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})}),pt=function(e){Object(r.useEffect)((function(){void 0===e.taskList||0!==e.taskList.length||e.isTaskListLoaded?void 0===e.taskList&&e.getTaskList():e.getTaskList()}),[e.taskList]);var t,n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],o=a[1],l={selectOptions:void 0!==e.taskList&&e.taskList.length>0?e.taskList.map((function(e){return{name:e.name,value:e.id}})):null,taskTypes:[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:"soft"},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0442\u043e\u043c",value:"context"}],task_type:"soft"};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"site-card-border-less-wrapper",children:Object(s.jsxs)(u.a,{title:Object(s.jsxs)("div",{className:"col-12 col-md-12 col-lg-4",children:[Object(s.jsx)(x.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(H.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:function(){o(!0)}}),Object(s.jsx)(x.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(V.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]}),bordered:!1,children:[(t=e.taskList,void 0!==e.taskList&&e.taskList.length>0?t.map((function(e){return Object(s.jsx)("div",{children:e.name},e.id)})):null),Object(s.jsx)(f.a,{title:"Create New Task",placement:"right",closable:!0,onClose:function(){o(!1)},visible:c,width:"90%",children:Object(s.jsx)(Ke.c,{initialValues:l,onSubmit:function(t){var n=Object(b.a)({},t);delete n.selectOptions,delete n.taskTypes,void 0!==n.time_to_complete&&(console.log(n.time_to_complete.format("HH:mm:ss")),n.time_to_complete=n.time_to_complete.format("HH:mm:ss")),console.log("NewTaskTreeForm Props: ",n),n.user_id=e.userId,e.createNewTaskList(n)},render:jt})})]})})})},ht=(n(523),Fe.g.Item),ft=function(e){Object(r.useEffect)((function(){0!==e.taskList.length||e.isTaskListLoaded||e.getTaskList()}),[e.taskList]);var t={selectOptions:void 0!==e.taskList&&e.taskList.length>0?e.taskList.map((function(e){return{name:e.name,value:e.id}})):null,taskTypes:[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:"soft"},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0442\u043e\u043c",value:"context"}],task_type:"soft"},n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],o=a[1],l=(Fe.g,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(e,t){return 0===t?Object(s.jsx)(Fe.g.Item,{thumb:"https://zos.alipayobjects.com/rmsportal/eOZidTabPoEbPeU.png",multipleLine:!0,children:"Category"},t):Object(s.jsxs)(Fe.g.Item,{thumb:"https://zos.alipayobjects.com/rmsportal/eOZidTabPoEbPeU.png",children:["Category",t]},t)})),function(e){console.log(e),o(!c)});return console.log("TTM props: ",e),Object(s.jsxs)("div",{children:[Object(s.jsx)(Fe.b,{inline:!0,className:"m-3",onClick:l,type:"primary",children:"Add"}),Object(s.jsx)(Fe.e,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},enableDragHandle:!0,contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(s.jsx)("div",{className:"mt-4",children:Object(s.jsx)(Ke.c,{initialValues:t,onSubmit:function(e){var t=Object(b.a)({},e);delete t.selectOptions,delete t.taskTypes,void 0!==t.time_to_complete&&(console.log(t.time_to_complete.format("HH:mm:ss")),t.time_to_complete=t.time_to_complete.format("HH:mm:ss")),console.log("NewTaskTreeForm Props: ",t)},render:jt})}),open:c,onOpenChange:l,children:Object(s.jsx)(Fe.g,{children:Ot(e.taskList)})})]})},Ot=function(e){return e.length>0?e.map((function(e){return console.log("!!!!!!!"),Object(s.jsx)(Fe.k,{style:{backgroundColor:"gray"},autoClose:!0,right:[{text:"Cancel",onPress:function(){return console.log("cancel")},style:{backgroundColor:"#ddd",color:"white"}},{text:"Delete",onPress:function(){return console.log("delete")},style:{backgroundColor:"#F4333C",color:"white"}}],left:[{text:"Reply",onPress:function(){return console.log("reply")},style:{backgroundColor:"#108ee9",color:"white"}},{text:"Cancel",onPress:function(){return console.log("cancel")},style:{backgroundColor:"#ddd",color:"white"}}],onOpen:function(){return console.log("global open")},onClose:function(){return console.log("global close")},children:Object(s.jsx)(ht,{onClick:function(){return console.log("List.Item clicked!")},arrow:"horizontal",children:e.name},e.id)})})):Object(s.jsx)(v.a,{size:"large"},"spin")},gt=Object(l.b)((function(e){var t;return{taskList:e.taskList.taskList,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id,isTaskListLoaded:e.taskList.isTaskListLoaded}}),{getTaskList:function(){return function(){var e=Object(I.a)(D.a.mark((function e(t,n){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:void 0!==(a=e.sent)&&null!==a&&t(ye(a.data.Tasks));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createNewTaskList:function(e){return function(){var t=Object(I.a)(D.a.mark((function t(n,a){var s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te(e);case 2:s=t.sent,console.log(s),n(ye(s.data.Tasks));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(we.isMobile?ft:pt),vt=function(e){return Object(s.jsxs)(Ke.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(Ke.a,{component:tt,name:"name",type:"text",label:"Name",validate:ct,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:tt,name:"email",type:"email",label:"Email",validate:ot,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:nt,name:"password",type:"password",label:"Password",validate:ct,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:nt,name:"c_password",type:"password",label:"Confirm",validate:ct,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(Ke.a,{component:st,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Register"})})]})},xt={},kt=function(e){var t=Object(ie.g)();Object(r.useEffect)((function(){console.log("useEffect in Register: ",e.isAuth),e.isAuth&&t.replace(e.appLocation+"toDoList")}),[e.isAuth]);return console.log("Register",e),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"mb-5 mx-auto",children:"Register Form"}),Object(s.jsx)(Ke.c,{initialValues:xt,onSubmit:function(t){console.log(t),t.status="guest",e.register(t)},render:vt})]})},St=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,appLocation:e.app.location}}),{register:function(e){return function(){var t=Object(I.a)(D.a.mark((function t(n,a){var s,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je(e);case 2:s=t.sent,console.log(s),r={email:e.email,password:e.password,remember:e.remember},n(fe(r));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(kt),Tt=Object(ue.d)(ie.i,Object(l.b)((function(e){return{initialized:e.app.initialized,appLocation:e.app.location,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(I.a)(D.a.mark((function e(t,n){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:null!==(a=e.sent)&&0===a.data.resultCode&&t(he.setAuthUserData(a.data.user,a.data.remember_token));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){e(ve())}))}},addLocation:function(e){return function(t){t(xe(e))}},login:fe}))((function(e){var t=Object(r.useState)(Object(ie.h)().pathname),n=Object(i.a)(t,2),a=n[0];n[1];return Object(r.useEffect)((function(){if(!e.initialized){var t=yt();t.email&&t.password&&(t.remember=!0,e.login(t)),"/front1/"===a&&e.addLocation(a),e.initializeApp()}}),[e.initialized]),e.initialized?Object(s.jsxs)(Ne.a,{children:[Object(s.jsx)(qe,{}),Object(s.jsxs)(ie.d,{children:[e.isAuth?Object(s.jsx)(ie.b,{exact:!0,path:e.appLocation,render:function(){return Object(s.jsx)(ie.a,{to:e.appLocation+"toDoList"})}}):Object(s.jsx)(ie.b,{exact:!0,path:e.appLocation,render:function(){return Object(s.jsx)(ie.a,{to:e.appLocation+"login"})}}),e.isAuth?Object(s.jsx)(ie.b,{exact:!0,path:e.appLocation+"login",render:function(){return Object(s.jsx)(ie.a,{to:e.appLocation+"toDoList"})}}):null,Object(s.jsx)(ie.b,{path:e.appLocation+"login",render:function(){return Object(s.jsx)(bt,{})}}),Object(s.jsx)(ie.b,{path:e.appLocation+"toDoList",render:function(){return Object(s.jsx)(oe,{})}}),Object(s.jsx)(ie.b,{path:e.appLocation+"tasksTree",render:function(){return Object(s.jsx)(gt,{})}}),Object(s.jsx)(ie.b,{path:e.appLocation+"orders",render:function(){return Object(s.jsx)(mt,{})}}),Object(s.jsx)(ie.b,{path:e.appLocation+"register",render:function(){return Object(s.jsx)(St,{})}}),Object(s.jsx)(ie.b,{path:e.appLocation+"*",render:function(){return Object(s.jsx)("div",{children:"404 NOT FOUND"})}})]})]}):Object(s.jsx)(v.a,{size:"large"},"spin")})),Lt=function(){return Object(s.jsx)(le.a,{children:Object(s.jsx)(l.a,{store:Ce,children:Object(s.jsx)("div",{className:we.isMobile?"":"container",children:Object(s.jsx)(Tt,{})})})})},yt=function(){var e={};return document.location.search.substr(1).split("&").forEach((function(t){var n=t.split("="),a=Object(i.a)(n,2),s=a[0],r=a[1];e[s]=r})),e},Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,544)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};o.a.render(Object(s.jsx)(Lt,{}),document.getElementById("root")),Dt()}},[[524,1,2]]]);
//# sourceMappingURL=main.9b8fb65f.chunk.js.map