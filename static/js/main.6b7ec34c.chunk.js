(this["webpackJsonpepam-app"]=this["webpackJsonpepam-app"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n(0),c=n.n(s),o=n(25),i=n.n(o),l=(n(150),n(151),n(65)),r=n(52),j=n(273),d=n(141),u=n(275),b=n(277),h=n(40),f=n.n(h),m=n(57),p=n(276),O=n(274),g=n(106),x=n(272),k=n(92),D={labelCol:{span:8},wrapperCol:{span:16}},v={wrapperCol:{offset:8,span:16}},T=p.a.TextArea,Y=function(e){return console.log(e),Object(a.jsxs)(O.a,Object(m.a)(Object(m.a)({},D),{},{name:"basic",initialValues:{remember:!0},onFinish:function(t){console.log("Success:",t),t.user_id="1",t.taskTime=t.taskTime.format("HH:mm"),t.date=t.date.format("YYYY-MM-DD"),e.newTask(t)},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(a.jsx)(O.a.Item,{label:"Task name",name:"taskName",rules:[{required:!0,message:"Please input task name!"}],children:Object(a.jsx)(p.a,{})}),Object(a.jsx)(O.a.Item,{label:"Task date",name:"date",children:Object(a.jsx)(g.a,{})}),Object(a.jsx)(O.a.Item,{label:"Task time",name:"taskTime",rules:[{required:!0,message:"Please input time!"}],children:Object(a.jsx)(x.a,{onChange:function(e,t){console.log(e,t)},format:"HH:mm"})}),Object(a.jsx)(O.a.Item,{label:"Description",name:"description",children:Object(a.jsx)(T,{rows:2})}),Object(a.jsx)(O.a.Item,Object(m.a)(Object(m.a)({},v),{},{children:Object(a.jsx)(k.a,{type:"primary",htmlType:"submit",children:"Create"})}))]}))},C="SET_TASK_LIST",y={taskList:null},L=function(e){return{type:C,taskList:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=Object(m.a)({},e);switch(t.type){case C:return n.taskList=t.taskList.Tasks,n;default:return e}},M=Object(l.b)((function(e){return{taskList:e.task.taskList}}),{newTask:function(e){return function(t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};console.log("requestOptions: ",n),fetch("https://81.90.181.175/api/tasks",n).then((function(e){return console.log("response: ",e),e.json()})).then((function(e){console.log("response: ",e),t(L(e))})).catch((function(e){return console.log("Can\u2019t access  Error:.",e)}))}}})(Y),N=n(278),w=n(279),F=n(280),E=g.a.RangePicker,I=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(s.useState)("date"),l=Object(r.a)(i,2),j=l[0],d=l[1];return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-12 col-md-8 col-lg-6",children:[Object(a.jsx)("div",{className:"d-none d-sm-inline",children:Object(a.jsxs)("label",{children:["Select ",j,":"]})}),Object(a.jsx)("div",{className:"d-inline",children:c?Object(a.jsx)(E,{onChange:e.onGapDateChange,defaultValue:[e.selectedDate,e.selectedDate],format:"DD-MM-YYYY",style:{marginLeft:10}}):Object(a.jsx)(g.a,{onChange:e.onDateChange,defaultValue:e.selectedDate,format:"DD-MM-YYYY",style:{marginLeft:10}})})]}),Object(a.jsx)("div",{className:"col-12 col-md-4 col-lg-2 m-2 m-md-0",children:Object(a.jsx)(N.a,{className:"ml-3",onChange:function(e){o(e.target.checked),e.target.checked?d("interval"):d("date")},children:"Date interval"})}),Object(a.jsxs)("div",{className:"col-12 col-md-12 col-lg-4",children:[Object(a.jsx)(k.a,{type:"primary",shape:"round",icon:Object(a.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(a.jsx)(w.a,{style:{fontSize:"18px"}}),Object(a.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:e.showDrawer,disabled:e.isAddActive}),Object(a.jsx)(k.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},icon:Object(a.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(a.jsx)(F.a,{style:{fontSize:"18px"}}),Object(a.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]})]})},A=function(e){var t=Object(s.useState)(f()()),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(s.useState)(!1),l=Object(r.a)(i,2),h=l[0],m=l[1],p=Object(s.useState)(!1),O=Object(r.a)(p,2),g=O[0],x=O[1],k=Object(s.useState)(null),D=Object(r.a)(k,2),v=D[0],T=D[1];Object(s.useEffect)((function(){e.getTaskList(c.format("YYYY-MM-DD"))}),[c]),Object(s.useEffect)((function(){console.log("props in useEffect",e.taskList);T(function e(t){var n=[],s=[],c=function(e){return f()(e.date).format("DD-MMMM")},o=null;null!==t&&t.length>0&&(o=c(t[0]),n.push(Object(a.jsxs)("h3",{children:[o,":"]}))),console.log("headlineDate: ",o);for(var i=0;i<24;i++)if(n.push(Object(a.jsxs)(j.a,{orientation:"left",children:[i<=9?"0":null,i,":00"]},i+"to"+o)),null!==t)for(var l=0;l<t.length;l++){var r=t[l],u=Number(r.time.split(":",1));u>=i&&u<i+1&&(c(r)===o?n.push(Object(a.jsx)(d.a,{placement:"topLeft",title:r.descriptions,children:Object(a.jsxs)("p",{className:"ml-5",children:[r.time.split(":",2).join(":")," - ",r.name," date: ",r.date]})},i+"-"+l)):s.push(r))}if(console.log("tomorowTasks count: ",s.length),s.length>0){var b=e(s);n=n.concat(b)}return n}(e.taskList))}),[e.taskList]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"site-card-border-less-wrapper",children:[Object(a.jsx)(u.a,{title:Object(a.jsx)(I,{onDateChange:function(e,t){console.log("onDateChange value:",e),null!==e?(o(e),x(!1)):(o(f()(null)),x(!0))},selectedDate:c,showDrawer:function(){m(!0)},isAddActive:g,onGapDateChange:function(t){console.log("onGapDateChange value",t),o(t[0]),e.getTaskListForGap(t[0].format("YYYY-MM-DD"),t[1].format("YYYY-MM-DD"))}}),bordered:!1,children:v}),Object(a.jsx)(b.a,{title:"Create New Task for "+c.format("DD MMM YYYY"),placement:"right",closable:!1,onClose:function(){m(!1)},visible:h,width:"80%",children:Object(a.jsx)(M,{selectedDate:c})})]})})},G=Object(l.b)((function(e){return{taskList:e.task.taskList}}),{getTaskList:function(e){return function(t){fetch("https://81.90.181.175/api/tasks?date="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("response getTaskList: ",e),t(L(e))})).catch((function(e){return console.log("Can\u2019t access  Error:.",e)}))}},getTaskListForGap:function(e,t){return function(n){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:e,end_date:t})};fetch("https://81.90.181.175/api/tasks/part",a).then((function(e){return e.json()})).then((function(e){console.log("response getTaskListForGap: ",e),n(L(e))})).catch((function(e){return console.log("Can\u2019t access  Error:.",e)}))}}})(A),P=(n(267),n(268),n(67)),_=n(137),z=Object(P.c)({task:S}),H=Object(P.d)(z,Object(P.a)(_.a)),J=function(e){return Object(a.jsx)(l.a,{store:H,children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(G,{})})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,281)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),q()}},[[269,1,2]]]);
//# sourceMappingURL=main.6b7ec34c.chunk.js.map