(this["webpackJsonpepam-app"]=this["webpackJsonpepam-app"]||[]).push([[0],{304:function(e,t,a){},305:function(e,t,a){},309:function(e,t,a){},526:function(e,t,a){},535:function(e,t,a){},536:function(e,t,a){"use strict";a.r(t);var n,s=a(2),r=a(0),c=a(16),i=a.n(c),l=(a(304),a(30)),o=(a(305),a(35)),u=a(542),d=a(25),b=a(47),m=a.n(b),j=a(547),p=a(544),h=a(297),f=a(549),O=a(228),k=a(539),x=a(274),v=a(88),g=(a(309),{labelCol:{span:8},wrapperCol:{span:16}}),S={wrapperCol:{offset:8,span:16}},T=j.a.TextArea,L=function(e){var t=p.a.useForm(),a=Object(l.a)(t,1)[0],n=Object(r.useState)(m()()),c=Object(l.a)(n,2),i=c[0],o=c[1],u=Object(r.useState)(e.taskSaveStatus),b=Object(l.a)(u,2),L=b[0],y=b[1];Object(r.useEffect)((function(){switch(e.taskSaveStatus){case"inProgress":y(e.taskSaveStatus);break;case"success":h.b.success("The task was successfully created"),e.onClose(),y(""),I();break;case"error":h.b.error("Error: "+e.errorMessage),y(e.taskSaveStatus)}}),[e.taskSaveStatus]);var I=function(){a.resetFields()};return Object(s.jsx)(f.a,{title:"Create New Task for "+i.format("DD MMM YYYY"),placement:"right",closable:!0,onClose:e.onClose,visible:e.visible,width:"90%",children:Object(s.jsxs)(p.a,Object(d.a)(Object(d.a)({},g),{},{form:a,name:"control-hooks",onFinish:function(t){var a={date:t.date.format("YYYY-MM-DD"),taskTime:t.taskTime.format("HH:mm"),taskName:t.taskName,user_id:e.userId,description:t.description};m()(i.format("YYYY-MM-DD")).isBetween(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"),void 0,"[]")?e.createNewTask(a,!0):e.createNewTask(a,!1)},children:[Object(s.jsx)(p.a.Item,{label:"Task name",name:"taskName",rules:[{required:!0,message:"Please input task name!"}],children:Object(s.jsx)(j.a,{})}),Object(s.jsx)(p.a.Item,{label:"Task date",name:"date",initialValue:i,rules:[{required:!0,message:"Please input task date!"}],children:Object(s.jsx)(O.a,{onChange:function(e,t){null!==e&&o(e)},format:"DD-MM-YYYY",autoComplete:"off"})}),Object(s.jsx)(p.a.Item,{label:"Task time",name:"taskTime",rules:[{required:!0,message:"Please input task time!"}],children:Object(s.jsx)(k.a,{format:"HH:mm"})}),Object(s.jsx)(p.a.Item,{label:"Description",name:"description",children:Object(s.jsx)(T,{rows:2})}),Object(s.jsx)(p.a.Item,Object(d.a)(Object(d.a)({},S),{},{children:"inProgress"===L?Object(s.jsx)(x.a,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v.a,{type:"primary",htmlType:"submit",children:"Create"}),Object(s.jsx)(v.a,{className:"ml-3",type:"primary",onClick:I,children:"Reset"})]})}))]}))})},y=a(48),I=a.n(y),C=a(64),D=a(276),N=a.n(D).a.create({withCredentials:!0,baseURL:"https://crmapiserver.h1n.ru/api/"});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(n||(n={}));var _=function(e){return N.post("tasks",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},w=function(e){return N.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token"),N.post("tasks/part",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},A=function(e){return N.delete("tasks/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},M=function(e,t){return N.put("tasks/".concat(t),e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request,null)}))},E={taskList:null,taskListIsFetching:!1,taskSaveStatus:"no",errorMessage:null,isInterval:!1,dateInterval:{startDate:m()(),endDate:m()()}},Y={setTaskList:function(e){return{type:"SN/TASK/SET_TASK_LIST",taskList:e}},setTaskSaveStatus:function(e){return{type:"SN/TASK/SET_TASK_SAVE_STATUS",taskSaveStatus:e}},setErrorMessage:function(e){return{type:"SN/TASK/SET_ERROR_MESSAGE",message:e}},setTaskListIsFetching:function(e){return{type:"SN/TASK/SET_TASK_LIST_IS_FETCHING",isFetchingValue:e}},setIsInterval:function(e,t){return{type:"SN/TASK/SET_IS_INTERVAL",isInterval:e,date:t}}},F=function(e,t){return function(){var a=Object(C.a)(I.a.mark((function a(n,s){var r,c;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Y.setTaskListIsFetching(!0)),r={start_date:e,end_date:t},a.next=4,w(r);case 4:void 0!==(c=a.sent)&&null!==c&&n(Y.setTaskList(c.data)),n(Y.setTaskListIsFetching(!1));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK/SET_TASK_LIST":return Object(d.a)(Object(d.a)({},e),{},{taskList:t.taskList.Tasks});case"SN/TASK/SET_TASK_SAVE_STATUS":return Object(d.a)(Object(d.a)({},e),{},{taskSaveStatus:t.taskSaveStatus});case"SN/TASK/SET_ERROR_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},{errorMessage:t.message});case"SN/TASK/SET_TASK_LIST_IS_FETCHING":return Object(d.a)(Object(d.a)({},e),{},{taskListIsFetching:t.isFetchingValue});case"SN/TASK/SET_IS_INTERVAL":var a={startDate:t.date.startDate,endDate:t.date.endDate};return Object(d.a)(Object(d.a)({},e),{},{isInterval:t.isInterval,dateInterval:a});default:return e}},V=Object(o.b)((function(e){var t;return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,errorMessage:e.task.errorMessage,dateInterval:e.task.dateInterval,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id}}),{createNewTask:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(C.a)(I.a.mark((function a(n,s){var r,c,i,l;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Y.setTaskSaveStatus("inProgress")),a.next=3,_(e);case 3:(r=a.sent)&&r.status&&200===r.status?(t&&(c=s(),i=c.task.dateInterval.startDate.format("YYYY-MM-DD"),l=c.task.dateInterval.endDate.format("YYYY-MM-DD"),n(F(i,l))),n(Y.setTaskSaveStatus("success")),n(Y.setTaskSaveStatus("no"))):r&&r.data&&(n(Y.setErrorMessage(r.data.message)),n(Y.setTaskSaveStatus("error")),n(Y.setTaskSaveStatus("no")),n(Y.setErrorMessage(null)));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})(L),P=a(550),K=a(552),H=a(553),R=O.a.RangePicker,q=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)({startDate:m()(),endDate:m()()}),o=Object(l.a)(i,2),u=o[0],d=o[1];Object(r.useEffect)((function(){e.dateInterval.startDate.isSame(u.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(u.endDate.format("YYYY-MM-DD"),"day")||e.setIsInterval(n,u)}),[n,u,e]);return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-12 col-md-8 col-lg-6",children:[Object(s.jsx)("div",{className:"d-none d-sm-inline",children:Object(s.jsxs)("label",{children:["Select ",n?"date interval":"date",":"]})}),Object(s.jsx)("div",{className:"d-inline",children:n?Object(s.jsx)(R,{onChange:function(e,t){null!==e&&null!==e[0]&&null!==e[1]&&d({startDate:e[0],endDate:e[1]})},defaultValue:[e.dateInterval.startDate,e.dateInterval.endDate],value:[e.dateInterval.startDate,e.dateInterval.endDate],format:"DD-MM-YYYY",style:{marginLeft:10}}):Object(s.jsx)(O.a,{onChange:function(e,t){null!==e&&d({startDate:e,endDate:e})},defaultValue:e.dateInterval.startDate,format:"DD-MM-YYYY",style:{marginLeft:10}})})]}),Object(s.jsx)("div",{className:"col-12 col-md-4 col-lg-2 m-2 m-md-0",children:Object(s.jsx)(P.a,{className:"ml-3",onChange:function(e){e.target.checked||d({startDate:u.startDate,endDate:u.startDate}),c(e.target.checked)},children:"Date interval"})}),Object(s.jsxs)("div",{className:"col-12 col-md-12 col-lg-4",children:[Object(s.jsx)(v.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(K.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:e.showDrawer}),Object(s.jsx)(v.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},onClick:e.showModal,icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(H.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]})]})},U=a(58),B=a(31),G=a(151),J=a.n(G),X=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)(B.e,{locale:J.a,mode:"date",value:new Date,onChange:function(e){console.log(e)},children:Object(s.jsx)(B.i.Item,{className:"w-100",children:n?Object(s.jsx)(B.e,{locale:J.a,mode:"date",value:new Date,onChange:function(e){console.log(e)},children:Object(s.jsx)(B.i.Item,{})}):Object(s.jsx)(B.i.Item,{})})}),Object(s.jsx)(B.i.Item,{extra:Object(s.jsx)(B.o,{checked:n,onChange:function(e){c(!n)}}),children:"Date interval"}),Object(s.jsx)(B.b,{size:"small",className:"ml-3",type:"primary",children:"Add"})]})},Z=Object(o.b)((function(e){return{dateInterval:e.task.dateInterval}}),{setIsInterval:Y.setIsInterval})(U.isMobile?X:q),Q=a(546),W={ToDo:{singlDateView:{timeScale:!0,isCompletedVisible:!0},intervalDateView:{timeScale:!1,isCompletedVisible:!0}}},$=function(e){var t=Object(r.useState)(null!==e.viewSettings?e.viewSettings:W),a=Object(l.a)(t,2),n=a[0],c=(a[1],[]);for(var i in n.ToDo)if(Object.prototype.hasOwnProperty.call(n.ToDo,i)){var o=n.ToDo[i];console.log(i,o),c.push(Object(s.jsx)(ee,{title:i,data:o}))}return Object(s.jsx)(Q.a,{title:"Task display settings",visible:e.isModalVisible,onOk:e.handleOk,onCancel:e.handleCancel,children:c})},ee=function(e){var t=[];for(var a in e.data)if(Object.prototype.hasOwnProperty.call(e.data,a)){var n=e.data[a];t.push(Object(s.jsxs)("div",{children:[a," = ",n?"yes":"no"]}))}return Object(s.jsx)(u.a,{title:e.title,extra:Object(s.jsx)("a",{href:"#",children:"More"}),children:t})},te=Object(o.b)((function(e){return console.log(e),{viewSettings:e.auth.viewSettings}}),{})($),ae=a(540),ne=a(193),se=a(134),re=a(82),ce=a(543),ie=a(554),le=a(555),oe=function(e){var t=Object(r.useState)(1===e.element.isCompleted),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(s.jsx)(ce.a.Item,{action:!0,className:"",children:Object(s.jsxs)(se.a,{className:"px-0 ml-0 ml-sm-5",children:[Object(s.jsx)(re.a,{className:"mx-2",children:Object(s.jsx)(P.a,{onChange:function(t){c(!n);var a={isCompleted:t.target.checked};e.updateTask(a,e.element.id)},checked:n})}),Object(s.jsx)(re.a,{className:"mx-2",children:e.element.time.split(":",2).join(":")}),Object(s.jsx)(re.a,{className:"mx-2",children:Object(s.jsx)(ne.a,{placement:"topLeft",title:e.element.descriptions,children:Object(s.jsx)("span",{style:{textDecoration:n?"line-through":""},children:e.element.name})},e.element.id)}),Object(s.jsxs)(re.a,{className:"mr-auto ml-0 mr-sm-2 ml-sm-auto",children:[Object(s.jsx)(v.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){console.log(e.element)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(ie.a,{className:"ml-1",style:{fontSize:"14px"}})})}),u?Object(s.jsx)(x.a,{size:"small"},"spin"):Object(s.jsx)(v.a,{danger:!0,type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){var t;t=e.element.id,d(!0),e.deleteTask(t,e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(le.a,{className:"ml-1",style:{fontSize:"14px"}})})})]})]})})},ue=Object(o.b)((function(e){return{dateInterval:e.task.dateInterval}}),{deleteTask:function(e,t,a){return function(){var n=Object(C.a)(I.a.mark((function n(s,r){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A(e);case 2:null!==n.sent&&(s(Y.setErrorMessage("Task deletion was successful")),s(F(t,a)),s(Y.setErrorMessage(null)));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},getTaskList:F,updateTask:function(e,t){return function(){var a=Object(C.a)(I.a.mark((function a(n,s){var r;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M(e,t);case 2:r=a.sent,console.log(r);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})(oe),de=function(e){return"date"===e?function(e,t){return e.date>t.date?1:-1}:function(e,t){return e.time>t.time?-1:1}},be=function(e){var t=Object(r.useState)({startDate:m()(null),endDate:m()()}),a=Object(l.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){e.dateInterval.startDate.isSame(n.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(n.endDate.format("YYYY-MM-DD"),"day")||null!==e.dateInterval.startDate&&(e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD")),c(e.dateInterval))}),[e.dateInterval]),Object(r.useEffect)((function(){null!==e.errorMessage&&h.b.success(e.errorMessage)}),[e.errorMessage]),console.log(e.dateInterval),void 0!==e.taskList?null!==e.taskList?Object(s.jsx)(s.Fragment,{children:me(e.taskList,e.isInterval)}):Object(s.jsx)(x.a,{size:"large"},"spin"):Object(s.jsx)("div",{children:"Authorization required to get a list of tasks"})},me=function e(t,a){var n=[],r=[];console.log("isInterval: ",a),t.sort(de("time")).sort(de("date"));var c=function(e){return m()(e.date).format("D MMMM")},i=null;null!==t&&t.length>0&&(i=c(t[0]),n.push(Object(s.jsxs)("h5",{className:a?"text-left":"",children:[i,":"]},i+"title")));for(var l=0;l<24;l++){if(!(t.length>0)){n.push(Object(s.jsx)("h3",{children:"no tasks"},"noTasks"));break}if(!a&&l>7&&n.push(Object(s.jsxs)(ae.a,{orientation:"left",children:[l<=9?"0":null,l,":00"]},l+"to"+i)),null!==t)for(var o=0;o<t.length;o++){var u=t[o],d=Number(u.time.split(":",1));d>=l&&d<l+1&&(c(u)===i?n.push(Object(s.jsx)(ne.a,{placement:"topLeft",title:u.descriptions,children:Object(s.jsx)(ue,{element:u})},l+"-"+u.id)):r.push(u))}}return r.length>0&&(n=n.concat(e(r,a))),n},je=Object(o.b)((function(e){return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,taskListIsFetching:e.task.taskListIsFetching,dateInterval:e.task.dateInterval,errorMessage:e.task.errorMessage,isInterval:e.task.isInterval}}),{getTaskList:F})(be),pe=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!1),o=Object(l.a)(i,2),d=o[0],b=o[1];return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"site-card-border-less-wrapper",children:[Object(s.jsxs)(u.a,{title:Object(s.jsx)(Z,{showDrawer:function(){c(!0)},showModal:function(){b(!0)}}),bordered:!1,children:[Object(s.jsx)(te,{isModalVisible:d,handleOk:function(){b(!1)},handleCancel:function(){b(!1)}}),Object(s.jsx)(je,{})]}),Object(s.jsx)(V,{onClose:function(){c(!1)},visible:n,setVisible:c})]})})},he=Object(o.b)((function(e){return{taskList:e.task.taskList}}),{getTaskList:F})(pe),fe=a(50),Oe=a(77),ke=(a(516),a(517),a(518),a(106)),xe=a(283),ve=function(){return N.get("authMe/"+localStorage.getItem("remember_token")).then((function(e){return e}))},ge=function(e){return N.post("login",e).then((function(e){return null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.remember_token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Se=function(e){return N.post("register",e).then((function(e){return null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Te={user:null,remember_token:null,isAuth:!1,viewSettings:null},Le={setAuthUserData:function(e,t){return{type:"SN/AUTH/SET_USER_DATA",user:e,remember_token:t}},logout:function(){return{type:"SN/AUTH/LOGOUT"}}},ye=function(e){return function(){var t=Object(C.a)(I.a.mark((function t(a,n){var s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge(e);case 2:(s=t.sent)&&200===s.status&&a(Le.setAuthUserData(s.data.user,s.data.remember_token));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET_USER_DATA":return null!==t.user?Object(d.a)(Object(d.a)({},e),{},{user:t.user,remember_token:t.remember_token,isAuth:!0,viewSettings:JSON.parse(t.user.view_settings)}):Te;case"SN/AUTH/LOGOUT":return localStorage.removeItem("remember_token"),Te;default:return e}},Ce={initialized:!1,location:"/"},De=function(){return{type:"SN/APP/INITIALIZED_SUCCESS"}},Ne=function(e){return{type:"SN/APP/SET_LOCATION",location:e}},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/INITIALIZED_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{initialized:!0});case"SN/APP/SET_LOCATION":return Object(d.a)(Object(d.a)({},e),{},{location:t.location});default:return e}},we=a(133);N.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token");var Ae=function(){return N.get("taskList").then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Me=function(e){return N.post("taskList",e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request?console.log("request",e.request):console.log("anything else: ",e),null)}))},Ee=function(e){return N.delete("taskList/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Ye=function(e,t){return N.put("taskList/".concat(t),e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request,null)}))},Fe={taskList:[],taskListIsFetching:!1,isTaskListLoaded:!1,selectedTasks:[]},ze={setTaskList:function(e){return{type:"SN/TASK_LIST/SET_TASK_LIST",taskList:e}},setSelectedTasks:function(e){return{type:"SN/TASK_LIST/SET_SELECTED_TASK",taskId:e}},backSelectedTasks:function(){return{type:"SN/TASK_LIST/BACK_SELECTED_TASK"}}},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK_LIST/BACK_SELECTED_TASK":var a=Object(we.a)(e.selectedTasks);return a.length>0&&a.pop(),Object(d.a)(Object(d.a)({},e),{},{selectedTasks:a});case"SN/TASK_LIST/SET_SELECTED_TASK":return console.log(Object(d.a)(Object(d.a)({},e),{},{selectedTasks:[].concat(Object(we.a)(e.selectedTasks),[t.taskId])})),Object(d.a)(Object(d.a)({},e),{},{selectedTasks:[].concat(Object(we.a)(e.selectedTasks),[t.taskId])});case"SN/TASK_LIST/SET_TASK_LIST":return Object(d.a)(Object(d.a)({},e),{},{taskList:t.taskList,isTaskListLoaded:!0});default:return e}},Pe=Object(ke.c)({task:z,app:_e,auth:Ie,taskList:Ve}),Ke=Object(ke.e)(Pe,Object(ke.a)(xe.a)),He=a(541),Re=a(551),qe=Re.a.SubMenu,Ue=function(e){var t,a,n=Object(fe.g)(),c=Object(r.useState)([]),i=Object(l.a)(c,2);i[0],i[1];return Object(s.jsxs)(Re.a,{onClick:function(e){},mode:"horizontal",theme:"dark",children:[e.menuData.map((function(e){return Object(s.jsx)(qe,{title:e.label,children:(t=e.children,t.map((function(e){return Object(s.jsx)(Re.a.Item,{children:Object(s.jsx)(Oe.b,{to:e.value,children:e.label})},e.value)})))},e.value);var t})),e.isAuth?Object(s.jsx)(qe,{title:null===(a=e.user)||void 0===a?void 0:a.name,children:Object(s.jsx)(Re.a.Item,{onClick:function(){n.replace(e.appLocation+"login"),e.logout()},children:"Logout"},"login")},null===(t=e.user)||void 0===t?void 0:t.name):Object(s.jsx)(Re.a.Item,{children:Object(s.jsx)(Oe.b,{to:e.appLocation+"login",children:"Login"})},"login")]})},Be=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,user:e.auth.user,appLocation:e.app.location}}),{logout:Le.logout})(Ue),Ge=(a(526),B.m.Item),Je=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1];return Object(s.jsx)("div",{className:"mr-3",children:Object(s.jsx)(B.m,{mask:!0,visible:n,overlay:[Object(s.jsx)(Ge,{children:"Logout"},"1"),Object(s.jsx)(Ge,{children:"Info"},"2"),Object(s.jsx)(Ge,{children:"Help"},"3")],onVisibleChange:function(e){c(e)},onSelect:function(t,a){c(!1),"Logout"===t.props.children&&e.onLogout()},children:Object(s.jsx)("div",{style:{height:"100%",padding:"0 15px",marginRight:"-20px",display:"flex",alignItems:"center"},children:Object(s.jsx)(B.g,{type:"ellipsis"})})})})},Xe=function(e){var t,a=Object(fe.g)(),n=Object(fe.h)(),c=Object(r.useState)(!1),i=Object(l.a)(c,2),o=i[0],u=i[1],d=Object(we.a)(e.menuData),b=Object(r.useState)(d),m=Object(l.a)(b,2),j=m[0],p=(m[1],Object(r.useState)(function(){var e=[d[0].value,""];return d.forEach((function(t){t.children&&t.children.forEach((function(a){a.value===n.pathname&&(e=[t.value,a.value])}))})),e}())),h=Object(l.a)(p,2),f=h[0],O=h[1],k=function(e){if(e){var t=e[0];d.forEach((function(n){n.value===e[0]&&(t=e[0],n.children&&e[1]&&n.children.forEach((function(t){t.value===e[1]&&(a.replace("".concat(t.value)),u(!1))})))})),""===t&&(t=d[0].value),O([t,e[1]])}},x=Object(s.jsx)(B.j,{className:"foo-menu",data:j,value:f,onChange:k,height:.6*document.documentElement.clientHeight}),v=Object(s.jsx)("div",{style:{width:"100%",height:.6*document.documentElement.clientHeight,display:"flex",justifyContent:"center"},children:Object(s.jsx)(B.a,{size:"large"})});return Object(s.jsxs)("div",{className:o?"menu-active":"",children:[Object(s.jsx)("div",{children:Object(s.jsx)(B.k,{leftContent:"",mode:"light",icon:Object(s.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/iXVHARNNlmdCGnwWxQPH.svg",className:"am-icon am-icon-md",alt:""}),onLeftClick:function(e){e.preventDefault(),u(!o)},className:"top-nav-bar",rightContent:e.isAuth?Object(s.jsx)(Je,{onLogout:function(){k(["",""]),a.replace(e.appLocation+"login"),e.logout()}}):null,children:e.isAuth?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:null===(t=e.user)||void 0===t?void 0:t.name})}):Object(s.jsx)(Oe.b,{to:e.appLocation+"login",onClick:function(){k(["",""])},children:Object(s.jsx)("span",{className:"text-white",children:"Login"})})})}),o?j?x:v:null,o?Object(s.jsx)("div",{className:"menu-mask",onClick:function(){u(!1)}}):null]})},Ze=Object(o.b)((function(e){return{appLocation:e.app.location,isAuth:e.auth.isAuth,user:e.auth.user}}),{})(Xe),Qe=function(e){return U.isMobile?Object(s.jsx)(Ze,{menuData:We(e.appLocation),logout:e.logout}):Object(s.jsx)(Be,{menuData:We(e.appLocation)})},We=function(e){return[{value:"planning",label:"Planning",children:[{label:"ToDo list",value:e+"toDoList",disabled:!1},{label:"Tasks tree",value:e+"tasksTree"},{label:"Analysis",value:e+"analysis",disabled:!0}]},{value:"catalog",label:"Catalog",children:[{label:"Products",value:e+"products"},{label:"Providers",value:e+"providers"}]},{value:"orders",label:"Orders",children:[{label:"Orders",value:e+"orders"},{label:"Leads",value:e+"leads"}]}]},$e=Object(o.b)((function(e){return{appLocation:e.app.location,user:e.auth.user}}),{logout:Le.logout})(Qe),et=a(38),tt=a(298),at=a(154),nt=p.a.Item,st=at.a.Option,rt=B.d.CheckboxItem,ct=j.a.TextArea,it=function(e){return function(t){var a=t.field,n=t.form,r=t.hasFeedback,c=t.label,i=t.selectOptions,l=t.submitCount,o=t.type,u=Object(tt.a)(t,["field","form","hasFeedback","label","selectOptions","submitCount","type"]),b=n.touched[a.name],m=l>0,j=n.errors[a.name],p=j&&m,h=j&&b,f=function(e){void 0===e?"select"!=o&&"time"!=o||n.setFieldValue(a.name,null):null===e?n.setFieldValue(a.name,null):e.target?n.setFieldValue(a.name,e.target.value):"time"===o?n.setFieldValue(a.name,e):Array.isArray(e)?n.setFieldValue(a.name,e[0]):n.setFieldValue(a.name,e)},O=function(e){"string"!==typeof e&&"checkbox"===e.target.type?n.setFieldValue(a.name,e.target.checked):n.setFieldValue(a.name,e)},k=function(){return n.setFieldTouched(a.name,!0)};return Object(s.jsx)(nt,{label:U.isMobile?null:c,hasFeedback:!!(r&&m||r&&b),help:!(!p&&!h)&&j,validateStatus:p||h?"error":"success",children:U.isMobile?Object(s.jsx)(jt,{AntComponent:e,onBlur:k,type:o,onInputChange:f,onChange:O,label:c,selectOptions:i,value:a.value}):Object(s.jsx)(e,Object(d.a)(Object(d.a)(Object(d.a)({},a),u),{},{allowClear:i?"true":"false",onBlur:k,onChange:o?f:O,children:i&&i.map((function(e){return Object(s.jsx)(st,{title:e.name,value:e.value,children:e.name},e.name)}))}))})}},lt=U.isMobile?it(B.l):it(at.a),ot=(it(O.a),U.isMobile?it(B.h):it(j.a)),ut=U.isMobile?it(B.h):it(j.a.Password),dt=U.isMobile?it(B.e):it(k.a),bt=U.isMobile?it(rt):it(P.a),mt=U.isMobile?it(B.p):it(ct),jt=function(e){var t=Object(r.useState)("select"===e.type?[e.value]:e.value),a=Object(l.a)(t,2),n=a[0],c=a[1];Object(r.useEffect)((function(){"select"===e.type&&"task_type"===e.label&&console.log("useEffect parent_id: ",e.value),c(e.value)}),[e.value]);var i;return i=null!==e.selectOptions&&void 0!==e.selectOptions?e.selectOptions.map((function(e){return{label:e.name,value:e.value,key:e.name}})):[],"select"===e.type&&"task Types"===e.label&&console.log("render: ",e.value),Object(s.jsx)(B.i,{children:Object(s.jsx)(e.AntComponent,{onBlur:e.onBlur,type:e.type,onChange:e.type?function(t){c(t),e.onInputChange(t)}:e.onChange,mode:"time"===e.type?"time":null,defaultValue:"parent_id"===e.label?[38]:n,value:n,title:e.label,locale:J.a,autoHeight:!0,className:"text"===e.type?"pl-0":null,data:i,cols:1,onOk:function(e){return c(e)},onPickerChange:function(e){console.log("onPickerChange: ",n),c(e)},children:Object(s.jsx)(B.i.Item,{className:"pl-0",children:e.label})},e.label)})},pt=function(e){var t;return e||(t="Required!"),t},ht=function(e){var t;return e?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||(t="Invalid email address!"):t="Required!",t},ft=function(e){return Object(s.jsxs)(et.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(et.a,{component:ot,name:"email",type:"email",label:"Email",validate:ht,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:ut,name:"password",type:"password",label:"Password",validate:pt,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:bt,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Login"})})]})},Ot=(B.d.CheckboxItem,{}),kt=function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"mb-5 mx-auto",children:"Login Form"}),Object(s.jsx)(et.c,{initialValues:Ot,onSubmit:function(t){t.remember||(t.remember=!1),e.login(t)},render:ft}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(Oe.b,{to:e.location+"register",children:Object(s.jsx)(v.a,{type:"link",block:!0,children:"Register"})})})]})},xt=Object(o.b)((function(e){return{auth:e.auth,location:e.app.location}}),{login:ye})(kt),vt=function(e){return Object(s.jsx)("div",{children:"Orders"})},gt=Object(o.b)((function(e){return{appLocation:e.app.location}}),{})(vt),St=a(548),Tt=a(545),Lt=(at.a.Option,function(e){var t=e.values,a=t.selectOptions,n=t.taskTypes,c=Object(r.useState)(t.taskType),i=Object(l.a)(c,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var t=e.values.task_type;u(t)}),[e.values]),Object(s.jsxs)(et.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(et.a,{component:ot,name:"name",type:"text",label:"Name",validate:pt,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:lt,selectOptions:a,name:"parent_id",type:"select",label:"Parent",submitCount:e.submitCount}),Object(s.jsx)(et.a,{component:mt,name:"descriptions",type:"text",label:"Descriptions",submitCount:e.submitCount}),Object(s.jsx)(et.a,{component:dt,name:"time_to_complete",type:"time",label:"Time to complete",submitCount:e.submitCount}),Object(s.jsx)(et.a,{component:lt,selectOptions:n,name:"task_type",type:"select",label:"task Types",submitCount:e.submitCount}),2===o?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(et.a,{component:ot,name:"context1",type:"text",label:"context1",validate:pt,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:ot,name:"context2",type:"text",label:"context2",validate:pt,submitCount:e.submitCount,hasFeedback:!0})]}):null,Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})}),yt=(St.a.Panel,{header:"Create New Task",taskId:!1}),It=function(e){Object(r.useEffect)((function(){void 0===e.taskList||0!==e.taskList.length||e.isTaskListLoaded?void 0===e.taskList&&e.getTaskList():e.getTaskList(),c(!1),k(j)}),[e.taskList]);var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(yt),o=Object(l.a)(i,2),b=o[0],m=o[1],j={selectOptions:void 0!==e.taskList&&e.taskList.length>0?e.taskList.map((function(e){return{name:e.name,value:e.id}})):null,taskTypes:[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:1},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0442\u043e\u043c",value:2}],task_type:1,name:""},p=Object(r.useState)(j),h=Object(l.a)(p,2),O=h[0],k=h[1],x=function(){c(!0)};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"site-card-border-less-wrapper",children:Object(s.jsxs)(u.a,{title:Object(s.jsx)("div",{className:"inline",children:Object(s.jsx)("div",{children:Object(s.jsx)("h2",{children:"Tasks Tree"})})}),extra:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(K.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:function(){m(yt),k(j),x()}}),Object(s.jsx)(v.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(H.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]}),bordered:!1,children:[Object(s.jsx)(Tt.b,{size:"small",bordered:!0,dataSource:Ct(e.taskList,e.deleteTaskList,e.updateTaskList,x,m,O,k),renderItem:function(e){return Object(s.jsx)(Tt.b.Item,{draggable:!0,children:e})}}),Object(s.jsx)(f.a,{title:b.header,placement:"right",closable:!0,onClose:function(){c(!1)},visible:n,width:"90%",children:Object(s.jsx)(et.c,{initialValues:O,onSubmit:function(t){var a=Object(d.a)({},t);delete a.selectOptions,delete a.taskTypes,void 0!==a.time_to_complete&&(a.time_to_complete=a.time_to_complete.format("HH:mm:ss")),a.user_id=e.userId,b.taskId?e.updateTaskList(a,b.taskId):e.createNewTaskList(a)},render:Lt,enableReinitialize:!0})})]})})})},Ct=function(e,t,a,n,r,c,i){var l=function(e){var t={isCompleted:e.target.checked};console.log(e),a(t,e.target.id)};return void 0!==e&&e.length>0?e.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{children:Object(s.jsx)(P.a,{checked:e.isCompleted,id:e.id,onClick:l})}),Object(s.jsxs)("div",{className:"w-100 float-left",children:[Object(s.jsx)("div",{className:"ml-3 float-left",children:e.isCompleted?Object(s.jsx)("span",{className:"text-black-50",children:e.name}):Object(s.jsx)("span",{children:e.name})}),Object(s.jsx)("div",{className:"ml-3 float-right",children:e.time_to_complete})]},e.id),Object(s.jsxs)("div",{className:"d-flex flex-row",children:[Object(s.jsx)(v.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){!function(e){r({header:'Edit: "'+e.name+'"',taskId:e.id});var t=m()().zone("GMT");if(null!==e.time_to_complete){var a=e.time_to_complete.split(/:/);t.hours(parseInt(a[0])).minutes(parseInt(a[1])).seconds(0).milliseconds(0)}else t.hours(0).minutes(0).seconds(0).milliseconds(0);i(Object(d.a)(Object(d.a)({},c),{},{name:e.name,time_to_complete:t,descriptions:e.descriptions,parent_id:e.parent_id,task_type:Number(e.task_type)})),n()}(e)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(ie.a,{className:"ml-1",style:{fontSize:"14px"}})})}),Object(s.jsx)(v.a,{className:"",type:"primary",danger:!0,shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){t(e.id)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(le.a,{className:"ml-1",style:{fontSize:"14px"}})})})]})]})})):[]},Dt=(a(535),a(135),B.i.Item),Nt=function(e){var t=Object(o.c)();return Object(s.jsx)(B.n,{style:{backgroundColor:"gray"},autoClose:!0,right:[{text:"SubTask",onPress:function(){console.log(e.taskItem.id,": onSubTask")},style:{backgroundColor:"green",color:"white"}},{text:"Delete",onPress:function(){return e.deleteTaskList(e.taskItem.id)},style:{backgroundColor:"#F4333C",color:"white"}}],left:[{text:"Edit",onPress:function(){!function(t){e.setDrawerData({header:'Edit: "'+t.name+'"',taskId:t.id});var a=new Date;if(null!==t.time_to_complete){var n=t.time_to_complete.split(/:/);a.setHours(parseInt(n[0])),a.setMinutes(parseInt(n[1])),a.setSeconds(0),a.setMilliseconds(0)}else a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);e.setInitialFormValues(Object(d.a)(Object(d.a)({},e.initialFormValues),{},{name:t.name,time_to_complete:a,descriptions:t.descriptions,parent_id:[t.parent_id],task_type:[Number(t.task_type)]})),e.showDrawer()}(e.taskItem)},style:{backgroundColor:"#108ee9",color:"white"}},{text:e.taskItem.isCompleted?"Not Done":"Done",onPress:function(){return function(){console.log("onComplet");var t={isCompleted:!e.taskItem.isCompleted};e.updateTaskList(t,e.taskItem.id)}()},style:{backgroundColor:"green",color:"white"}}],children:Object(s.jsx)(Dt,{onClick:function(){t(ze.setSelectedTasks(e.taskItem.id))},children:e.taskItem.isCompleted?Object(s.jsx)("span",{className:"text-black-50",children:e.taskItem.name}):Object(s.jsx)("span",{children:e.taskItem.name})},e.taskItem.id)})},_t=(B.i.Item,{header:"Create New Task",taskId:!1}),wt=function(e){Object(r.useEffect)((function(){(e.taskList&&0===e.taskList.length&&!e.isTaskListLoaded||void 0===e.taskList)&&e.getTaskList(),o(!1),p(a)}),[e.taskList]);var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var a={selectOptions:void 0!==e.taskList&&e.taskList.length>0?e.taskList.map((function(e){return{name:e.name,value:e.id}})):null,taskTypes:[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:1},{name:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0441 \u043a\u043e\u043d\u0442\u0435\u043a\u0442\u043e\u043c",value:2}],task_type:1,time_to_complete:t},n=Object(r.useState)(!1),c=Object(l.a)(n,2),i=c[0],o=c[1],u=Object(r.useState)(a),b=Object(l.a)(u,2),j=b[0],p=b[1],h=Object(r.useState)(_t),f=Object(l.a)(h,2),O=f[0],k=f[1],x=function(e){p(a),o(!i)},v=function(){o(!0)};return console.log("TasksTreeMobile props: ",e),Object(s.jsxs)(B.r,{size:"lg",children:[Object(s.jsx)(B.q,{size:"lg"}),Object(s.jsxs)(B.c,{children:[Object(s.jsx)("div",{children:Object(s.jsx)(B.c.Header,{title:Object(s.jsx)("h4",{className:"w-100 text-center",children:"Tasks Tree"}),extra:Object(s.jsxs)("div",{className:"d-flex flex-row",children:[e.selectedTasks.length>0&&!i?Object(s.jsx)(B.b,{inline:!0,size:"small",className:"mx-3 my-2",onClick:function(){e.backSelectedTasks()},type:"primary",children:"Back"}):null,Object(s.jsx)(B.b,{inline:!0,size:"small",className:"mx-3 my-2",onClick:x,type:"primary",children:i?"Close":"Add"})]})})}),Object(s.jsx)(B.f,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},enableDragHandle:!0,contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(s.jsx)("div",{className:"mt-4",children:Object(s.jsx)(et.c,{initialValues:j,onSubmit:function(t){var a=Object(d.a)({},t);if(delete a.selectOptions,delete a.taskTypes,void 0!==a.time_to_complete){var n=m()(a.time_to_complete);a.time_to_complete=n.format("HH:mm:ss")}Array.isArray(a.parent_id)&&(a.parent_id=a.parent_id[0]),a.user_id=e.userId,O.taskId?(console.log("updateTaskList: ",a),e.updateTaskList(a,O.taskId)):e.createNewTaskList(a)},render:Lt,enableReinitialize:!0})}),open:i,onOpenChange:x,children:Object(s.jsx)(B.i,{children:void 0!==e.taskList?e.taskList.map((function(t){var a;if(0!==e.selectedTasks.length){if(a=e.selectedTasks[e.selectedTasks.length-1],t.parent_id===a)return Object(s.jsx)(Nt,{taskItem:t,deleteTaskList:e.deleteTaskList,showDrawer:v,setDrawerData:k,initialFormValues:j,setInitialFormValues:p,updateTaskList:e.updateTaskList})}else if(null===t.parent_id)return Object(s.jsx)(Nt,{taskItem:t,deleteTaskList:e.deleteTaskList,showDrawer:v,setDrawerData:k,initialFormValues:j,setInitialFormValues:p,updateTaskList:e.updateTaskList})})):null})})]})]})},At=Object(o.b)((function(e){var t;return{taskList:e.taskList.taskList,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id,isTaskListLoaded:e.taskList.isTaskListLoaded,selectedTasks:e.taskList.selectedTasks}}),{getTaskList:function(){return function(){var e=Object(C.a)(I.a.mark((function e(t,a){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae();case 2:void 0!==(n=e.sent)&&null!==n&&t(ze.setTaskList(n.data.Tasks));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},createNewTaskList:function(e){return function(){var t=Object(C.a)(I.a.mark((function t(a,n){var s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Me(e);case 2:s=t.sent,a(ze.setTaskList(s.data.Tasks));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteTaskList:function(e){return function(){var t=Object(C.a)(I.a.mark((function t(a,n){var s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee(e);case 2:s=t.sent,a(ze.setTaskList(s.data.Tasks));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updateTaskList:function(e,t){return function(){var a=Object(C.a)(I.a.mark((function a(n,s){var r;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ye(e,t);case 2:r=a.sent,n(ze.setTaskList(r.data.Tasks));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},backSelectedTasks:ze.backSelectedTasks})(U.isMobile?wt:It),Mt=function(e){return Object(s.jsxs)(et.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(et.a,{component:ot,name:"name",type:"text",label:"Name",validate:pt,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:ot,name:"email",type:"email",label:"Email",validate:ht,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:ut,name:"password",type:"password",label:"Password",validate:pt,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:ut,name:"c_password",type:"password",label:"Confirm",validate:pt,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(et.a,{component:bt,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Register"})})]})},Et={},Yt=function(e){var t=Object(fe.g)();Object(r.useEffect)((function(){e.isAuth&&t.replace(e.appLocation+"toDoList")}),[e.isAuth]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"mb-5 mx-auto",children:"Register Form"}),Object(s.jsx)(et.c,{initialValues:Et,onSubmit:function(t){t.status="guest",e.register(t)},render:Mt})]})},Ft=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,appLocation:e.app.location}}),{register:function(e){return function(){var t=Object(C.a)(I.a.mark((function t(a,n){var s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se(e);case 2:t.sent,s={email:e.email,password:e.password,remember:e.remember},a(ye(s));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(Yt),zt=Object(ke.d)(fe.i,Object(o.b)((function(e){return{initialized:e.app.initialized,appLocation:e.app.location,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(C.a)(I.a.mark((function e(t,a){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve();case 2:null!==(n=e.sent)&&0===n.data.resultCode&&t(Le.setAuthUserData(n.data.user,n.data.remember_token));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){e(De())}))}},addLocation:function(e){return function(t){t(Ne(e))}},login:ye}))((function(e){var t=Object(r.useState)(Object(fe.h)().pathname),a=Object(l.a)(t,2),n=a[0];a[1];return Object(r.useEffect)((function(){if(!e.initialized){var t=Pt();t.email&&t.password&&(t.remember=!0,e.login(t)),"/front1/"===n&&e.addLocation(n),e.initializeApp()}}),[e.initialized]),e.initialized?Object(s.jsxs)(He.a,{children:[Object(s.jsx)($e,{}),Object(s.jsxs)(fe.d,{children:[e.isAuth?Object(s.jsx)(fe.b,{exact:!0,path:e.appLocation,render:function(){return Object(s.jsx)(fe.a,{to:e.appLocation+"toDoList"})}}):Object(s.jsx)(fe.b,{exact:!0,path:e.appLocation,render:function(){return Object(s.jsx)(fe.a,{to:e.appLocation+"login"})}}),e.isAuth?Object(s.jsx)(fe.b,{exact:!0,path:e.appLocation+"login",render:function(){return Object(s.jsx)(fe.a,{to:e.appLocation+"toDoList"})}}):null,Object(s.jsx)(fe.b,{path:e.appLocation+"login",render:function(){return Object(s.jsx)(xt,{})}}),Object(s.jsx)(fe.b,{path:e.appLocation+"toDoList",render:function(){return Object(s.jsx)(he,{})}}),Object(s.jsx)(fe.b,{path:e.appLocation+"tasksTree",render:function(){return Object(s.jsx)(At,{})}}),Object(s.jsx)(fe.b,{path:e.appLocation+"orders",render:function(){return Object(s.jsx)(gt,{})}}),Object(s.jsx)(fe.b,{path:e.appLocation+"register",render:function(){return Object(s.jsx)(Ft,{})}}),Object(s.jsx)(fe.b,{path:e.appLocation+"*",render:function(){return Object(s.jsx)("div",{children:"404 NOT FOUND"})}})]})]}):Object(s.jsx)(x.a,{size:"large"},"spin")})),Vt=function(){return Object(s.jsx)(Oe.a,{children:Object(s.jsx)(o.a,{store:Ke,children:Object(s.jsx)("div",{className:U.isMobile?"":"container",children:Object(s.jsx)(zt,{})})})})},Pt=function(){var e={};return document.location.search.substr(1).split("&").forEach((function(t){var a=t.split("="),n=Object(l.a)(a,2),s=n[0],r=n[1];e[s]=r})),e},Kt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,556)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};i.a.render(Object(s.jsx)(Vt,{}),document.getElementById("root")),Kt()}},[[536,1,2]]]);
//# sourceMappingURL=main.a6a51ee7.chunk.js.map