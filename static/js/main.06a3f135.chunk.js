(this.webpackJsonpFront2=this.webpackJsonpFront2||[]).push([[0],{328:function(e,t,a){},540:function(e,t,a){},544:function(e,t,a){},556:function(e,t,a){},566:function(e,t,a){},596:function(e,t,a){"use strict";a.r(t);var n,s=a(1),i=a(0),r=a(18),c=a.n(r),l=(a(328),a(19)),o=a(34),u=a(16),d=a(21),m=a(17),b=a(604),j=function(e){var t;return e||(t="Required!"),t},p=function(e){var t;return e?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||(t="Invalid email address!"):t="Required!",t},h=function(e){var t;if(e)if(1===e.length)Number(e)||"+"!==e&&(t="NOT NUMBER!");else if(e.length<9)t=Number(e)?"Phone number is short":"NOT NUMBER!";else if(9===e.length){e[0],e[1];t="Wrong prefix"}else e.length<12?"+"!==e[0]?t=Number(e)?"Phone number is short!":"NOT NUMBER!":Number(e)||(t="NOT NUMBER!"):13===e.length?"+"!==e[0]&&(t="Phone number is too long!"):e.length>13&&(t="Phone number is too long!");else t="Required!";return t},O=a(322),f=a(42),x=a(603),v=a(161),k=a(605),g=a(238),S=a(598),L=a(608),T=a(133),D=a.n(T),y=x.a.Item,C=v.a.Option,I=d.e.CheckboxItem,N=k.a.TextArea,w=function(e){return function(t){var a=t.field,n=t.form,i=t.hasFeedback,r=t.label,c=t.selectOptions,l=t.submitCount,o=t.type,d=Object(O.a)(t,["field","form","hasFeedback","label","selectOptions","submitCount","type"]),m=n.touched[a.name],b=l>0,j=n.errors[a.name],p=j&&b,h=j&&m,x=function(e){d.onChange&&d.onChange(a.name,e),void 0===e?"select"!==o&&"time"!==o||n.setFieldValue(a.name,null):null===e?n.setFieldValue(a.name,null):"checkbox"===o?n.setFieldValue(a.name,e.target.checked):e.target?n.setFieldValue(a.name,e.target.value):"time"===o?n.setFieldValue(a.name,e):Array.isArray(e)?n.setFieldValue(a.name,e[0]):n.setFieldValue(a.name,e)},v=function(e){"string"!==typeof e&&"checkbox"===e.target.type?n.setFieldValue(a.name,e.target.checked):n.setFieldValue(a.name,e)},k=function(){return n.setFieldTouched(a.name,!0)};return Object(s.jsx)(y,{label:f.isMobile?null:r,hasFeedback:!!(i&&b||i&&m),help:!(!p&&!h)&&j,validateStatus:p||h?"error":"success",children:f.isMobile?Object(s.jsx)(U,Object(u.a)(Object(u.a)({},d),{},{AntComponent:e,onBlur:k,type:o,onInputChange:x,onChange:v,label:r,selectOptions:c,value:a.value,onOk:d.onSelect})):Object(s.jsx)(e,Object(u.a)(Object(u.a)(Object(u.a)({},a),d),{},{allowClear:c?"true":"false",onBlur:k,onChange:o?x:v,checked:a.value,children:c&&c.map((function(e){return Object(s.jsx)(C,{title:e.name,value:e.value,children:e.name},e.name)}))}))})}},_=f.isMobile?w(d.o):w(v.a),E=f.isMobile?w(d.f):w(g.a),A=f.isMobile?w(d.i):w(k.a),M=f.isMobile?w(d.i):w(k.a.Password),Y=f.isMobile?w(d.f):w(S.a),F=f.isMobile?w(I):w(L.a),R=f.isMobile?w(d.s):w(N),U=function(e){var t=Object(i.useState)("select"===e.type?[e.value]:e.value),a=Object(l.a)(t,2),n=a[0],r=a[1];Object(i.useEffect)((function(){"select"!==e.type||Array.isArray(e.value)?r(e.value):r([e.value])}),[e.value,e.type]);var c;c=null!==e.selectOptions&&void 0!==e.selectOptions?e.selectOptions.map((function(e){return{label:e.name,value:e.value,key:e.name}})):[];var o,m=e.type,b="textarea"===e.type?{autoHeight:!0}:null,j=(e.type,function(e){r(e)}),p=e.disabled?{disabled:!0}:null;return e.AntComponent.onOk&&(o=function(t){r(t),e.onOk&&e.onOk(t)}),e.disabled,Object(s.jsx)(d.j,{children:Object(s.jsx)(e.AntComponent,Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({onBlur:e.onBlur,type:e.type,mode:m,defaultValue:n,defaultChecked:n,value:n,title:e.label,locale:D.a},b),p),{},{className:"text"===e.type?"pl-0":null,data:c,cols:1},o),j),{},{onChange:e.type?function(t){r(t),e.onInputChange(t),"checkbox"===e.type&&e.onOk(t)}:e.onChange,children:Object(s.jsx)(d.j.Item,{className:"pl-0",children:e.label})}),e.label)})},P=a(22),z=a.n(P),V=function(e){var t=new Date,a=[];return e&&(a=e.split(":")),t.setHours(a[0]?Number(a[0]):0),t.setMinutes(a[1]?Number(a[1]):0),t.setSeconds(a[2]?Number(a[2]):0),t.setMilliseconds(a[3]?Number(a[3]):0),t},H=V(),B=z()(H),K=V("23:00"),q=z()(K),J={timeScaleInrerval:!1,completeInrerval:!0,timeScaleSingle:!0,completeSingle:!0,timeStart:f.isMobile?H:B,timeEnd:f.isMobile?K:q},G=function(e){var t=null!==e.viewSettings?function(e){var t=e.timeStart.split(":"),a=e.timeEnd.split(":");return Object(u.a)(Object(u.a)({},e),{},{timeStart:f.isMobile?V(e.timeStart):z()().hours(t[0]).minutes(t[1]).seconds(0).milliseconds(0),timeEnd:f.isMobile?V(e.timeEnd):z()().hours(a[0]).minutes(a[1]).seconds(0).milliseconds(0)})}(e.viewSettings.ToDo):J;return Object(s.jsx)(b.a,{title:"Task display settings",visible:e.isModalVisible,onOk:e.handleOk,onCancel:e.handleCancel,children:Object(s.jsx)(m.c,{initialValues:t,onSubmit:function(t){e.changeSettings("ToDo",t),e.handleOk()},enableReinitialize:!0,children:W})})},W=function(e){return Object(s.jsxs)(m.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsxs)(d.j,{renderHeader:function(){return"Single date settings"},children:[Object(s.jsx)(m.a,{component:F,name:"timeScaleSingle",label:"is time scale visible",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"completeSingle",label:"is complete visible",submitCount:e.submitCount})]}),Object(s.jsxs)(d.j,{renderHeader:function(){return"Inrerval date settings"},children:[Object(s.jsx)(m.a,{component:F,name:"timeScaleInrerval",label:"is time scale visible",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"completeInrerval",label:"is complete visible",submitCount:e.submitCount})]}),Object(s.jsxs)(d.j,{renderHeader:function(){return"Work day info"},children:[Object(s.jsx)(m.a,{component:Y,name:"timeStart",type:"time",label:"Start time",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:Y,name:"timeEnd",type:"time",label:"End time",validate:j,submitCount:e.submitCount,hasFeedback:!0})]}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})},X=a(37),Z=a.n(X),Q=a(52),$=a(304),ee=a.n($).a.create({withCredentials:!0,baseURL:"https://crmapiserver.h1n.ru/api/"});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(n||(n={}));var te=function(){return localStorage.getItem("remember_token")&&(ee.defaults.headers.common["X-Auth-Token"]=localStorage.getItem("remember_token")),sessionStorage.getItem("remember_token")&&(ee.defaults.headers.common["X-Auth-Token"]=sessionStorage.getItem("remember_token")),ee.defaults.headers.common["X-Auth-Token"]},ae=function(){var e="error";return localStorage.getItem("remember_token")&&(e=localStorage.getItem("remember_token")),sessionStorage.getItem("remember_token")&&(e=sessionStorage.getItem("remember_token")),ee.get("authMe/"+e).then((function(e){return e}))},ne=function(e){return ee.post("login",e).then((function(t){return e.remember?null!==t.data.remember_token?localStorage.setItem("remember_token",t.data.remember_token):localStorage.removeItem("remember_token"):null!==t.data.remember_token?sessionStorage.setItem("remember_token",t.data.remember_token):sessionStorage.removeItem("remember_token"),200===t.status?t:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},se=function(e){return ee.post("register",e).then((function(e){return null!==e.data.remember_token?localStorage.setItem("remember_token",e.data.token):localStorage.removeItem("remember_token"),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},ie={user:null,remember_token:null,isAuth:!1,viewSettings:{ToDo:{}},authError:null},re={setAuthUserData:function(e,t){return{type:"SN/AUTH/SET_USER_DATA",user:e,remember_token:t}},logout:function(){return{type:"SN/AUTH/LOGOUT"}},changeSettings:function(e,t){return{type:"SN/AUTH/SET_SETTINGS_DATA",settingType:e,settings:t}},setAuthError:function(e){return{type:"SN/AUTH/SET_AUTH_ERROR",error:e}}},ce=function(e){return function(){var t=Object(Q.a)(Z.a.mark((function t(a,n){var s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:(s=t.sent)&&(200===s.status?a(re.setAuthUserData(s.data.user,s.data.remember_token)):a(re.setAuthError(s.data.message)));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET_AUTH_ERROR":return Object(u.a)(Object(u.a)({},e),{},{authError:t.error});case"SN/AUTH/SET_SETTINGS_DATA":var a=Object(u.a)({},e.viewSettings),n="";n=z.a.isMoment(t.settings.timeStart)?t.settings.timeStart.format("h:mm A"):t.settings.timeStart.toTimeString().split(" ")[0];var s="";return s=z.a.isMoment(t.settings.timeEnd)?t.settings.timeEnd.format("h:mm A"):t.settings.timeEnd.toTimeString().split(" ")[0],a[t.settingType]=Object(u.a)(Object(u.a)({},t.settings),{},{timeStart:n,timeEnd:s}),Object(u.a)(Object(u.a)({},e),{},{viewSettings:a});case"SN/AUTH/SET_USER_DATA":return null!==t.user?Object(u.a)(Object(u.a)({},e),{},{user:t.user,remember_token:t.remember_token,isAuth:!0,viewSettings:JSON.parse(t.user.view_settings),authError:null}):ie;case"SN/AUTH/LOGOUT":return localStorage.removeItem("remember_token"),sessionStorage.removeItem("remember_token"),ie;default:return e}},oe=Object(o.b)((function(e){return{viewSettings:e.auth.viewSettings}}),{changeSettings:re.changeSettings})(G),ue=a(93),de=a(612),me=a(613),be=g.a.RangePicker,je=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)({startDate:z()(),endDate:z()()}),o=Object(l.a)(c,2),u=o[0],d=o[1];Object(i.useEffect)((function(){e.dateInterval.startDate.isSame(u.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(u.endDate.format("YYYY-MM-DD"),"day")||e.setIsInterval(n,u)}),[n,u,e]);return Object(s.jsxs)("div",{className:"row w-100",children:[Object(s.jsxs)("div",{className:"col-12 col-md-9 col-lg-9 col-xl-7 w-100",children:[Object(s.jsx)("div",{className:"d-none d-sm-inline",children:Object(s.jsxs)("label",{children:[n?"Date interval":"Date",":"]})}),Object(s.jsx)("div",{className:"d-none d-inline",children:n?Object(s.jsx)(be,{onChange:function(e,t){null!==e&&null!==e[0]&&null!==e[1]&&d({startDate:e[0],endDate:e[1]})},defaultValue:[e.dateInterval.startDate,e.dateInterval.endDate],value:[e.dateInterval.startDate,e.dateInterval.endDate],format:"DD-MM-YYYY",style:{marginLeft:10}}):Object(s.jsx)(g.a,{onChange:function(e,t){null!==e&&d({startDate:e,endDate:e})},defaultValue:e.dateInterval.startDate,format:"DD-MM-YYYY",style:{marginLeft:10}})})]}),Object(s.jsx)("div",{className:"col-12 col-md-3 col-lg-3 col-xl-2 m-2 m-md-0",children:Object(s.jsx)(L.a,{className:"ml-3",onChange:function(t){t.target.checked||d({startDate:u.startDate,endDate:u.startDate}),r(t.target.checked),e.setIsInterval(t.target.checked,e.dateInterval)},children:"Date interval"})}),e.isReadOnly?null:Object(s.jsxs)("div",{className:"col-12 col-md-12 col-lg-4 col-xl-3 mt-lg-2",children:[Object(s.jsx)(ue.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(de.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:e.showDrawer}),Object(s.jsx)(ue.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},onClick:e.showModal,icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(me.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]})]})},pe=function(e){return ee.post("tasks",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},he=function(e){return te(),ee.post("tasks/part",e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Oe=function(e){return te(),ee.delete("tasks/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},fe=function(e,t){return te(),ee.put("tasks/".concat(t),e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},xe={taskList:null,taskListIsFetching:!1,taskSaveStatus:"no",errorMessage:null,isInterval:!1,dateInterval:{startDate:z()(),endDate:z()()}},ve={setTaskList:function(e){return{type:"SN/TASK/SET_TASK_LIST",taskList:e}},setTaskSaveStatus:function(e){return{type:"SN/TASK/SET_TASK_SAVE_STATUS",taskSaveStatus:e}},setErrorMessage:function(e){return{type:"SN/TASK/SET_ERROR_MESSAGE",message:e}},setTaskListIsFetching:function(e){return{type:"SN/TASK/SET_TASK_LIST_IS_FETCHING",isFetchingValue:e}},setIsInterval:function(e,t){return{type:"SN/TASK/SET_IS_INTERVAL",isInterval:e,date:t}},editTaskList:function(e){return{type:"SN/TASK/EDIT_TASK_LIST",task:e}}},ke=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(Q.a)(Z.a.mark((function a(n,s){var i,r,c,l;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ve.setTaskSaveStatus("inProgress")),a.next=3,pe(e);case 3:(i=a.sent)&&i.status&&200===i.status?(t&&(r=s(),c=r.task.dateInterval.startDate.format("YYYY-MM-DD"),l=r.task.dateInterval.endDate.format("YYYY-MM-DD"),n(ge(c,l))),n(ve.setTaskSaveStatus("success")),n(ve.setTaskSaveStatus("no"))):i&&i.data&&(n(ve.setErrorMessage(i.data.message)),n(ve.setTaskSaveStatus("error")),n(ve.setTaskSaveStatus("no")),n(ve.setErrorMessage(null)));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},ge=function(e,t){return function(){var a=Object(Q.a)(Z.a.mark((function a(n,s){var i,r;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ve.setTaskListIsFetching(!0)),i={start_date:e,end_date:t},a.next=4,he(i);case 4:void 0!==(r=a.sent)&&null!==r&&n(ve.setTaskList(r.data)),n(ve.setTaskListIsFetching(!1));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},Se=function(e,t,a){return function(){var n=Object(Q.a)(Z.a.mark((function n(s,i){return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Oe(e);case 2:null!==n.sent&&(s(ve.setErrorMessage("Task deletion was successful")),s(ge(t,a)),s(ve.setErrorMessage(null)));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Le=function(e,t){return function(){var a=Object(Q.a)(Z.a.mark((function a(n,s){var i;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fe(e,t);case 2:i=a.sent,n(ve.editTaskList(i.data[0]));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK/EDIT_TASK_LIST":if(null!==e.taskList){var a=e.taskList.map((function(e){return t.task.id===e.id?t.task:e}));return Object(u.a)(Object(u.a)({},e),{},{taskList:a})}return e;case"SN/TASK/SET_TASK_LIST":return Object(u.a)(Object(u.a)({},e),{},{taskList:t.taskList.Tasks});case"SN/TASK/SET_TASK_SAVE_STATUS":return Object(u.a)(Object(u.a)({},e),{},{taskSaveStatus:t.taskSaveStatus});case"SN/TASK/SET_ERROR_MESSAGE":return Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.message});case"SN/TASK/SET_TASK_LIST_IS_FETCHING":return Object(u.a)(Object(u.a)({},e),{},{taskListIsFetching:t.isFetchingValue});case"SN/TASK/SET_IS_INTERVAL":var n={startDate:t.date.startDate,endDate:t.date.endDate};return Object(u.a)(Object(u.a)({},e),{},{isInterval:t.isInterval,dateInterval:n});default:return e}},De=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(s.jsxs)("div",{className:"w-100",children:[Object(s.jsx)(d.f,{locale:D.a,mode:"date",value:e.dateInterval.startDate.toDate(),onChange:function(t){n?e.setIsInterval(n,{startDate:z()(t),endDate:e.dateInterval.endDate}):e.setIsInterval(n,{startDate:z()(t),endDate:z()(t)})},children:Object(s.jsx)(d.j.Item,{className:"w-100",children:n?"Start:":"Date:"})}),n?Object(s.jsx)(d.f,{locale:D.a,mode:"date",value:e.dateInterval.endDate.toDate(),onChange:function(t){e.setIsInterval(n,{startDate:e.dateInterval.startDate,endDate:z()(t)})},children:Object(s.jsx)(d.j.Item,{children:"End:"})}):null,Object(s.jsx)(d.j.Item,{extra:Object(s.jsx)(d.r,{checked:n,onChange:function(t){t?e.setIsInterval(!n,{startDate:e.dateInterval.startDate,endDate:e.dateInterval.endDate}):e.setIsInterval(!n,{startDate:e.dateInterval.startDate,endDate:e.dateInterval.startDate}),r(!n)}}),children:"Date interval"}),e.isReadOnly?null:Object(s.jsxs)("div",{className:"mt-3",children:[Object(s.jsx)(d.c,{inline:!0,size:"small",className:"ml-3",onClick:e.showDrawer?e.showDrawer:function(){},type:"primary",children:e.isOpen?"Close":"Add"}),Object(s.jsx)(d.c,{inline:!0,size:"small",className:"ml-3",onClick:e.showModal?e.showModal:function(){},type:"primary",children:"Settings"})]})]})},ye=Object(o.b)((function(e){return{dateInterval:e.task.dateInterval}}),{setIsInterval:ve.setIsInterval})(f.isMobile?De:je),Ce=function(e){var t="readOnly"===e.initialStatus;return Object(s.jsxs)(m.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Name",validate:j,submitCount:e.submitCount,hasFeedback:!0,disabled:t}),Object(s.jsx)(m.a,{component:E,name:"date",type:"date",label:"Task date",validate:j,submitCount:e.submitCount,disabled:t}),Object(s.jsx)(m.a,{component:Y,name:"time",type:"time",label:"Task time",validate:j,submitCount:e.submitCount,disabled:t}),Object(s.jsx)(m.a,{component:R,name:"descriptions",type:"textarea",label:"Descriptions",submitCount:e.submitCount,disabled:t}),t?null:Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})},Ie=a(144),Ne=a(599),we={header:"Create New Task",taskId:!1},_e={name:"",time:V(),date:new Date,descriptions:""},Ee=function(e){Object(i.useEffect)((function(){null===e.taskList&&e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))}),[e]),Object(i.useEffect)((function(){e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))}),[e.dateInterval,e.getTaskList]),Object(i.useEffect)((function(){e.isInterval?g(e.viewSettings.ToDo.timeScaleInrerval):g(e.viewSettings.ToDo.timeScaleSingle)}),[e.isInterval,e.viewSettings]);var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),o=Object(l.a)(c,2),b=o[0],j=o[1],p=Object(i.useState)(we),h=Object(l.a)(p,2),O=h[0],f=h[1],x=Object(i.useState)(e.viewSettings.ToDo.timeScaleSingle),v=Object(l.a)(x,2),k=v[0],g=v[1],S=Object(i.useState)(_e),L=Object(l.a)(S,2),T=L[0],D=L[1],y=function(){n&&(D(_e),f(we)),r(!n)},C=function(t){var a=Object(u.a)(Object(u.a)({},t),{},{isCompleted:!t.isCompleted});e.updateTask(a,t.id)};return null!==e.taskList?Object(s.jsxs)(d.u,{size:"lg",children:[Object(s.jsx)(d.t,{size:"lg"}),Object(s.jsxs)(d.d,{children:[Object(s.jsx)(d.d.Header,{title:Object(s.jsx)(ye,{showDrawer:y,showModal:function(){j(!0)},isOpen:n})}),Object(s.jsx)(oe,{isModalVisible:b,handleOk:function(){j(!1)},handleCancel:function(){j(!1)}}),Object(s.jsx)(d.g,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(s.jsx)("div",{className:"mt-4",children:Object(s.jsx)(m.c,{initialValues:T,onSubmit:function(t,a){var n=Object(u.a)(Object(u.a)({},t),{},{time:z()(t.time).format("HH:mm:ss"),date:z()(t.date).format("YYYY-MM-DD"),user_id:e.userId});O.taskId?e.updateTask(n,O.taskId):e.createNewTask(n,!0),a.resetForm(),y()},enableReinitialize:!0,children:Ce})}),open:n,children:Object(s.jsx)(d.j,{children:k?Object(s.jsx)(Me,{taskList:e.taskList,dateInterval:e.dateInterval,deleteTask:e.deleteTask,setDrawerData:f,setInitialFormValues:D,showDrawer:y,onComplete:C}):Object(s.jsx)(Ye,{taskList:e.taskList,dateInterval:e.dateInterval,deleteTask:e.deleteTask,setDrawerData:f,setInitialFormValues:D,showDrawer:y,onComplete:C})})})]})]}):Object(s.jsx)(Ie.a,{})},Ae=function(e){return e.isReadOnly?Object(s.jsx)(d.j.Item,{wrap:!0,children:Object(s.jsxs)("div",{className:"w-100 row ",children:[Object(s.jsx)("div",{className:"col-2 ",children:Object(s.jsx)("span",{className:"ml-3",children:e.element.time.split(/:/)[0]+":"+e.element.time.split(/:/)[1]})}),Object(s.jsx)("div",{className:"col-10",children:e.element.isCompleted?Object(s.jsx)("span",{className:"text-break ml-3",style:{textDecoration:e.element.isCompleted?"line-through":""},children:e.element.name}):Object(s.jsx)("span",{className:"text-break ml-3",children:e.element.name})})]},e.element.id.toString())},e.element.id.toString()):Object(s.jsx)(d.q,{style:{backgroundColor:"gray"},autoClose:!0,right:[{text:"Delete",onPress:function(){return e.deleteTask(e.element.id,e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))},style:{backgroundColor:"#F4333C",color:"white"}}],left:[{text:"Edit",onPress:function(){!function(t){e.setDrawerData({header:'Edite "'+t.name+'"',taskId:t.id});var a=V(t.time),n=t.date.split(/-/),s=new Date;s.setFullYear(parseInt(n[0])),s.setMonth(parseInt(n[1])-1),s.setDate(parseInt(n[2])),e.setInitialFormValues({name:t.name,time:a,date:s,descriptions:t.descriptions?t.descriptions:null}),e.showDrawer()}(e.element)},style:{backgroundColor:"#108ee9",color:"white"}},{text:e.element.isCompleted?"Not Done":"Done",onPress:function(){return e.onComplete(e.element)},style:{backgroundColor:"green",color:"white"}}],onOpen:function(){},onClose:function(){},children:Object(s.jsx)(d.j.Item,{wrap:!0,children:Object(s.jsxs)("div",{className:"w-100 row ",children:[Object(s.jsx)("div",{className:"col-2 ",children:Object(s.jsx)("span",{className:"ml-3",children:e.element.time.split(/:/)[0]+":"+e.element.time.split(/:/)[1]})}),Object(s.jsx)("div",{className:"col-10",children:e.element.isCompleted?Object(s.jsx)("span",{className:"text-break ml-3",style:{textDecoration:e.element.isCompleted?"line-through":""},children:e.element.name}):Object(s.jsx)("span",{className:"text-break ml-3",children:e.element.name})})]},e.element.id.toString())},e.element.id.toString())},e.element.id)},Me=function(e){for(var t=z()(e.dateInterval.startDate),a=[];z()(t.format("YYYY-MM-DD")).isSameOrBefore(z()(e.dateInterval.endDate.format("YYYY-MM-DD")));)a.push(z()(t)),t.add(1,"days");var n=function(t,a){var n=[];return null!==e.taskList&&(n=e.taskList.filter((function(e){return e.date===t&&z()().hours(a).format("HH")===e.time.split(":")[0]})).map((function(t){return Object(s.jsx)(Ae,{element:t,dateInterval:e.dateInterval,deleteTask:e.deleteTask?e.deleteTask:function(){},setDrawerData:e.setDrawerData?e.setDrawerData:function(){},setInitialFormValues:e.setInitialFormValues?e.setInitialFormValues:function(){},showDrawer:e.showDrawer?e.showDrawer:function(){},onComplete:e.onComplete?e.onComplete:function(){},isReadOnly:!!e.isReadOnly&&e.isReadOnly},t.id.toString())}))),n},i=function(e){for(var t=[],a=0;a<24;a++)t.push(Object(s.jsxs)("div",{children:[Object(s.jsxs)(Ne.a,{orientation:"left",children:[a<=9?"0":null,a,":00"]},a+"to"+e),n(e,a)]},a+"div"));return t};return Object(s.jsx)(s.Fragment,{children:a.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:e.format("DD MMMM")},e.format("DD MMMM")+"dateHeader"),i(e.format("YYYY-MM-DD"))]},e.format("DD MMMM")+"divBlock")}))})},Ye=function(e){for(var t=z()(e.dateInterval.startDate),a=[];z()(t.format("YYYY-MM-DD")).isSameOrBefore(z()(e.dateInterval.endDate.format("YYYY-MM-DD")));)a.push(z()(t)),t.add(1,"days");return Object(s.jsx)(s.Fragment,{children:a.map((function(t){var a;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:t.format("DD MMMM")}),null===(a=e.taskList)||void 0===a?void 0:a.map((function(a){return a.date===t.format("YYYY-MM-DD")?Object(s.jsx)(Ae,{element:a,dateInterval:e.dateInterval,deleteTask:e.deleteTask?e.deleteTask:function(){},setDrawerData:e.setDrawerData?e.setDrawerData:function(){},showDrawer:e.showDrawer?e.showDrawer:function(){},setInitialFormValues:e.setInitialFormValues?e.setInitialFormValues:function(){},onComplete:e.onComplete?e.onComplete:function(){},isReadOnly:!!e.isReadOnly&&e.isReadOnly},a.id.toString()):null}))]},t.format("DD MMMM"))}))})},Fe=a(601),Re=a(607),Ue=a(321),Pe=a(305),ze=a(199),Ve=a(143),He=a(85),Be=a(602),Ke=a(615),qe=a(616),Je=a(614),Ge=function(e){switch(e.action){case 2:return Object(s.jsx)(We,Object(u.a)({},e));default:return Object(s.jsx)(s.Fragment,{})}},We=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=JSON.parse(e.action_data),o="tel:";return c&&(o+=c.phone),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ue.a,{type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){r(!0)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(Je.a,{className:"ml-1",style:{fontSize:"14px"}})})}),Object(s.jsxs)(b.a,{title:"Call to "+c.name,visible:n,onOk:function(){r(!1)},onCancel:function(){r(!1)},width:1e3,centered:!0,children:[c?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:Object(s.jsxs)("a",{href:o,children:["Call to: ",c.name]})}),Object(s.jsxs)("p",{children:["number: ",c.phone]})]}):null,Object(s.jsx)(m.c,{initialValues:{},onSubmit:function(e){console.log(e)},enableReinitialize:!0,children:Xe})]})]})},Xe=function(e){return Object(s.jsxs)(m.b,{className:"form-container mt-4",onSubmit:e.handleSubmit,children:["Call result:",Object(s.jsx)(m.a,{component:R,name:"call_description",type:"textarea",label:"",submitCount:e.submitCount}),Object(s.jsxs)("div",{className:"submit-container",children:[Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"}),Object(s.jsx)("button",{className:"ant-btn ant-btn-primary ml-4",type:"submit",children:"Save and complete"})]})]})},Ze=function(e){var t=Object(i.useState)(e.element.isCompleted),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),o=Object(l.a)(c,2),d=o[0],m=o[1],b=e.isReadOnly?{disabled:!0}:null;return Object(s.jsx)(Be.a.Item,{as:"li",action:!0,className:"",children:Object(s.jsxs)(Ve.a,{className:"px-0 ml-0 ml-sm-5",children:[Object(s.jsx)(He.a,{className:"mx-2",children:Object(s.jsx)(L.a,Object(u.a)({onChange:function(t){console.log(e.isReadOnly),r(!n);var a={isCompleted:t.target.checked};e.element.id,e.updateTask(a,e.element.id)},checked:n},b))}),Object(s.jsx)(He.a,{className:"mx-2",children:e.element.time.split(":",2).join(":")}),Object(s.jsx)(He.a,{className:"mx-2",children:Object(s.jsx)(ze.a,{placement:"topLeft",title:e.element.descriptions,children:Object(s.jsx)("span",{style:{textDecoration:n?"line-through":""},children:e.element.name})},e.element.id)}),e.isReadOnly?null:Object(s.jsxs)(He.a,{className:"mr-auto ml-0 mr-sm-2 ml-sm-auto",children:[Object(s.jsx)(Ge,Object(u.a)({},e.element)),Object(s.jsx)(ue.a,{type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){var t;t=e.element,e.onEdit(t)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(Ke.a,{className:"ml-1",style:{fontSize:"14px"}})})}),d?Object(s.jsx)(Pe.a,{size:"small"},"spin"):Object(s.jsx)(ue.a,{danger:!0,type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){var t;t=e.element.id,m(!0),e.deleteTask(t,e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(qe.a,{className:"ml-1",style:{fontSize:"14px"}})})})]})]})},e.element.id)},Qe=Object(o.b)((function(e){return{dateInterval:e.task.dateInterval}}),{deleteTask:Se,getTaskList:ge,updateTask:Le})(Ze),$e=function(e){return"date"===e?function(e,t){return e.date>t.date?1:-1}:function(e,t){return e.time>t.time?-1:1}},et=function(e){var t=Object(i.useState)({startDate:z()(null),endDate:z()()}),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(i.useEffect)((function(){e.dateInterval.startDate.isSame(n.startDate.format("YYYY-MM-DD"),"day")&&e.dateInterval.endDate.isSame(n.endDate.format("YYYY-MM-DD"),"day")||null!==e.dateInterval.startDate&&(e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD")),r(e.dateInterval))}),[e.dateInterval,e.getTaskList,n]),Object(i.useEffect)((function(){null!==e.errorMessage&&Ue.b.success(e.errorMessage)}),[e.errorMessage]),void 0!==e.taskList?null!==e.taskList?Object(s.jsx)(s.Fragment,{children:tt(e.taskList,e.isInterval,e.onEdit,!!e.isReadOnly&&e.isReadOnly)}):Object(s.jsx)(Pe.a,{size:"large"},"spin"):Object(s.jsx)("div",{children:"Authorization required to get a list of tasks"})},tt=function e(t,a,n,i){var r=[],c=[];t.sort($e("time")).sort($e("date"));var l=function(e){return z()(e.date).format("D MMMM")},o=null;null!==t&&t.length>0&&(o=l(t[0]),r.push(Object(s.jsxs)("h5",{className:a?"text-left":"",children:[o,":"]},o)));for(var u=0;u<24;u++){if(!(t.length>0)){r.push(Object(s.jsx)("h3",{children:"no tasks"},"noTasks"+u));break}if(!a&&u>7&&r.push(Object(s.jsxs)(Ne.a,{orientation:"left",children:[u<=9?"0":null,u,":00"]},u+"to"+o)),null!==t)for(var d=0;d<t.length;d++){var m=t[d],b=Number(m.time.split(":",1));b>=u&&b<u+1&&(l(m)===o?r.push(Object(s.jsx)(ze.a,{placement:"topLeft",title:m.descriptions,children:Object(s.jsx)(Be.a,{as:"ul",children:Object(s.jsx)(Qe,{element:m,onEdit:n,isReadOnly:i},u)},u)},u+"-"+m.id)):c.push(m))}}return c.length>0&&(r=r.concat(e(c,a,n,i))),r},at=Object(o.b)((function(e){return{taskList:e.task.taskList,taskSaveStatus:e.task.taskSaveStatus,taskListIsFetching:e.task.taskListIsFetching,dateInterval:e.task.dateInterval,errorMessage:e.task.errorMessage,isInterval:e.task.isInterval,settings:e.auth.viewSettings}}),{getTaskList:ge})(et),nt={header:"Create New Task",taskId:!1},st=z()();st.hours(0),st.minutes(0),st.seconds(0),st.milliseconds(0);var it={name:"",time:st,date:z()(),descriptions:""},rt=function(e){Object(i.useEffect)((function(){null===e.taskList&&e.getTaskList(e.dateInterval.startDate.format("YYYY-MM-DD"),e.dateInterval.endDate.format("YYYY-MM-DD"))}),[e.taskList,e.getTaskList,e.dateInterval]);var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),o=Object(l.a)(c,2),d=o[0],b=o[1],j=Object(i.useState)(nt),p=Object(l.a)(j,2),h=p[0],O=p[1],f=Object(i.useState)(it),x=Object(l.a)(f,2),v=x[0],k=x[1];Object(i.useEffect)((function(){}),[v]);var g=function(){r(!0)},S=function(){k(it),O(Object(u.a)({},nt)),r(!1)};return Object(s.jsxs)(Fe.a,{title:Object(s.jsx)(ye,{showDrawer:g,showModal:function(){b(!0)}}),bordered:!1,children:[Object(s.jsx)(oe,{isModalVisible:d,handleOk:function(){b(!1)},handleCancel:function(){b(!1)}}),Object(s.jsx)(at,{onEdit:function(e){O({header:'Edite "'+e.name+'"',taskId:e.id});var t=e.time.split(/:/);k({name:e.name,time:z()().hours(Number(t[0])).minutes(Number(t[1])).seconds(0),date:z()(e.date),descriptions:e.descriptions?e.descriptions:null}),g()}}),Object(s.jsx)(Re.a,{title:h.header,placement:"right",closable:!0,onClose:S,visible:n,width:"90%",children:Object(s.jsx)(m.c,{initialValues:v,onSubmit:function(t,a){var n=Object(u.a)(Object(u.a)({},t),{},{time:t.time.format("HH:mm:ss"),date:t.date.format("YYYY-MM-DD"),user_id:e.userId});h.taskId?e.updateTask(n,h.taskId):e.createNewTask(n,!0),a.resetForm(),S()},enableReinitialize:!0,children:Ce})})]})},ct=Object(o.b)((function(e){var t;return{taskList:e.task.taskList,viewSettings:e.auth.viewSettings,isInterval:e.task.isInterval,dateInterval:e.task.dateInterval,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id}}),{getTaskList:ge,createNewTask:ke,updateTask:Le,deleteTask:Se})(f.isMobile?Ee:rt),lt=a(53),ot=a(60),ut=(a(540),a(541),a(542),a(543),a(107)),dt=a(309),mt={initialized:!1,location:"/"},bt=function(){return{type:"SN/APP/INITIALIZED_SUCCESS"}},jt=function(e){return{type:"SN/APP/SET_LOCATION",location:e}},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/INITIALIZED_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{initialized:!0});case"SN/APP/SET_LOCATION":return Object(u.a)(Object(u.a)({},e),{},{location:t.location});default:return e}},ht=function(){return te(),ee.get("project").then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Ot=function(e){return te(),ee.get("project/"+e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},ft=function(e,t){return te(),ee.put("backend/".concat(t),e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},xt=function(e){return te(),ee.get("models/"+e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},vt={projectList:[],isProjectLoaded:!1,modelsList:[]},kt=function(e){return{type:"SN/PROJECT/SET_PROJECT_LIST",projectList:e}},gt=function(e){return{type:"SN/PROJECT/SET_IS_LOADED",isLoaded:e}},St=function(e,t){return{type:"SN/PROJECT/SET_BACKEND_DATA",backendData:t,projectId:e}},Lt=function(e){return{type:"SN/PROJECT/SET_MODELS_LIST",modelsList:e}},Tt=function(){return function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht();case 2:void 0!==(n=e.sent)&&null!==n&&(t(gt(!0)),t(kt(n.data.projects)));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROJECT/SET_MODELS_LIST":return Object(u.a)(Object(u.a)({},e),{},{modelsList:t.modelsList});case"SN/PROJECT/SET_PROJECT_LIST":return Object(u.a)(Object(u.a)({},e),{},{projectList:t.projectList});case"SN/PROJECT/SET_IS_LOADED":return Object(u.a)(Object(u.a)({},e),{},{isProjectLoaded:t.isLoaded});case"SN/PROJECT/SET_BACKEND_DATA":return Object(u.a)(Object(u.a)({},e),{},{projectList:e.projectList.map((function(e){return t.projectId===e.id?(e.backendData=t.backendData,e):e}))});default:return e}},yt=a(162),Ct=function(){return te(),ee.get("taskList").then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},It=function(e){return console.log(e),ee.post("taskList",e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?(console.log(e.response),e.response):(e.request,null)}))},Nt=function(e){return ee.delete("taskList/".concat(e)).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},wt=function(e,t){return console.log(e),ee.put("taskList/".concat(t),e).then((function(e){return console.log(e),200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},_t={taskList:[],taskListIsFetching:!1,isTaskListLoaded:!1,selectedTasks:[]},Et={setTaskList:function(e){return{type:"SN/TASK_LIST/SET_TASK_LIST",taskList:e}},setSelectedTasks:function(e){return{type:"SN/TASK_LIST/SET_SELECTED_TASK",taskId:e}},backSelectedTasks:function(){return{type:"SN/TASK_LIST/BACK_SELECTED_TASK"}}},At=function(){return function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct();case 2:void 0!==(n=e.sent)&&null!==n&&t(Et.setTaskList(n.data.Tasks));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Mt=function(e){return function(){var t=Object(Q.a)(Z.a.mark((function t(a,n){var s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It(e);case 2:s=t.sent,a(Et.setTaskList(s.data.Tasks));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Yt=function(e){return function(){var t=Object(Q.a)(Z.a.mark((function t(a,n){var s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nt(e);case 2:s=t.sent,a(Et.setTaskList(s.data.Tasks));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Ft=function(e,t){return function(){var a=Object(Q.a)(Z.a.mark((function a(n,s){var i;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,wt(e,t);case 2:i=a.sent,n(Et.setTaskList(i.data.Tasks));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/TASK_LIST/BACK_SELECTED_TASK":var a=Object(yt.a)(e.selectedTasks);return a.length>0&&a.pop(),Object(u.a)(Object(u.a)({},e),{},{selectedTasks:a});case"SN/TASK_LIST/SET_SELECTED_TASK":return Object(u.a)(Object(u.a)({},e),{},{selectedTasks:[].concat(Object(yt.a)(e.selectedTasks),[t.taskId])});case"SN/TASK_LIST/SET_TASK_LIST":return Object(u.a)(Object(u.a)({},e),{},{taskList:t.taskList,isTaskListLoaded:!0});default:return e}},Ut=function(){return te(),ee.get("account").then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},Pt=function(e,t){return te(),ee.put("account/".concat(t),e).then((function(e){return 200===e.status?e:null})).catch((function(e){return e.response?e.response:(e.request,null)}))},zt={usersList:[],isUsersDataChanged:!1},Vt={setUsersList:function(e){return{type:"SN/USERS/SET_USERS_LIST",usersList:e}},updateUserList:function(e){return{type:"SN/USERS/UPDATE_USERS_LIST",changedUserData:e}},setUsersDataChanged:function(e){return{type:"SN/USERS/SET_IS_USERS_DATA_CHANGED",isUsersDataChanged:e}}},Ht=function(){return function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut();case 2:n=e.sent,t(Vt.setUsersList(n.data.UsersList));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Bt=function(e,t){return function(){var a=Object(Q.a)(Z.a.mark((function a(n,s){var i,r,c;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Pt(e,t);case 2:i=a.sent,n(Vt.updateUserList(i.data.changedUserData)),n(Vt.setUsersDataChanged(!0)),(r=s()).auth.user&&r.auth.user.id===i.data.changedUserData.id&&(c=i.data.changedUserData,n(re.setAuthUserData(c,null)));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/USERS/SET_IS_USERS_DATA_CHANGED":return Object(u.a)(Object(u.a)({},e),{},{isUsersDataChanged:t.isUsersDataChanged});case"SN/USERS/UPDATE_USERS_LIST":var a=Object(u.a)({},e),n=a.usersList.map((function(e){return e.id!==t.changedUserData.id?e:t.changedUserData}));return Object(u.a)(Object(u.a)({},e),{},{usersList:n});case"SN/USERS/SET_USERS_LIST":return Object(u.a)(Object(u.a)({},e),{},{usersList:t.usersList});default:return e}},qt=Object(ut.c)({task:Te,app:pt,auth:le,taskList:Rt,users:Kt,projects:Dt}),Jt=Object(ut.e)(qt,Object(ut.a)(dt.a)),Gt=a(600),Wt=a(610),Xt=(a(544),d.p.Item),Zt=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(s.jsx)("div",{className:"mr-3",children:Object(s.jsx)(d.p,{mask:!0,visible:n,overlay:[Object(s.jsx)(Xt,{children:"Logout"},"1"),Object(s.jsx)(Xt,{children:"Info"},"2"),Object(s.jsx)(Xt,{children:"Help"},"3")],onVisibleChange:function(e){r(e)},onSelect:function(t,a){switch(r(!1),t.props.children){case"Logout":e.onLogout()}},children:Object(s.jsx)("div",{style:{height:"100%",padding:"0 15px",marginRight:"-20px",display:"flex",alignItems:"center"},children:Object(s.jsx)(d.h,{type:"ellipsis"})})})})},Qt=function(e){var t,a=Object(lt.g)(),n=Object(lt.h)(),r=Object(i.useState)(!1),c=Object(l.a)(r,2),o=c[0],u=c[1],m=Object(i.useState)(function(){var t=[e.menuData[0].value,""];return e.menuData.forEach((function(e){e.children&&e.children.forEach((function(a){a.value===n.pathname&&(t=[e.value,a.value])}))})),t}()),b=Object(l.a)(m,2),j=b[0],p=b[1],h=function(t){if(t){var n=t[0];e.menuData.forEach((function(e){e.value===t[0]&&(n=t[0],e.children&&t[1]&&e.children.forEach((function(e){e.value===t[1]&&(a.replace("".concat(e.value)),u(!1))})))})),""===n&&(n=e.menuData[0].value),p([n,t[1]])}},O=Object(s.jsx)(d.l,{className:"foo-menu",data:e.menuData,value:j,onChange:h,height:.6*document.documentElement.clientHeight}),f=Object(s.jsx)("div",{style:{width:"100%",height:.6*document.documentElement.clientHeight,display:"flex",justifyContent:"center"},children:Object(s.jsx)(d.b,{size:"large"})});return Object(s.jsxs)("div",{className:o?"menu-active":"",children:[Object(s.jsx)("div",{children:Object(s.jsx)(d.m,{leftContent:"",mode:"light",icon:Object(s.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/iXVHARNNlmdCGnwWxQPH.svg",className:"am-icon am-icon-md",alt:""}),onLeftClick:function(e){e.preventDefault(),u(!o)},className:"top-nav-bar",rightContent:e.isAuth?Object(s.jsx)(Zt,{onLogout:function(){h(["",""]),a.replace(e.appLocation+"login"),e.logout()}}):null,children:e.isAuth?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:null===(t=e.user)||void 0===t?void 0:t.name})}):Object(s.jsx)(ot.b,{to:e.appLocation+"login",onClick:function(){h(["",""])},children:Object(s.jsx)("span",{className:"text-white",children:"Login"})})})}),o?e.menuData?O:f:null,o?Object(s.jsx)("div",{className:"menu-mask",onClick:function(){u(!1)}}):null]})},$t=a(609),ea=$t.a.SubMenu,ta=function(e){var t,a,n=Object(lt.g)();return Object(s.jsxs)($t.a,{onClick:function(){},mode:"horizontal",theme:"dark",children:[e.menuData.map((function(e){return Object(s.jsx)(ea,{title:e.label,children:e.children?(t=e.children,t.map((function(e){var t=e.disabled?{disabled:!0}:null;return Object(s.jsx)($t.a.Item,Object(u.a)(Object(u.a)({},t),{},{children:Object(s.jsx)(ot.b,{to:e.value,children:e.label})}),e.value)}))):null},e.value);var t})),e.isAuth?Object(s.jsxs)(ea,{title:null===(a=e.user)||void 0===a?void 0:a.name,children:[Object(s.jsx)($t.a.Item,{onClick:function(){n.replace(e.appLocation+"login"),e.logout()},children:"Logout"},"login"),Object(s.jsx)($t.a.Item,{onClick:function(){},children:"Info"},"info"),Object(s.jsx)($t.a.Item,{onClick:function(){},children:"Help"},"help")]},null===(t=e.user)||void 0===t?void 0:t.name):Object(s.jsx)($t.a.Item,{children:Object(s.jsx)(ot.b,{to:e.appLocation+"login",children:"Login"})},"login")]})},aa=Object(o.b)((function(e){return{appLocation:e.app.location,isAuth:e.auth.isAuth,user:e.auth.user}}),{logout:re.logout})(f.isMobile?Qt:ta),na=function(e){var t=e.user?e.user.status:null;return Object(s.jsx)(aa,{menuData:sa(e.appLocation,t)})},sa=function(e,t){var a=[{value:"planning",label:"Planning",children:[{label:"ToDo list",value:e+"toDoList",disabled:!1},{label:"Tasks tree",value:e+"tasksTree"},{label:"Analysis",value:e+"analysis",disabled:!0},{label:"Daily schedule",value:e+"schedule",disabled:!1}]},{value:"catalog",label:"Catalog",children:[{label:"Products",value:e+"products"},{label:"Providers",value:e+"providers"}]},{value:"orders",label:"Orders",children:[{label:"Orders",value:e+"orders"},{label:"Leads",value:e+"leads"}]}];return"admin"!==t&&"superAdmin"!==t||(a.push({value:"admin",label:"Admin",children:[{label:"Users",value:e+"users"}]}),a.push({value:"development",label:"Development",children:[{label:"Projects",value:e+"projects"}]})),a},ia=Object(o.b)((function(e){return{appLocation:e.app.location,user:e.auth.user}}),{logout:re.logout})(na),ra=function(e){return Object(s.jsxs)(m.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:A,name:"email",type:"email",label:"Email",validate:p,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:M,name:"password",type:"password",label:"Password",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:F,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Login"})})]})},ca=function(e){Object(i.useEffect)((function(){e.authError&&Ue.b.error(e.authError)}),[e.authError]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"mb-5 mx-auto",children:"Login Form"}),Object(s.jsx)(m.c,{initialValues:{email:"",password:"",remember:!1},onSubmit:function(t){e.login(t)},children:ra}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(ot.b,{to:e.location+"register",children:Object(s.jsx)(ue.a,{type:"link",block:!0,children:"Register"})})})]})},la=Object(o.b)((function(e){return{auth:e.auth,location:e.app.location,authError:e.auth.authError}}),{login:ce})(ca),oa=function(e){return Object(s.jsx)("div",{children:"Orders"})},ua=Object(o.b)((function(e){return{appLocation:e.app.location}}),{})(oa),da=a(611),ma=function(e){Object(i.useEffect)((function(){e.isBackendNew||e.isProjectListLoaded||e.getProjectList()}),[e.isBackendNew,e.isProjectListLoaded]),Object(i.useEffect)((function(){e.projectList&&e.projectList.length>0&&o(e.projectList.map((function(e){return{name:e.name,value:e.name}})))}),[e.projectList]);var t=Object(i.useState)(e.isBackendNew),a=Object(l.a)(t,2),n=(a[0],a[1],Object(i.useState)([])),r=Object(l.a)(n,2),c=r[0],o=r[1];return e.isBackendNew?Object(s.jsx)(m.a,{component:_,selectOptions:[{name:"Laravel",value:"laravel"},{name:"Other",value:"other"}],name:"backendType",type:"select",label:"Backend type",onSelect:e.onSelectBackEndType,submitCount:e.submitCount}):Object(s.jsxs)(s.Fragment,{children:["get old projects",Object(s.jsx)(m.a,{component:_,selectOptions:c,name:"backend_project",type:"select",label:"Choise backend project",onSelect:e.onSelectBackEndType,submitCount:e.submitCount})]})},ba=Object(o.b)((function(e){return{projectList:e.projects.projectList,isProjectListLoaded:e.projects.isProjectLoaded}}),{getProjectList:Tt})(ma),ja=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(i.useState)(!1),p=Object(l.a)(b,2),h=p[0],O=p[1],f=function(e){r(e.target.checked)};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Project Name",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:F,name:"isHasBackEnd",type:"checkbox",label:"BackEnd",submitCount:e.submitCount,onClick:function(e){d(e.target.checked)}}),u?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h5",{children:"backend initial options:"}),Object(s.jsx)("br",{}),Object(s.jsx)(m.a,{component:F,type:"checkbox",name:"isBackendNew",label:"New Backend",submitCount:e.submitCount,onClick:function(e){O(e.target.checked)}}),Object(s.jsx)(ba,{isBackendNew:h,onSelectBackEndType:function(e){},submitCount:e.submitCount})]}):null,Object(s.jsx)(m.a,{component:F,name:"isHasFrontEnd",type:"checkbox",label:"FrontEnd",submitCount:e.submitCount,onClick:f,onSelect:f}),n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h5",{children:"Frontend initial options:"}),Object(s.jsx)("br",{}),Object(s.jsx)(m.a,{component:F,name:"isCRA",label:"Create React App",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"isTS",label:"Type Script",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"isMenu",label:"Menu",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"isRouter",label:"Router",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"isLogin",label:"Login/ Register",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:F,name:"isBAM",label:Object(s.jsx)(ze.a,{title:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0442\u043e\u0434\u043e\u043b\u043e\u0433\u0438\u0438 \u0411\u042d\u041c \u0434\u0432\u0430\u043e\u043c\u0442\u0432\u0449\u043a\u043c\u0442\u0443\u0449\u043c\u0448\u0441\u0432\u043a\u0443\u043c\u0437\u043a\u0443\u043c\u0437 \u043a\u0443\u0446\u043c\u0437\u043a\u0446\u043c\u043e\u0437\u0443\u0449\u043a\u043c\u0437\u0449\u043a \u0437\u0449\u0441\u043e\u0443\u0446\u0448\u0440 \u0441\u0449\u0440\u0443\u043c\u0449\u043a\u0443\u0446\u043c\u0440\u0449\u043a\u043c\u0443 \u0446\u0440\u0448\u0443\u0446\u0449\u043c\u0448\u0440\u0446\u0449\u043a\u0443\u0448\u043c\u0449\u043c\u043a\u0448\u0446\u0449\u0448 \u0448\u043e\u043c\u0437\u0443\u0449\u0446\u043a\u043e\u043c\u0437\u043a\u0443\u043c\u043e \u0437\u0449\u0443\u043c\u043e\u0437\u04493\u0443\u043e\u043c"}),Object(s.jsx)("p",{children:"\u0412\u0442\u043e\u0440\u043e\u0439 \u0430\u0431\u0437\u0430\u0446"})]}),children:Object(s.jsx)("span",{children:"\u0411\u042d\u041c"})}),submitCount:e.submitCount})]}):null]})},pa=function(e){Object(i.useEffect)((function(){e.isProjectListLoaded||e.getProjectList()}),[e.isProjectListLoaded,e]),Object(i.useEffect)((function(){e.projectList&&e.projectList.length>0&&r(e.projectList.map((function(e){return{name:e.name,value:e.id.toString()}})))}),[e.projectList]);var t=Object(i.useState)([]),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(s.jsx)(m.a,{component:_,selectOptions:n,name:"project_name",type:"select",label:"Choise backend project",onSelect:function(t){console.log("project id: ",t),console.log(e.projectList.filter((function(e){return e.id===Number(t)}))[0])},submitCount:e.submitCount})},ha=Object(o.b)((function(e){return{projectList:e.projects.projectList,isProjectListLoaded:e.projects.isProjectLoaded}}),{getProjectList:Tt})(pa),Oa=function(e){var t=Object(i.useState)(0),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m.a,{component:_,selectOptions:[{name:"Old",value:1},{name:"New",value:2},{name:"Load From SRC",value:3}],name:"isNewType",type:"select",label:"\u0412\u0438\u0434 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",submitCount:e.submitCount,validate:j,onSelect:function(e){console.log("onSelect"),r(Number(e))}}),1===n?Object(s.jsx)(ha,{submitCount:e.submitCount}):null,2===n?Object(s.jsx)(ja,Object(u.a)({},e)):null,3===n?Object(s.jsx)("div",{children:"load"}):null]})},fa=function(e){var t=e.values,a=t.selectOptions,n=t.taskTypes,r=Object(i.useState)(t.taskType),c=Object(l.a)(r,2),o=c[0],u=c[1];Object(i.useEffect)((function(){var t=e.values.task_type;Array.isArray(t)?u(t[0]):u(t)}),[e.values]);return Object(s.jsxs)(m.b,{className:"form-container",onSubmit:e.handleSubmit,children:[3!==o?Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Name",validate:j,submitCount:e.submitCount,hasFeedback:!0}):null,Object(s.jsx)(m.a,{component:_,selectOptions:a,name:"parent_id",type:"select",label:"Parent",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:R,name:"descriptions",type:"textarea",label:"Descriptions",submitCount:e.submitCount}),3!==o?Object(s.jsx)(m.a,{component:Y,name:"time_to_complete",type:"time",label:"Time to complete",submitCount:e.submitCount}):null,Object(s.jsx)(m.a,{component:_,selectOptions:n,name:"task_type",type:"select",label:"task Types",onSelect:function(e){},submitCount:e.submitCount}),2===o?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m.a,{component:A,name:"phone_number",type:"text",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:A,name:"lead_name",type:"text",label:"\u0418\u043c\u044f \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u0430",validate:j,submitCount:e.submitCount,hasFeedback:!0})]}):null,3===o?Object(s.jsx)(Oa,{}):null,Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})},xa=a(606),va=a(617),ka=a(618),ga=xa.a.Panel,Sa=function(e){return null===e.item.parent_id?Object(s.jsx)(Ta,{item:e.item,taskList:e.taskList,onAddSubtask:function(t){console.log(t),e.setInitialFormValues(Object(u.a)(Object(u.a)({},e.initialValues),{},{parent_id:t})),e.setDrawerData({header:"add subtask",taskId:!1}),e.showDrawer()},onEdit:function(t){console.log(t),e.setDrawerData({header:'Edit: "'+t.name+'"',taskId:t.id});var a=z()().zone("GMT");if(null!==t.time_to_complete){var n=t.time_to_complete.split(/:/);a.hours(parseInt(n[0])).minutes(parseInt(n[1])).seconds(0).milliseconds(0)}else a.hours(0).minutes(0).seconds(0).milliseconds(0);var s=Object(u.a)(Object(u.a)({},e.initialFormValues),{},{name:t.name,time_to_complete:a,descriptions:t.descriptions?t.descriptions:void 0,parent_id:t.parent_id?t.parent_id:void 0,task_type:Number(t.task_type)});t.data&&(s=Object(u.a)(Object(u.a)({},s),JSON.parse(t.data))),console.log(s),e.setInitialFormValues(s),e.showDrawer()},deleteTask:function(t){e.deleteTaskList(t)},onStatusChange:function(t){var a={isCompleted:t.target.checked};e.updateTaskList(a,Number.parseInt(t.target.id))},onRunTask:e.onRunTask},String(e.item.id)):null},La=function(e){return Object(s.jsx)(da.b,{size:"small",bordered:!0,dataSource:e.childsTasklList,renderItem:function(t){return Object(s.jsx)(Ta,{item:t,taskList:e.taskList,onAddSubtask:e.onAddSubtask,onEdit:e.onEdit,deleteTask:e.deleteTask,onStatusChange:e.onStatusChange,onRunTask:e.onRunTask},t.id.toString())}})},Ta=function(e){return 0===Ca(e.taskList,e.item).length?Object(s.jsx)(Da,{item:e.item,onEdit:e.onEdit,deleteTask:e.deleteTask,onAddSubtask:e.onAddSubtask,onStatusChange:e.onStatusChange,onRunTask:e.onRunTask}):Object(s.jsx)(da.b.Item,{className:"p-0",draggable:!0,children:Object(s.jsx)(xa.a,{className:"w-100",defaultActiveKey:[],collapsible:"header",ghost:!0,children:Object(s.jsx)(ga,{header:Object(s.jsx)("span",{className:"float-left pl-2",children:e.item.name},String(e.item.id)),extra:Object(s.jsx)(ya,Object(u.a)({},e)),children:Object(s.jsx)(La,{childsTasklList:Ca(e.taskList,e.item),taskList:e.taskList,onEdit:e.onEdit,deleteTask:e.deleteTask,onAddSubtask:e.onAddSubtask,onStatusChange:e.onStatusChange,onRunTask:e.onRunTask})},e.item.id+"Panel")},String(e.item.id))},e.item.id)},Da=function(e){return Object(s.jsx)(da.b.Item,{className:"py-0",draggable:!0,children:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"py-2 pl-3",children:Object(s.jsx)(L.a,{checked:e.item.isCompleted,id:e.item.id.toString(),onClick:e.onStatusChange})}),Object(s.jsxs)("div",{className:"w-100 float-left",children:[Object(s.jsx)("div",{className:"ml-3 float-left",children:e.item.isCompleted?Object(s.jsx)("span",{className:"text-black-50",children:e.item.name}):Object(s.jsx)("span",{"data-toggle":"collapse","aria-controls":e.item.id+"collapseExample",children:e.item.name})}),Object(s.jsx)("div",{className:"ml-3 float-right",children:e.item.time_to_complete})]},String(e.item.id)),Object(s.jsx)("div",{className:"pr-3",children:Object(s.jsx)(ya,Object(u.a)({},e))})]})},String(e.item.id))},ya=function(e){return Object(s.jsxs)("div",{className:"d-flex flex-row",children:[Number(e.item.task_type)>1?Object(s.jsx)(ue.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){e.onRunTask(e.item.id)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(va.a,{className:"ml-1",style:{fontSize:"14px"}})})}):null,Object(s.jsx)(ue.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){e.onAddSubtask(e.item.id)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(ka.a,{className:"ml-1",style:{fontSize:"14px"}})})}),Object(s.jsx)(ue.a,{className:"",type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){e.onEdit(e.item)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(Ke.a,{className:"ml-1",style:{fontSize:"14px"}})})}),Object(s.jsx)(ue.a,{className:"",type:"primary",danger:!0,shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){e.deleteTask(e.item.id)},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(qe.a,{className:"ml-1",style:{fontSize:"14px"}})})})]})},Ca=function(e,t){for(var a=[],n=0;n<e.length;n++){var s=e[n];s.parent_id===t.id&&a.push(s)}return a},Ia=Object(o.b)((function(e){var t;return{taskList:e.taskList.taskList,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id,isTaskListLoaded:e.taskList.isTaskListLoaded,selectedTasks:e.taskList.selectedTasks}}),{getTaskList:At,createNewTaskList:Mt,deleteTaskList:Yt,updateTaskList:Ft})(Sa),Na=function(e){return Object(s.jsxs)(m.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:E,name:"date",type:"date",label:"Select Date",validate:j,submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:Y,name:"time",type:"time",label:"Select time",validate:j,submitCount:e.submitCount}),Object(s.jsx)("button",{type:"button",className:"ant-btn ant-btn-primary ml-2",children:"Add now"}),Object(s.jsx)("button",{type:"button",className:"ant-btn ant-btn-primary ml-2",children:"Auto add by context"}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})})]})},wa=function(e){switch(console.log(Number(e.task_type)),Number(e.task_type)){case 2:return{lead_name:e.lead_name,phone_number:e.phone_number};default:return null}},_a={header:"Create New Task",taskId:!1},Ea=function(e){return{selectOptions:Aa(e),taskTypes:Ka,task_type:1,name:""}},Aa=function(e){return void 0!==e&&e.length>0?e.map((function(e){return{name:e.name,value:e.id}})):[]},Ma=function(e){Object(i.useEffect)((function(){var t=function(){return e.getTaskList};void 0===e.taskList||0!==e.taskList.length||e.isTaskListLoaded?void 0===e.taskList&&t()():t()(),r(!1),f(Ea(e.taskList))}),[e.taskList,e.getTaskList,e.isTaskListLoaded]);var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(_a),o=Object(l.a)(c,2),d=o[0],j=o[1],p=Object(i.useState)(Ea(e.taskList)),h=Object(l.a)(p,2),O=h[0],f=h[1],x=Object(i.useState)(!1),v=Object(l.a)(x,2),k=v[0],g=v[1],S=Object(i.useState)(null),L=Object(l.a)(S,2),T=L[0],D=L[1],y=function(t){g(!0),D(e.taskList.filter((function(e){return e.id===t}))[0])},C=function(){r(!0)};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"site-card-border-less-wrapper",children:Object(s.jsxs)(Fe.a,{title:Object(s.jsx)("div",{className:"inline",children:Object(s.jsx)("div",{children:Object(s.jsx)("h2",{children:"Tasks Tree"})})}),extra:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ue.a,{type:"primary",shape:"round",icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(de.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Add"})]}),style:{marginLeft:10},onClick:function(){j(_a),C()}}),Object(s.jsx)(ue.a,{className:"",type:"primary",shape:"round",style:{marginLeft:10},icon:Object(s.jsxs)("div",{className:"d-flex flex-wrap align-content-start",children:[Object(s.jsx)(me.a,{style:{fontSize:"18px"}}),Object(s.jsx)("span",{className:"ml-1",style:{fontSize:"14px"},children:"Settings"})]})})]}),bordered:!1,children:[Object(s.jsx)(da.b,{size:"small",bordered:!0,dataSource:e.taskList,renderItem:function(t){return Object(s.jsx)(Ia,{item:t,showDrawer:C,setDrawerData:j,initialFormValues:O,setInitialFormValues:f,initialValues:Ea(e.taskList),onRunTask:y})}}),Object(s.jsx)(Re.a,{title:d.header,placement:"right",closable:!0,onClose:function(){f(Ea(e.taskList)),r(!1)},visible:n,width:"90%",children:Object(s.jsx)(m.c,{initialValues:O,onSubmit:function(t){var a=wa(t);console.log(t);var n={name:t.name,task_type:t.task_type.toString(),user_id:e.userId,time_to_complete:t.time_to_complete?t.time_to_complete.format("HH:mm:ss"):void 0,descriptions:t.descriptions,parent_id:t.parent_id?t.parent_id:void 0};a&&(n=Object(u.a)(Object(u.a)({},n),{},{data:a})),d.taskId?e.updateTaskList(n,d.taskId):e.createNewTaskList(n)},enableReinitialize:!0,children:fa})}),Object(s.jsx)(b.a,{title:"Run Task",visible:k,onOk:function(){g(!1)},onCancel:function(){g(!1)},okText:"Ok",cancelText:"Cancel",children:Object(s.jsx)(m.c,{initialValues:{date:z()(),time:z()(),action:2},onSubmit:function(t){if(null!==T&&null!==T.data&&e.userId){var a=JSON.parse(T.data),n={name:"Call to "+a.lead_name,description:a.phone_number,date:t.date.format("YYYY-MM-DD"),time:t.time.format("HH:mm:00"),user_id:e.userId,action:Number(T.task_type),action_data:{phone:a.phone_number,name:a.lead_name}};console.log(n),e.createNewToDo(n,!0)}},enableReinitialize:!0,children:Na})})]})})})},Ya=(a(556),d.j.Item),Fa=V(),Ra=function(e){var t=Object(o.c)();return Object(s.jsx)(d.q,{style:{backgroundColor:"gray"},autoClose:!0,right:[{text:"SubTask",onPress:function(){e.setDrawerData({header:'SubTask for: "'+e.taskItem.name+'"',taskId:!1}),e.setInitialFormValues(Object(u.a)(Object(u.a)({},e.initialFormValues),{},{name:"",time_to_complete:Fa,descriptions:"",parent_id:Number(e.taskItem.id),task_type:[0]})),e.showDrawer()},style:{backgroundColor:"green",color:"white"}},{text:"Delete",onPress:function(){return e.deleteTaskList(e.taskItem.id)},style:{backgroundColor:"#F4333C",color:"white"}}],left:[{text:"Edit",onPress:function(){!function(t){e.setDrawerData({header:'Edit: "'+t.name+'"',taskId:t.id});var a=V(t.time_to_complete),n=Object(u.a)(Object(u.a)({},e.initialFormValues),{},{name:t.name,time_to_complete:a,descriptions:t.descriptions?t.descriptions:void 0,parent_id:t.parent_id?t.parent_id:void 0,task_type:[Number(t.task_type)]});t.data&&(n=Object(u.a)(Object(u.a)({},n),JSON.parse(t.data))),console.log(n),e.setInitialFormValues(n),e.showDrawer()}(e.taskItem)},style:{backgroundColor:"#108ee9",color:"white"}},{text:e.taskItem.isCompleted?"Not Done":"Done",onPress:function(){return function(){var t={isCompleted:!e.taskItem.isCompleted};e.updateTaskList(t,e.taskItem.id)}()},style:{backgroundColor:"green",color:"white"}},{text:"Run",onPress:function(){return e.onRunTask(e.taskItem.id)},style:{backgroundColor:"#F4333C",color:"white"}}],children:Object(s.jsx)(Ya,{onClick:function(){t(Et.setSelectedTasks(e.taskItem.id)),e.setDrawerData({header:e.taskItem.name,taskId:e.taskItem.id})},wrap:!0,children:Object(s.jsxs)("div",{className:"w-100 row ",children:[Object(s.jsx)("div",{className:"col-10",children:e.taskItem.isCompleted?Object(s.jsx)("span",{className:"text-black-50 text-break",children:e.taskItem.name}):Object(s.jsx)("span",{className:"text-break",children:e.taskItem.name})}),Object(s.jsx)("div",{className:"col-2",children:e.taskItem.time_to_complete?e.taskItem.time_to_complete.split(/:/)[0]+":"+e.taskItem.time_to_complete.split(/:/)[1]:null})]},e.taskItem.id)},e.taskItem.id)})},Ua={header:"Tasks Tree",taskId:!1},Pa=function(e){return{selectOptions:Va(e),taskTypes:Ka,task_type:[1],time_to_complete:za}},za=V(),Va=function(e){return void 0!==e&&e.length>0?e.map((function(e){return{name:e.name,value:e.id}})):[]},Ha=function(e){Object(i.useEffect)((function(){var t=function(){return e.getTaskList};(e.taskList&&0===e.taskList.length&&!e.isTaskListLoaded||void 0===e.taskList)&&t()(),r(!1),j(Pa(e.taskList))}),[e.taskList,e.getTaskList,e.isTaskListLoaded]);var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(Pa(e.taskList)),o=Object(l.a)(c,2),b=o[0],j=o[1],p=Object(i.useState)(Ua),h=Object(l.a)(p,2),O=h[0],f=h[1],x=function(){0!==e.selectedTasks.length?(console.log(e.taskList.filter((function(t){return t.id===Number(e.selectedTasks[e.selectedTasks.length-1])}))[0].name),f({header:e.taskList.filter((function(t){return t.id===Number(e.selectedTasks[e.selectedTasks.length-1])}))[0].name,taskId:!1}),j(Object(u.a)(Object(u.a)({},Pa(e.taskList)),{},{parent_id:Number(e.selectedTasks[e.selectedTasks.length-1])}))):(f({header:"Task Tree",taskId:!1}),j(Object(u.a)(Object(u.a)({},Pa(e.taskList)),{},{parent_id:b.parent_id}))),r(!n)},v=function(){r(!0)},k=function(e){console.log(e)};return Object(s.jsxs)(d.u,{size:"lg",children:[Object(s.jsx)(d.t,{size:"lg"}),Object(s.jsxs)(d.d,{children:[Object(s.jsx)(d.d.Header,{title:"Tasks Tree"===O.header?Object(s.jsx)("h5",{className:"w-100 text-center",children:O.header}):Object(s.jsx)("h5",{children:O.header}),extra:Object(s.jsxs)("div",{className:"d-flex flex-row",children:[e.selectedTasks.length>0&&!n?Object(s.jsx)(d.c,{inline:!0,size:"small",className:"mx-3 my-2",onClick:function(){if(e.selectedTasks.length>1){var t=e.selectedTasks[e.selectedTasks.length-2],a=e.taskList.filter((function(e){return e.id===t}))[0].name;f({header:a,taskId:t})}else f({header:"Task Tree",taskId:!1});e.backSelectedTasks()},type:"primary",children:"Back"}):null,Object(s.jsx)(d.c,{inline:!0,size:"small",className:"mx-3 my-2",onClick:x,type:"primary",children:n?"Close":"Add"})]})}),Object(s.jsx)(d.g,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(s.jsx)("div",{className:"mt-4",children:Object(s.jsx)(m.c,{initialValues:b,onSubmit:function(t){console.log(t);var a=wa(Object(u.a)(Object(u.a)({},t),{},{task_type:Number(t.task_type)}));console.log(a);var n={name:t.name,task_type:t.task_type.toString(),descriptions:t.descriptions,user_id:e.userId,parent_id:t.parent_id?t.parent_id:void 0,time_to_complete:t.time_to_complete?t.time_to_complete.toTimeString().split(" ")[0]:void 0};a&&(n=Object(u.a)(Object(u.a)({},n),{},{data:a})),O.taskId?e.updateTaskList(n,O.taskId):e.createNewTaskList(n)},enableReinitialize:!0,children:fa})}),open:n,onOpenChange:x,children:Object(s.jsx)(d.j,{children:void 0!==e.taskList?e.taskList.map((function(t){var a;return 0!==e.selectedTasks.length?(a=e.selectedTasks[e.selectedTasks.length-1],t.parent_id===a?Object(s.jsx)(Ra,{taskItem:t,deleteTaskList:e.deleteTaskList,showDrawer:v,setDrawerData:f,initialFormValues:b,setInitialFormValues:j,updateTaskList:e.updateTaskList,onRunTask:k},t.id.toString()):null):null===t.parent_id?Object(s.jsx)(Ra,{taskItem:t,deleteTaskList:e.deleteTaskList,showDrawer:v,setDrawerData:f,initialFormValues:b,setInitialFormValues:j,updateTaskList:e.updateTaskList,onRunTask:k},t.id.toString()):null})):null})})]})]})},Ba=Object(o.b)((function(e){var t;return{taskList:e.taskList.taskList,userId:null===(t=e.auth.user)||void 0===t?void 0:t.id,isTaskListLoaded:e.taskList.isTaskListLoaded,selectedTasks:e.taskList.selectedTasks}}),{getTaskList:At,createNewTaskList:Mt,deleteTaskList:Yt,updateTaskList:Ft,backSelectedTasks:Et.backSelectedTasks,createNewToDo:ke})(f.isMobile?Ha:Ma),Ka=[{name:"\u041f\u0440\u043e\u0441\u0442\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",value:1,isSubform:!1,childTypes:[]},{name:"\u0417\u0432\u043e\u043d\u043e\u043a",value:2,isSubform:!0,childTypes:[{label:"\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",value:null,name:"phone_number",component:"AntInput",type:"text",validate:"validateRequired",hasFeedback:!0,isSubform:!1},{label:"\u0418\u043c\u044f \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u0430",value:null,name:"lead_name",component:"AntInput",type:"text",validate:"validateRequired",hasFeedback:!0,isSubform:!1}]},{name:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430",value:3,isSubform:!0,childTypes:[]}],qa=function(e){return Object(s.jsxs)(m.b,{className:"form-container",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Name",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:A,name:"email",type:"email",label:"Email",validate:p,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:M,name:"password",type:"password",label:"Password",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:M,name:"c_password",type:"password",label:"Confirm",validate:j,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:F,name:"remember",label:"Remember Me",submitCount:e.submitCount}),Object(s.jsx)(m.a,{component:_,selectOptions:Ja,name:"status",type:"select",label:"User Status",submitCount:e.submitCount}),Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Register"})})]})},Ja=[{name:"Guest",value:"guest",isSubform:!1},{name:"Admin",value:"admin",isSubform:!1}],Ga={email:"",password:"",name:"",remember:!1},Wa=function(e){var t=Object(lt.g)();Object(i.useEffect)((function(){e.isAuth&&t.replace(e.appLocation+"toDoList")}),[e.isAuth,t,e.appLocation]),Object(i.useEffect)((function(){e.authError&&Ue.b.error(e.authError)}),[e.authError]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"mb-5 mx-auto",children:"Register Form"}),Object(s.jsx)(m.c,{initialValues:Ga,onSubmit:function(t){e.register(t)},children:qa})]})},Xa=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,appLocation:e.app.location,authError:e.auth.authError}}),{register:function(e){return function(){var t=Object(Q.a)(Z.a.mark((function t(a,n){var s,i,r,c,l;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(e);case 2:if(200===(s=t.sent).status)i={email:e.email,password:e.password,remember:!!e.remember&&e.remember},a(ce(i));else{for(c in r="",s.data)Object.prototype.hasOwnProperty.call(s.data,c)&&(l=s.data[c],r=r+c+": "+l[0]+";");a(re.setAuthError(r))}case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(Wa),Za=function(e){Object(i.useEffect)((function(){0===e.usersList.length&&e.getUsersList()}),[e.usersList,e]);var t=Object(lt.i)().url;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h5",{children:"Users"}),Object(s.jsx)(Be.a,{as:"ul",children:e.usersList.map((function(a){return Object(s.jsx)(Be.a.Item,{as:"li",action:!0,className:"",children:Object(s.jsxs)(Ve.a,{className:"px-0 ml-0 ml-sm-5",children:[Object(s.jsx)(He.a,{className:"mx-2",children:a.id}),Object(s.jsx)(He.a,{className:"mx-2",children:Object(s.jsx)(ot.b,{to:t+"/"+a.id,children:a.name})}),"superAdmin"===e.UserStatus?Object(s.jsx)(He.a,{className:"mr-auto ml-0 mr-sm-2 ml-sm-auto",children:Object(s.jsx)(ue.a,{type:"primary",shape:"circle",size:"small",style:{marginLeft:10},onClick:function(){},icon:Object(s.jsx)("div",{className:"d-flex flex-wrap align-content-start",children:Object(s.jsx)(va.a,{className:"ml-1",style:{fontSize:"14px"}})})})}):null]})},a.id)}))})]})},Qa=d.j.Item,$a=function(e){Object(i.useEffect)((function(){0===e.usersList.length&&e.getUsersList()}),[e.usersList,e]);var t=Object(lt.i)().url;return Object(s.jsx)("div",{children:Object(s.jsx)(d.j,{renderHeader:function(){return"Users:"},className:"my-list",children:e.usersList.map((function(e){return Object(s.jsx)(Qa,{onClick:function(){console.log("onClick")},children:Object(s.jsx)(ot.b,{to:t+"/"+e.id,children:e.name})},e.id.toString())}))})})},en=a(313),tn=Object(en.a)((function(e){return e.users.usersList}),(function(e){return e})),an=Object(o.b)((function(e){var t;return{usersList:tn(e),UserStatus:null===(t=e.auth.user)||void 0===t?void 0:t.status}}),{getUsersList:Ht})(f.isMobile?$a:Za),nn=a(318),sn=function(e){var t={id:e.userData.id,created_at:e.userData.created_at,updated_at:e.userData.updated_at,name:e.userData.name,email:e.userData.email,phone:e.userData.phone,status:e.userData.status};return Object(s.jsx)("div",{children:Object(s.jsx)(m.c,{initialValues:t,onSubmit:function(t,a){delete t.created_at,delete t.updated_at,e.updateUser(t,e.userData.id)},enableReinitialize:!0,children:rn})})},rn=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=function(){r(!0)};return Object(s.jsxs)(m.b,{className:"form-container mt-2",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:A,name:"id",type:"text",label:"ID",disabled:!0}),Object(s.jsx)(m.a,{component:A,name:"created_at",type:"text",label:"Created at",disabled:!0}),Object(s.jsx)(m.a,{component:A,name:"updated_at",type:"text",label:"Updated at",disabled:!0}),Object(s.jsx)(m.a,{component:A,name:"email",type:"text",label:"Email",disabled:!0}),Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Name",validate:j,onChange:c,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:A,name:"phone",type:"text",label:"Phone number",validate:h,onChange:c,submitCount:e.submitCount,hasFeedback:!0}),Object(s.jsx)(m.a,{component:_,selectOptions:[{name:"Guest",value:"guest"},{name:"Admin",value:"admin"},{name:"Super Admin",value:"superAdmin"}],name:"status",type:"select",label:"Status",validate:j,onChange:c,submitCount:e.submitCount}),n?Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary mb-4",type:"submit",children:"Save"})}):null]})},cn=xa.a.Panel,ln=function(e,t){return e.filter((function(e){return e.id.toString()===t}))[0]},on=function(e,t,a){var n=[];if(e)for(var s=(t-1)*a,i=s+a,r=0;r<e.length;r++){var c=e[r];r>=s&&r<i&&n.push(c)}return n},un=function(e){Object(i.useEffect)((function(){var t=function(){return e.getUsersList};0===e.usersList.length&&t()(),e.isUsersDataChanged&&(t()(),e.setUsersDataChanged(!1))}),[e.usersList,e.getUsersList,e.isUsersDataChanged,e.setUsersDataChanged]);var t,a=Object(i.useState)(10),n=Object(l.a)(a,2),r=n[0],c=n[1],o=Object(i.useState)(1),u=Object(l.a)(o,2),d=u[0],b=u[1],j=Object(i.useState)(!1),p=Object(l.a)(j,2),h=p[0],O=p[1],f=Object(i.useState)(it),x=Object(l.a)(f,2),v=x[0],k=x[1],g=Object(i.useState)(null),S=Object(l.a)(g,2),L=S[0],T=S[1],D=Object(i.useState)(!1),y=Object(l.a)(D,2),C=y[0],I=y[1],N=ln(e.usersList,e.match.params.userId),w=Object(i.useState)({startDate:z()(),endDate:z()()}),_=Object(l.a)(w,2),E=_[0],A=_[1];return N?Object(s.jsxs)("div",{className:"mt-2",children:[Object(s.jsxs)("h5",{children:["Name: ",N.name]}),Object(s.jsxs)("p",{children:["User id: ",e.match.params.userId]}),Object(s.jsxs)(xa.a,{defaultActiveKey:[],onChange:function(){},children:[Object(s.jsx)(cn,{header:"User data",children:Object(s.jsx)(sn,{userData:N,updateUser:e.updateUser})},"1"),Object(s.jsxs)(cn,{header:"ToDo List",children:[Object(s.jsx)(da.b,{children:N.toDoList?on(N.toDoList,d,r).map((function(e){return Object(s.jsx)(dn,{item:e,setToDoFormVisible:O,setInitialFormValues:k},e.id.toString())})):null}),Object(s.jsx)(nn.a,{total:null===(t=N.toDoList)||void 0===t?void 0:t.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},defaultPageSize:10,defaultCurrent:1,onChange:function(e){b(e)},onShowSizeChange:function(e,t){c(t)}})]},"2"),Object(s.jsxs)(cn,{header:"Schedule",children:[Object(s.jsxs)("h3",{children:["Schedule for ",N.name,":"]}),Object(s.jsx)(je,{dateInterval:E,setIsInterval:function(e,t){console.log("setIsIntervalValues",e),I(e),A(t)},isReadOnly:!0}),Object(s.jsx)(et,{onEdit:function(){},dateInterval:E,errorMessage:e.errorMessage,getTaskList:function(e,t){var a=[];if(N.toDoList)for(var n=0;n<N.toDoList.length;n++){var s=N.toDoList[n];z()(s.date).isBetween(z()(E.startDate.format("YYYY-MM-DD")).add(-1,"day"),z()(E.endDate.format("YYYY-MM-DD")).add(1,"day"),"day")&&a.push(s)}T(a)},isInterval:C,settings:e.settings,taskList:L,taskListIsFetching:!1,taskSaveStatus:e.taskSaveStatus,isReadOnly:!0})]},"3"),Object(s.jsx)(cn,{header:"Related users"},"4"),Object(s.jsx)(cn,{header:"Permissions"},"5")]}),Object(s.jsx)(Re.a,{title:v.name,placement:"right",closable:!0,onClose:function(){k(it),O(!1)},visible:h,width:"90%",children:Object(s.jsx)(m.c,{initialValues:v,onSubmit:function(){},enableReinitialize:!0,initialStatus:"readOnly",children:Ce})})]}):Object(s.jsx)(Pe.a,{size:"large"},"spin")},dn=function(e){return Object(s.jsx)(da.b.Item,{actions:[Object(s.jsx)(ue.a,{onClick:function(){!function(t){e.setToDoFormVisible(!0);var a=t.time.split(":");e.setInitialFormValues({name:t.name,time:z()().hours(Number(a[0])).minutes(Number(a[1])).seconds(Number(a[2])),date:z()(t.date),descriptions:t.descriptions?t.descriptions:null})}(e.item)},type:"link",block:!0,children:"Show"})],children:e.item.name},e.item.id)},mn=a(314),bn=a.n(mn),jn=(a(566),d.j.Item),pn=function(e){var t=Object(i.useState)(1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),o=Object(l.a)(c,2),u=o[0],b=o[1],j=Object(i.useState)(_e),p=Object(l.a)(j,2),h=p[0],O=p[1],f=Object(i.useState)(null),x=Object(l.a)(f,2),v=x[0],k=x[1],g=Object(i.useState)({startDate:z()(),endDate:z()()}),S=Object(l.a)(g,2),L=S[0],T=S[1],D=ln(e.usersList,e.match.params.userId),y=Object(i.useCallback)((function(e,t){if(D){var a=[];if(D.toDoList)for(var n=0;n<D.toDoList.length;n++){var s=D.toDoList[n];z()(s.date).isBetween(z()(e).add(-1,"day"),z()(t).add(1,"day"),"day")&&a.push(s)}k(a)}else k(null)}),[k,D]);Object(i.useEffect)((function(){var t=function(){return e.getUsersList};console.log(e.isUsersDataChanged),0===e.usersList.length&&t()(),e.isUsersDataChanged&&(t()(),e.setUsersDataChanged(!1)),D&&null===v&&y(L.startDate.format("YYYY-MM-DD"),L.endDate.format("YYYY-MM-DD"))}),[e.usersList,e.getUsersList,L,D,v,y,e.isUsersDataChanged,e.setUsersDataChanged]);var C,I=Object(lt.g)();return D?Object(s.jsxs)("div",{children:[Object(s.jsx)(d.m,{mode:"light",icon:Object(s.jsx)(d.h,{type:"left"}),onLeftClick:function(){return I.replace(e.appLocation+"users")},rightContent:[Object(s.jsxs)("span",{children:["User id: ",e.match.params.userId]},"UserId")],children:Object(s.jsx)("span",{className:"text-dark",children:D.name})}),Object(s.jsxs)(d.a,{defaultActiveKey:"",className:"my-accordion",onChange:function(){},children:[Object(s.jsx)(d.a.Panel,{header:"User data",children:Object(s.jsx)(sn,{userData:D,updateUser:e.updateUser})}),Object(s.jsx)(d.a.Panel,{header:"ToDo List",children:Object(s.jsxs)(d.g,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:0,width:"100%"},sidebar:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(d.c,{inline:!0,size:"small",className:"ml-3 mt-3 mb-5",onClick:function(){b(!u)},type:"primary",children:"Close"}),Object(s.jsx)("div",{className:"mt-1",children:Object(s.jsx)(m.c,{initialValues:h,onSubmit:function(){},enableReinitialize:!0,initialStatus:"readOnly",children:Ce})})]}),open:u,children:[Object(s.jsx)(d.j,{children:D.toDoList?on(D.toDoList,n,10).map((function(e){return Object(s.jsx)(jn,{onClick:function(){!function(e){b(!u);var t=V(e.time),a=e.date.split(/-/),n=new Date;n.setFullYear(parseInt(a[0])),n.setMonth(parseInt(a[1])-1),n.setDate(parseInt(a[2])),O({name:e.name,time:t,date:n,descriptions:e.descriptions?e.descriptions:null})}(e)},children:e.name},e.id.toString())})):null}),Object(s.jsx)(d.k,{locale:bn.a,children:Object(s.jsx)("div",{className:"pagination-container",children:Object(s.jsx)(d.n,{className:"m-2",total:D.toDoList?Math.ceil((null===(C=D.toDoList)||void 0===C?void 0:C.length)/10):0,current:n,onChange:function(e){r(e)}})})})]})}),Object(s.jsxs)(d.a.Panel,{header:"Schedule",children:[Object(s.jsx)(De,{dateInterval:L,setIsInterval:function(e,t){T(t),y(t.startDate.format("YYYY-MM-DD"),t.endDate.format("YYYY-MM-DD"))},isReadOnly:!0}),Object(s.jsx)(Ye,{dateInterval:L,taskList:v,isReadOnly:!0})]}),Object(s.jsx)(d.a.Panel,{header:"Related users"}),Object(s.jsx)(d.a.Panel,{header:"Permissions"})]})]}):Object(s.jsx)(Pe.a,{size:"small"},"spin")},hn=Object(o.b)((function(e){return{usersList:e.users.usersList,dateInterval:e.task.dateInterval,errorMessage:e.task.errorMessage,isInterval:e.task.isInterval,taskSaveStatus:e.task.taskSaveStatus,settings:e.auth.viewSettings,appLocation:e.app.location,viewSettings:e.auth.viewSettings,isUsersDataChanged:e.users.isUsersDataChanged}}),{getUsersList:Ht,updateUser:Bt,setUsersDataChanged:Vt.setUsersDataChanged})(f.isMobile?pn:un),On=function(e){Object(i.useEffect)((function(){e.isProjectListLoaded||e.getProjectList()}),[e.isProjectListLoaded,e.projectList]);var t=Object(i.useState)(),a=Object(l.a)(t,2),n=(a[0],a[1],Object(lt.i)().url);return console.log(e),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h4",{children:"Projects"}),Object(s.jsx)("li",{children:"Add project"}),Object(s.jsx)(da.b,{bordered:!0,dataSource:e.projectList,renderItem:function(e){return Object(s.jsx)(da.b.Item,{actions:[Object(s.jsx)("a",{children:"show"},"list-loadmore-edit")],children:Object(s.jsx)(ot.b,{to:n+"/"+e.id,children:e.name})})}})]})},fn=Object(o.b)((function(e){return{projectList:e.projects.projectList,isProjectListLoaded:e.projects.isProjectLoaded}}),{getProjectList:Tt})(On),xn=function(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=function(e){r(!0)};return Object(s.jsxs)(m.b,{className:"form-container mt-2",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Name",validate:j,submitCount:e.submitCount,hasFeedback:!0,onChange:c}),Object(s.jsx)(m.a,{component:A,name:"url",type:"text",label:"URL",submitCount:e.submitCount,onChange:c}),Object(s.jsx)(m.a,{component:A,name:"ip",type:"text",label:"IP",submitCount:e.submitCount,onChange:c}),Object(s.jsx)(m.a,{component:A,name:"login",type:"text",label:"Login",submitCount:e.submitCount,onChange:c}),Object(s.jsx)(m.a,{component:A,name:"password",type:"text",label:"Password",submitCount:e.submitCount,onChange:c}),Object(s.jsx)(m.a,{component:A,name:"folder",type:"text",label:"folder on server",submitCount:e.submitCount,onChange:c}),n?Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})}):null]})},vn=a(176),kn=a.n(vn),gn=xa.a.Panel,Sn=function(e){return Object(i.useEffect)((function(){e.getModelsList(1)}),[]),console.log(e),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"w-100 d-flex flex-row-reverse",children:Object(s.jsx)(ue.a,{className:"mr-4 ml-auto mb-3",type:"primary",children:"Add"})}),Object(s.jsx)(xa.a,{defaultActiveKey:[],children:e.modelsList.map((function(e){return Object(s.jsx)(gn,{header:e.name,children:Object(s.jsx)(Ln,{modelItem:e})},e.id)}))})]})},Ln=function(e){var t;t=Array.isArray(e.modelItem.fields)?e.modelItem.fields:JSON.parse(e.modelItem.fields),console.log(t);var a=[],n={};if(t)for(var i=0;i<t.length;i++){var r=t[i];console.log(r),a.push(r),n["field_"+r.name]=r.type}return console.log(a),console.log(t),Object(s.jsx)(m.c,{initialValues:Object(u.a)(Object(u.a)({},e.modelItem),{},{fields:a},n),onSubmit:function(e){console.log(e)},children:Tn})},Tn=function(e){var t=Object(i.useState)(),a=Object(l.a)(t,2),n=a[0],r=a[1],c=function(e){p(!0)},o=function(){y(!0)},u=Object(i.useState)(!1),d=Object(l.a)(u,2),b=d[0],p=d[1],h=Object(i.useState)(function(){var t=[],a=e.initialValues;for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){var i=a[n];if(Array.isArray(i)&&i.length>0)for(var r=0;r<i.length;r++){var c=i[r];t.push(Object(s.jsx)(Dn,{fieldName:c.name,fieldType:c.type,openModalToAddField:o}))}}return t}()),O=Object(l.a)(h,2),f=O[0],x=O[1],v=Object(i.useState)(1),k=Object(l.a)(v,2),g=k[0],S=k[1],L=Object(i.useState)(!1),T=Object(l.a)(L,2),D=T[0],y=T[1],C=function(){console.log("addField");var e=Object(yt.a)(f);S(Number(g)+1),e.push(Object(s.jsx)(Dn,{fieldName:n,fieldType:n,openModalToAddField:o})),x(e)};return f&&0===f.length&&x([Object(s.jsx)(Ie.a,{image:Ie.a.PRESENTED_IMAGE_SIMPLE})]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.b,{className:"form-container mt-2",onSubmit:e.handleSubmit,children:[Object(s.jsx)(m.a,{component:A,name:"name",type:"text",label:"Name",validate:j,submitCount:e.submitCount,hasFeedback:!0,onChange:c}),Object(s.jsx)(m.a,{component:A,name:"folder",type:"text",label:"Folder",submitCount:e.submitCount,onChange:c}),Object(s.jsxs)("div",{className:"w-100 d-flex flex-row mt-2 mb-2",children:[Object(s.jsx)("h5",{children:"Field List:"}),Object(s.jsx)(ue.a,{className:"mr-4 ml-auto",type:"primary",onClick:o,children:"Add Field"})]}),f,Object(s.jsxs)("div",{className:"w-100 d-flex flex-row mt-2 mb-2",children:[Object(s.jsx)("h5",{children:"Methods:"}),Object(s.jsx)(ue.a,{className:"mr-4 ml-auto",type:"primary",children:"Add method"})]}),b?Object(s.jsx)("div",{className:"submit-container",children:Object(s.jsx)("button",{className:"ant-btn ant-btn-primary",type:"submit",children:"Save"})}):null]}),Object(s.jsxs)(kn.a,{title:"New Field Form",visible:D,onOk:function(e){console.log("handleOk",e),C(),y(!1)},onCancel:function(e){console.log("handleCancel",e),y(!1)},children:[Object(s.jsx)(m.a,{component:A,name:"newFieldName",type:"text",label:"New fieldName",validate:j,hasFeedback:!0,onChange:function(e,t){console.log(t.target.value),r(t.target.value)}}),Object(s.jsx)(m.a,{component:_,selectOptions:[],name:"fieldType",type:"select",label:"Field type",submitCount:e.submitCount})]})]})},Dn=function(e){return Object(s.jsxs)("div",{className:"row py-2 border",children:[Object(s.jsx)("div",{className:"col",children:e.fieldName}),Object(s.jsx)("div",{className:"col",children:e.fieldType}),Object(s.jsx)("div",{className:"col",children:"isNulleble"}),Object(s.jsx)("div",{className:"col",children:Object(s.jsx)(ue.a,{type:"ghost",size:"small",onClick:e.openModalToAddField,children:"Edit"})})]},e.fieldName)},yn=Object(o.b)((function(e){return{modelsList:e.projects.modelsList}}),{getModelsList:function(e){return function(){var t=Object(Q.a)(Z.a.mark((function t(a,n){var s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt(e);case 2:s=t.sent,console.log(s.data.models),a(Lt(s.data.models));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(Sn),Cn=xa.a.Panel,In=function(e){Object(i.useEffect)((function(){e.getBackendData(1)}),[]);var t=_n(e.projectsList,e.projectId.toString());console.log("project",t);var a={name:t.backendData?t.backendData.name:null,url:t.backendData?t.backendData.url:null,ip:t.backendData?t.backendData.ip:null,login:t.backendData?t.backendData.login:null,password:t.backendData?t.backendData.password:null,folder:t.backendData?t.backendData.folder:null};return t.backendData?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h5",{children:t.backendData.name}),Object(s.jsxs)(xa.a,{defaultActiveKey:[],children:[Object(s.jsx)(Cn,{header:"Instanses",children:Object(s.jsx)(m.c,{initialValues:a,onSubmit:function(a){console.log(t.backendData.id),console.log(a),e.updateBackend(a,t.backendData.id)},children:xn})},"1"),Object(s.jsx)(Cn,{header:"Models",children:Object(s.jsx)(yn,{})},"2")]}),Object(s.jsx)("li",{children:"Controllers"}),Object(s.jsx)("li",{children:"Migrations"}),Object(s.jsx)("li",{children:"Api"}),Object(s.jsx)("li",{children:"Seeders"}),Object(s.jsx)("li",{children:"Fasades"}),Object(s.jsx)("li",{children:"Middleware"}),Object(s.jsx)("li",{children:"Services"}),Object(s.jsx)("li",{children:"Events"}),Object(s.jsx)("li",{children:"Workers"})]}):Object(s.jsx)(Pe.a,{size:"large"},"spin")},Nn=Object(o.b)((function(e){return{projectsList:e.projects.projectList,isProjectsLoaded:e.projects.isProjectLoaded}}),{getProjectList:Tt,getBackendData:function(e){return function(){var t=Object(Q.a)(Z.a.mark((function t(a,n){var s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ot(e);case 2:void 0!==(s=t.sent)&&null!==s&&a(St(e,s.data.Backend[0]));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updateBackend:function(e,t){return function(){var a=Object(Q.a)(Z.a.mark((function a(n,s){var i;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ft(e,t);case 2:i=a.sent,console.log(i);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})(In),wn=xa.a.Panel,_n=function(e,t){return e.filter((function(e){return e.id.toString()===t}))[0]},En=function(e){Object(i.useEffect)((function(){e.isProjectsLoaded||e.getProjectList()}),[e.isProjectsLoaded]),console.log(e);var t=_n(e.projectsList,e.match.params.userId);return t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{children:t.name}),Object(s.jsxs)(xa.a,{defaultActiveKey:[],children:[t.backend_id?Object(s.jsxs)(wn,{header:"Backend",children:["Backend data to ",t.backend_id,Object(s.jsx)(Nn,{projectId:e.match.params.userId})]},"1"):null,t.frontend_id?Object(s.jsx)(wn,{header:"Frontend",children:"Frontend data"},"2"):null]})]}):Object(s.jsx)(Pe.a,{size:"large"},"spin")},An=Object(o.b)((function(e){return{projectsList:e.projects.projectList,isProjectsLoaded:e.projects.isProjectLoaded}}),{getProjectList:Tt,updateUser:Bt})((f.isMobile,En)),Mn=Object(ut.d)(lt.j,Object(o.b)((function(e){var t;return{initialized:e.app.initialized,appLocation:e.app.location,isAuth:e.auth.isAuth,userStatus:null===(t=e.auth.user)||void 0===t?void 0:t.status}}),{initializeApp:function(){return function(e){var t=e(function(){var e=Object(Q.a)(Z.a.mark((function e(t,a){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:null!==(n=e.sent)&&0===n.data.resultCode&&t(re.setAuthUserData(n.data.user,n.data.remember_token));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());Promise.all([t]).then((function(){e(bt())}))}},addLocation:function(e){return function(t){t(jt(e))}},login:ce}))((function(e){var t=Object(i.useState)(Object(lt.h)().pathname),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(i.useEffect)((function(){if(!e.initialized){var t=Fn();t.email&&t.password&&(t.remember=!0,e.login(t)),"/front1/"===n&&(e.addLocation(n),r(n)),e.initializeApp()}}),[e,n]),e.initialized?Object(s.jsxs)(Gt.a,{children:[Object(s.jsx)(ia,{}),Object(s.jsxs)(lt.d,{children:[e.isAuth?Object(s.jsx)(lt.b,{exact:!0,path:e.appLocation,render:function(){return Object(s.jsx)(lt.a,{to:e.appLocation+"toDoList"})}}):Object(s.jsx)(lt.b,{exact:!0,path:e.appLocation,render:function(){return Object(s.jsx)(lt.a,{to:e.appLocation+"login"})}}),e.isAuth?Object(s.jsx)(lt.b,{exact:!0,path:e.appLocation+"login",render:function(){return Object(s.jsx)(lt.a,{to:e.appLocation+"toDoList"})}}):null,Object(s.jsx)(lt.b,{path:e.appLocation+"login",render:function(){return Object(s.jsx)(la,{})}}),Object(s.jsx)(lt.b,{path:e.appLocation+"toDoList",render:function(){return Object(s.jsx)(ct,{})}}),Object(s.jsx)(lt.b,{path:e.appLocation+"tasksTree",render:function(){return Object(s.jsx)(Ba,{})}}),Object(s.jsx)(lt.b,{path:e.appLocation+"orders",render:function(){return Object(s.jsx)(ua,{})}}),Object(s.jsx)(lt.b,{path:e.appLocation+"register",render:function(){return Object(s.jsx)(Xa,{})}}),Object(s.jsx)(lt.b,{path:e.appLocation+"users/:userId",component:"admin"===e.userStatus||"superAdmin"===e.userStatus?hn:Rn}),Object(s.jsx)(lt.b,{exact:!0,path:e.appLocation+"users",component:"admin"===e.userStatus||"superAdmin"===e.userStatus?an:Rn}),Object(s.jsx)(lt.b,{path:e.appLocation+"projects/:userId",component:"admin"===e.userStatus||"superAdmin"===e.userStatus?An:Rn}),Object(s.jsx)(lt.b,{exact:!0,path:e.appLocation+"projects",component:"admin"===e.userStatus||"superAdmin"===e.userStatus?fn:Rn}),Object(s.jsx)(lt.b,{path:e.appLocation+"*",component:Rn})]})]}):Object(s.jsx)(Pe.a,{size:"large"},"spin")})),Yn=function(){return Object(s.jsx)(ot.a,{children:Object(s.jsx)(o.a,{store:Jt,children:Object(s.jsx)("div",{className:f.isMobile?"":"container",children:Object(s.jsx)(Mn,{})})})})},Fn=function(){var e={};return document.location.search.substr(1).split("&").forEach((function(t){var a=t.split("="),n=Object(l.a)(a,2),s=n[0],i=n[1];e[s]=i})),e},Rn=function(e){return Object(s.jsx)(Wt.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(s.jsx)(ue.a,{type:"primary",children:"Back Home"})})},Un=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,619)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};c.a.render(Object(s.jsx)(Yn,{}),document.getElementById("root")),Un()}},[[596,1,2]]]);
//# sourceMappingURL=main.06a3f135.chunk.js.map